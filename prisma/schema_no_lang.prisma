// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

// ==================== ENUMS ====================
enum Language {
  fa
  en
  ar
  tr
  de
  fr
  es
  zh
  ru
}

// Ø¯Ø± ÙØ§ÛŒÙ„ prisma schema ÛŒØ§ enums Ø¬Ø¯Ø§Ú¯Ø§Ù†Ù‡
enum SystemRole {
  USER
  ADMIN
  MODERATOR
  OPERATOR
  CONTENT_APPROVER
}

enum AccountRole {
  OWNER
  MANAGER
  FINANCE
  VIEWER
  SUPPORT
  PRODUCT_MANAGER
}

enum FileUsage {
  // Ø¹Ù…ÙˆÙ…ÛŒ
  GENERAL
  DOCUMENT

  // Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ (Ú©Ø§Ø±Ø¨Ø±Ø§Ù†)
  PROFILE_PHOTO
  PROFILE_SMALL_PHOTO
  ID_CARD_FRONT
  ID_CARD_BACK
  SELFIE_WITH_ID
  SIGNATURE
  BANK_CARD
  ADDRESS_PROOF

  // Ú©Ø³Ø¨â€ŒÙˆÚ©Ø§Ø± / Ø³Ø§Ø²Ù…Ø§Ù†
  LOGO
  BANNER
  SHOP_FRONT
  INTERIOR_PHOTO
  SHOP_VIDEO
  CERTIFICATE
  LICENSE
  TAX_DOCUMENT
  REGISTRATION_DOC
  TEAM_PHOTO

  // Ù…Ø­ØµÙˆÙ„ / Ø®Ø¯Ù…Ø§Øª
  PRODUCT_IMAGE
  PRODUCT_GALLERY
  PRODUCT_VIDEO
  PRODUCT_LABEL
  PRODUCT_CERT
  PRODUCT_MANUAL

  // ØªØ¨Ù„ÛŒØºØ§Øª / Ù…Ø­ØªÙˆØ§ÛŒ Ø¨Ø§Ø²Ø§Ø±ÛŒØ§Ø¨ÛŒ
  AD_BANNER
  PROMO_VIDEO
  SOCIAL_POST

  // Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ùˆ ØªØ§ÛŒÛŒØ¯Ø§Øª
  SUPPORT_ATTACHMENT
  VERIFICATION_DOC
}

enum AccountActivityType {
  PERSONAL // Ú©Ø§Ø±Ø¨Ø± Ø´Ø®ØµÛŒ - ÙÙ‚Ø· Ø®Ø±ÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ù…ØµØ±Ù
  RETAIL_BUYER // Ø®Ø±ÛŒØ¯Ø§Ø± Ø®Ø±Ø¯Ù‡â€ŒÙØ±ÙˆØ´ - Ø®Ø±ÛŒØ¯ Ø¹Ù…Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ ÙØ±ÙˆØ´ Ø®Ø±Ø¯Ù‡
  WHOLESALER // Ø¹Ù…Ø¯Ù‡â€ŒÙØ±ÙˆØ´ - ÙØ±ÙˆØ´ Ø¹Ù…Ø¯Ù‡
  MANUFACTURER // ØªÙˆÙ„ÛŒØ¯Ú©Ù†Ù†Ø¯Ù‡ - Ø®Ø±ÛŒØ¯ Ù…ÙˆØ§Ø¯ Ø§ÙˆÙ„ÛŒÙ‡ + ÙØ±ÙˆØ´ Ù…Ø­ØµÙˆÙ„
  SUPPLIER // ØªØ£Ù…ÛŒÙ†â€ŒÚ©Ù†Ù†Ø¯Ù‡ Ù…ÙˆØ§Ø¯ Ø§ÙˆÙ„ÛŒÙ‡
  DISTRIBUTOR // Ù¾Ø®Ø´â€ŒÚ©Ù†Ù†Ø¯Ù‡
  SERVICE // Ø§Ø±Ø§Ø¦Ù‡â€ŒØ¯Ù‡Ù†Ø¯Ù‡ Ø®Ø¯Ù…Ø§Øª
  BROKER // Ú©Ø§Ø±Ú¯Ø²Ø§Ø±
}

enum ProductStatus {
  PENDING // Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± Ø¨Ø±Ø±Ø³ÛŒ
  APPROVED // ØªØ§ÛŒÛŒØ¯ Ø´Ø¯Ù‡ Ùˆ ÙØ¹Ø§Ù„
  REJECTED // Ø±Ø¯ Ø´Ø¯Ù‡
  EDIT_PENDING // Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± ØªØ§ÛŒÛŒØ¯ Ù¾Ø³ Ø§Ø² ÙˆÛŒØ±Ø§ÛŒØ´
  SUSPENDED // ØªØ¹Ù„ÛŒÙ‚ Ø´Ø¯Ù‡ (Ù…Ø«Ù„Ø§Ù‹ Ø¨Ù‡ Ø¯Ù„ÛŒÙ„ ØªØ®Ù„Ù)
  INACTIVE // ØºÛŒØ±ÙØ¹Ø§Ù„ ØªÙˆØ³Ø· ÙØ±ÙˆØ´Ù†Ø¯Ù‡ ÛŒØ§ Ø³ÛŒØ³ØªÙ…
  OUT_OF_STOCK // Ù†Ø§Ù…ÙˆØ¬ÙˆØ¯ (Ù…ÙˆØ¬ÙˆØ¯ÛŒ ØµÙØ±)
}

enum InteractionType {
  LIKE
  SAVE
  VIEW
}

enum OrderType {
  PACKAGE_PURCHASE
  PRODUCT_PURCHASE
  PAYMENT_REQUEST
  WITHDRAWAL_REQUEST
  DEPOSIT_REQUEST
  ESCROW_PAYMENT
  ESCROW_RELEASE
  ESCROW_REFUND
  SERVICE_PURCHASE
}

enum OrderStatus {
  PENDING
  PAID
  CONFIRMED
  PROCESSING
  COMPLETED
  CANCELLED
  FAILED
  REFUNDED
  PARTIALLY_REFUNDED
  EXPIRED
}

enum TransactionStatus {
  PENDING
  SUCCESS
  FAILED
  CANCELLED
  REFUNDED
  PARTIALLY_REFUNDED
  PROCESSING
}

enum TransactionType {
  DEBIT
  CREDIT
  BONUS
}

enum PaymentMethod {
  CREDIT_BALANCE
  ONLINE_GATEWAY
  BANK_TRANSFER
  WALLET
  CASH
  CRYPTO
}

// ÙØ¹Ø§Ù„ÛŒØªÙ‡Ø§ÛŒ Ù¾ÙˆÙ„ÛŒ
enum CreditActivityType {
  PRODUCT_BOOST
  SEND_BROADCAST
  FEATURED_BANNER
  VIDEO_UPLOAD
  INVITE_BONUS
  PRODUCT_CREATE
  PROFILE_COMPLETE
  DAILY_LOGIN
  REFERRAL_BONUS
  WELCOME_BONUS
  PACKAGE_PURCHASE
}

enum CreditActivityStatus {
  PENDING
  COMPLETED
  FAILED
  REFUNDED
}

enum UserActivityType {
  PROFILE_UPDATE
  PRODUCT_DELETE
  // ğŸ” Ø¬Ø³ØªØ¬Ùˆ (Ø¨Ø³ÛŒØ§Ø± Ù…Ù‡Ù… Ø¨Ø±Ø§ÛŒ Ø´Ø®ØµÛŒâ€ŒØ³Ø§Ø²ÛŒ)
  SEARCH_QUERY
  SEARCH_FILTER

  // ğŸ‘€ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù…Ø­ØµÙˆÙ„Ø§Øª (Ù…Ø³ØªÙ‚ÛŒÙ… Ù†Ø´Ø§Ù†â€ŒØ¯Ù‡Ù†Ø¯Ù‡ Ø¹Ù„Ø§Ù‚Ù‡)
  PRODUCT_VIEW
  PRODUCT_DETAIL_VIEW
  CATEGORY_VIEW

  // â¤ï¸ ØªØ¹Ø§Ù…Ù„ Ø¨Ø§ Ù…Ø­ØµÙˆÙ„Ø§Øª (Ù†Ø´Ø§Ù†â€ŒØ¯Ù‡Ù†Ø¯Ù‡ Ø¹Ù„Ø§Ù‚Ù‡ Ù‚ÙˆÛŒ)
  PRODUCT_LIKE
  PRODUCT_SAVE
  PRODUCT_COMPARE

  // ğŸ’° ÙØ¹Ø§Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø®Ø±ÛŒØ¯ Ùˆ ÙØ±ÙˆØ´ (Ù…Ù‡Ù…â€ŒØªØ±ÛŒÙ† Ø¨Ø±Ø§ÛŒ B2B)
  BUY_AD_CREATE // Ú©Ø§Ø±Ø¨Ø± Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø®Ø±ÛŒØ¯ Ø«Ø¨Øª Ú©Ø±Ø¯Ù‡
  BUY_AD_VIEW // Ú©Ø§Ø±Ø¨Ø± Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø®Ø±ÛŒØ¯ Ø¯ÛŒÚ¯Ø±Ø§Ù† Ø±Ùˆ Ø¯ÛŒØ¯Ù‡
  OFFER_CREATE // Ú©Ø§Ø±Ø¨Ø± Ø¨Ù‡ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø®Ø±ÛŒØ¯ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ø¯Ø§Ø¯Ù‡
  OFFER_VIEW // Ú©Ø§Ø±Ø¨Ø± Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯Ø§Øª Ø±Ùˆ Ø¯ÛŒØ¯Ù‡

  // ğŸ›’ Ø³ÙØ§Ø±Ø´Ø§Øª (Ø±ÙØªØ§Ø± Ø®Ø±ÛŒØ¯ ÙˆØ§Ù‚Ø¹ÛŒ)
  ORDER_CREATE
  ORDER_VIEW

  // ğŸ’¬ Ø¨Ø§Ø²Ø®ÙˆØ±Ø¯ (Ù†Ø´Ø§Ù†â€ŒØ¯Ù‡Ù†Ø¯Ù‡ ØªØ¬Ø±Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø±)
  REVIEW_CREATE
  REVIEW_LIKE

  // ğŸ‘¤ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù¾Ø±ÙˆÙØ§ÛŒÙ„â€ŒÙ‡Ø§ (Ø¹Ù„Ø§Ù‚Ù‡ Ø¨Ù‡ ØµÙ†Ù/ÙØ±ÙˆØ´Ù†Ø¯Ù‡ Ø®Ø§Øµ)
  ACCOUNT_VIEW
  PROFILE_VIEW
}

enum PlanStatus {
  ACTIVE
  INACTIVE
  COMING_SOON
}

enum LocationType {
  COUNTRY // Ú©Ø´ÙˆØ±
  PROVINCE // Ø§Ø³ØªØ§Ù†
  CITY // Ø´Ù‡Ø±
  TOWN // Ø´Ù‡Ø±Ú©
  VILLAGE // Ø±ÙˆØ³ØªØ§
  DISTRICT // Ù…Ù†Ø·Ù‚Ù‡
  NEIGHBORHOOD // Ù…Ø­Ù„Ù‡
  RURAL_DISTRICT // Ø¯Ù‡Ø³ØªØ§Ù†

  // ğŸ­ Ù…Ú©Ø§Ù†â€ŒÙ‡Ø§ÛŒ ØªØ®ØµØµÛŒ Ø¨Ø±Ø§ÛŒ Ú©Ø³Ø¨â€ŒÙˆÚ©Ø§Ø±Ù‡Ø§ÛŒ Ø¹Ù…Ø¯Ù‡â€ŒÙØ±ÙˆØ´ÛŒ
  INDUSTRIAL_ESTATE // Ø´Ù‡Ø±Ú© ØµÙ†Ø¹ØªÛŒ
  INDUSTRIAL_ZONE // Ù…Ù†Ø·Ù‚Ù‡ ØµÙ†Ø¹ØªÛŒ
  COMMERCIAL_ZONE // Ù…Ù†Ø·Ù‚Ù‡ ØªØ¬Ø§Ø±ÛŒ
  WHOLESALE_MARKET // Ø¨Ø§Ø²Ø§Ø± Ø¹Ù…Ø¯Ù‡â€ŒÙØ±ÙˆØ´ÛŒ
  TRADE_CENTER // Ù…Ø±Ú©Ø² ØªØ¬Ø§Ø±ÛŒ
  WAREHOUSE_DISTRICT // Ù…Ù†Ø·Ù‚Ù‡ Ø§Ù†Ø¨Ø§Ø±ÛŒ

  // ğŸ›ï¸ Ù…Ø±Ø§Ú©Ø² Ø®Ø±ÛŒØ¯ Ùˆ ÙØ±ÙˆØ´
  SHOPPING_CENTER // Ù…Ø±Ú©Ø² Ø®Ø±ÛŒØ¯
  SHOPPING_MALL // Ù…Ø§Ù„
  BAZAAR // Ø¨Ø§Ø²Ø§Ø±
  TRADITIONAL_BAZAAR // Ø¨Ø§Ø²Ø§Ø± Ø³Ù†ØªÛŒ

  // ğŸ—ï¸ Ø§Ù†ÙˆØ§Ø¹ Ù…Ø¬ØªÙ…Ø¹â€ŒÙ‡Ø§
  BUSINESS_COMPLEX // Ù…Ø¬ØªÙ…Ø¹ Ú©Ø³Ø¨â€ŒÙˆÚ©Ø§Ø±
  OFFICE_COMPLEX // Ù…Ø¬ØªÙ…Ø¹ Ø§Ø¯Ø§Ø±ÛŒ
  RESIDENTIAL_COMPLEX // Ù…Ø¬ØªÙ…Ø¹ Ù…Ø³Ú©ÙˆÙ†ÛŒ
}

model Location {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at DateTime @default(now())

  type      LocationType
  code      String
  parent_id String?      @db.ObjectId

  // ğŸ”§ Ø§ØµÙ„Ø§Ø­: Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² NoAction Ø¨Ø±Ø§ÛŒ Ø±Ø§Ø¨Ø·Ù‡ Ø®ÙˆØ¯Ø§Ø±Ø¬Ø§Ø¹ÛŒ
  parent   Location?  @relation("LocationChildren", fields: [parent_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  children Location[] @relation("LocationChildren")

  contents LocationContent[]

  @@index([type])
  @@index([code])
  @@index([parent_id])
  @@map("locations")
}

model LocationContent {
  id          String   @id @default(auto()) @map("_id") @db.ObjectId
  location_id String   @db.ObjectId
  // ğŸ”§ Ø§ÛŒÙ†Ø¬Ø§ Cascade Ø¯Ø±Ø³Øª Ø§Ø³Øª Ú†ÙˆÙ† Ø±Ø§Ø¨Ø·Ù‡ Ø¨ÛŒÙ† Ø¯Ùˆ Ù…Ø¯Ù„ Ù…Ø®ØªÙ„Ù Ø§Ø³Øª
  location    Location @relation(fields: [location_id], references: [id], onDelete: Cascade)

  language  Language
  name      String
  full_name String?

  @@unique([location_id, language])
  @@index([location_id])
  @@index([language])
  @@index([name])
  @@map("location_contents")
}

// ==================== MODELS ====================

model VerificationCode {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  code       String
  mobile     String
  expires_at DateTime
  user_id    String?  @db.ObjectId
  user       User?    @relation(fields: [user_id], references: [id], onDelete: Cascade)
  created_at DateTime @default(now())

  @@map("verification_codes")
}

model UserSession {
  id         String    @id @default(auto()) @map("_id") @db.ObjectId
  user_id    String    @db.ObjectId
  user       User      @relation(fields: [user_id], references: [id], onDelete: Cascade)
  started_at DateTime  @default(now())
  ended_at   DateTime?

  // Ø®Ù„Ø§ØµÙ‡ Ø¬Ù„Ø³Ù‡ Ø¨Ø±Ø§ÛŒ Ø¢Ù†Ø§Ù„ÛŒØ²
  session_type              String?
  number_of_pages_visited   Int     @default(0) // ØªØ¹Ø¯Ø§Ø¯ ØµÙØ­Ø§Øª Ø¨Ø§Ø²Ø¯ÛŒØ¯ Ø´Ø¯Ù‡
  number_of_products_viewed Int     @default(0)
  number_of_searches_made   Int     @default(0)

  @@index([user_id, started_at])
  @@index([started_at])
  @@map("user_sessions")
}

model User {
  id                  String    @id @default(auto()) @map("_id") @db.ObjectId
  created_at          DateTime  @default(now())
  user_name           String?   @unique
  first_name          String?
  last_name           String?
  sex                 String?
  province            String?
  city                String?
  activity_type       String?   @default("0") // ÙØ¹Ø§Ù„ÛŒØª Ø´Ø®ØµÛŒ ÛŒØ§ Ø´Ø±Ú©ØªÛŒ
  is_verified         Boolean   @default(false)
  is_buyer            Boolean   @default(false)
  is_seller           Boolean   @default(false)
  is_blocked          Boolean   @default(false)
  wallet_balance      Int       @default(0)
  category_id         Int?
  active_package_type Int       @default(0)
  package_end         DateTime?
  customer_status     String    @default("00000000")
  support_status      String    @default("00000000")
  coming_from         String?
  phone_allowed       Boolean   @default(true)
  product_count       Int       @default(0)
  response_rate       Float?
  has_phone           Boolean   @default(false)
  total_profile_views Int       @default(0)
  last_profile_view   DateTime?

  rating         Float? @default(0.0)
  // Ø³ÛŒØ³ØªÙ… Ø§Ø¹ØªØ¨Ø§Ø±ÛŒ
  credit_level   Int    @default(0)
  current_credit Int    @default(0)
  total_spent    Int    @default(0)
  bonus_credit   Int    @default(0)

  // ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª
  email       String?    @unique
  mobile      String?    @unique
  password    String
  system_role SystemRole @default(USER)

  // Ø§Ø±ØªØ¨Ø§Ø·Ø§Øª
  account_users       AccountUser[]
  reviews             Review[]
  comments            Comment[]
  buy_ads             BuyAd[]
  products            Product[]
  interactions        Interaction[]
  credit_transactions CreditTransaction[]
  sent_messages       Message[]           @relation("SentMessages")
  conversations1      Conversation[]      @relation("ConversationUser1")
  conversations2      Conversation[]      @relation("ConversationUser2")
  verification_codes  VerificationCode[]
  files               File[]
  orders              Order[]
  credit_activities   CreditActivity[]
  seller_orders       Order[]             @relation("OrderSeller")
  transactions        Transaction[]
  user_sessions       UserSession[]
  user_plans          UserPlan[]
  Offer               Offer[]

  // Ø§ÛŒÙ†Ø¯Ú©Ø³â€ŒÙ‡Ø§ÛŒ Ø­ÛŒØ§ØªÛŒ
  @@index([is_verified, is_blocked])
  @@index([created_at])
  @@index([credit_level])
  @@index([current_credit])
  @@map("users")
}

// ==================== ENUMS ====================
model IndustryBranch {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø³Ù„Ø³Ù„Ù‡ Ù…Ø±Ø§ØªØ¨ Ø¯ÙˆÙ„ØªÛŒ
  name  String @unique // Ù†Ø§Ù… Ø´Ø§Ø®Ù‡ (Ù…Ø«Ù„Ø§Ù‹ "ÙØ±Ù‡Ù†Ú¯ Ùˆ Ù‡Ù†Ø±")
  code  String @unique // Ú©Ø¯ Ø´Ø§Ø®Ù‡ (Ù…Ø«Ù„Ø§Ù‹ "8")
  level Int    @default(1) // Ø³Ø·Ø­ Ø¯Ø± Ø¯Ø±Ø®Øª: 1=department, 2=branch, 3=sub_branch

  // Ø³Ù„Ø³Ù„Ù‡ Ù…Ø±Ø§ØªØ¨ Ø¯Ø±Ø®ØªÛŒ
  parentId String?          @db.ObjectId
  parent   IndustryBranch?  @relation("IndustryBranchChildren", fields: [parentId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  children IndustryBranch[] @relation("IndustryBranchChildren")

  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø§Ø¶Ø§ÙÛŒ
  department         String? // ÙˆØ²Ø§Ø±ØªØ®Ø§Ù†Ù‡ Ù…Ø±ØªØ¨Ø·
  department_code    String? // Ú©Ø¯ ÙˆØ²Ø§Ø±ØªØ®Ø§Ù†Ù‡
  business_tree_code String? // Ú©Ø¯ Ø¯Ø±Ø®Øª Ú©Ø³Ø¨ Ùˆ Ú©Ø§Ø±

  description String?

  // Ø§Ø±ØªØ¨Ø§Ø·Ø§Øª
  industries Industry[]

  // Ø§ÛŒÙ†Ø¯Ú©Ø³â€ŒÙ‡Ø§
  @@index([parentId])
  @@index([level])
  @@index([department_code])
  @@map("industry_branches")
}

// Ù†ÙˆØ¹ Ú©Ø³Ø¨â€ŒÙˆÚ©Ø§Ø± (Ø§Ø² BUTTONS Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ù…ÛŒâ€ŒØ´ÙˆØ¯)
enum IndustryBusinessType {
  HOUSEHOLD // Ø®Ø§Ù†Ú¯ÛŒ
  GUILD // ØµÙ†ÙÛŒ
  SERVICE // Ø®Ø¯Ù…Ø§ØªÛŒ
  INDUSTRIAL // ØµÙ†Ø¹ØªÛŒ
  COMMERCIAL // ØªØ¬Ø§Ø±ÛŒ
  AGRICULTURAL // Ú©Ø´Ø§ÙˆØ±Ø²ÛŒ
}

// Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø§ØµÙ„ÛŒ ØµÙ†Ùâ€ŒÙ‡Ø§
model Industry {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø§ØµÙ„ÛŒ
  name            String
  business_number String? // Ø´Ù…Ø§Ø±Ù‡ Ù¾Ø±ÙˆØ§Ù†Ù‡ Ú©Ø³Ø¨

  // Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø¯Ø±Ø®ØªÛŒ
  industry_branch_id String?         @db.ObjectId
  industry_branch    IndustryBranch? @relation(fields: [industry_branch_id], references: [id])

  // Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ù†ÙˆØ¹ Ú©Ø³Ø¨â€ŒÙˆÚ©Ø§Ø±
  business_type IndustryBusinessType[]
  is_active     Boolean                @default(true)
  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªÙˆØµÛŒÙÛŒ
  description   String? // ØªÙˆØ¶ÛŒØ­ Ú©ÙˆØªØ§Ù‡
  introduction  String? // Ù…Ø¹Ø±ÙÛŒ Ú©Ø§Ù…Ù„ - TXR_BUSINESS_INTRODUCTION

  // ÙˆØ¶Ø¹ÛŒØª
  level     Int @default(1)
  priority1 Int @default(0) // PRIORITY1
  priority2 Int @default(0) // PRIORITY2
  priority3 Int @default(0) // PRIORITY3

  // Ø³Ù„Ø³Ù„Ù‡ Ù…Ø±Ø§ØªØ¨ ØµÙ†ÙÛŒ
  parentId String?    @db.ObjectId
  parent   Industry?  @relation("IndustryChildren", fields: [parentId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  children Industry[] @relation("IndustryChildren")

  // ğŸ”¥ Ø§Ø±ØªØ¨Ø§Ø·Ø§Øª Ø®Ø±ÛŒØ¯/ÙØ±ÙˆØ´
  as_supplier_relations IndustryRelation[] @relation("SupplierRelations")
  as_customer_relations IndustryRelation[] @relation("CustomerRelations")

  // ØªÚ¯â€ŒÙ‡Ø§ Ùˆ Ù…Ø­ØµÙˆÙ„Ø§Øª
  business_tags String[] // ØªÚ¯Ù‡Ø§ÛŒ Ù…Ø±ØªØ¨Ø· Ø¨Ø§ Ø§ÛŒÙ† ØµÙ†Ù
  related_tags  String[] // ØªÚ¯Ù‡Ø§ÛŒ Ù…Ø±ØªØ¨Ø· ØµÙ†Ù Ø¨Ø±Ø§ÛŒ Ø¬Ø³ØªØ¬ÙˆÛŒ Ùˆ Ù¾ÛŒØ¯Ø§ ØµÙ†Ù Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒ Ø´ÙˆØ¯. Ù…Ø«Ù„Ø§ Ø¨Ø±Ø§ÛŒ Ø®ÛŒØ§Ø·ÛŒ Ù¾Ø§Ø±Ú†Ù‡. Ù‡Ø± Ú†ÛŒØ²ÛŒ Ú©Ù‡ Ú©Ù…Ú© Ú©Ù†Ø¯ Ú©Ø§Ø±Ø¨Ø± Ø¯Ø± Ù‡Ù†Ú¯Ø§Ù… Ø³Øª Ú©Ø±Ø¯Ù† ØµÙ†Ù Ø³Ø±ÛŒØ¹ØªØ± ØµÙ†Ù Ø®ÙˆØ¯ Ø±Ø§ Ø§Ø² Ù„ÛŒØ³Øª Ø¬Ø³ØªØ¬Ùˆ Ùˆ Ù¾ÛŒØ¯Ø§ Ú©Ù†Ø¯
  buy_products  String[] // Ù…Ø­ØµÙˆÙ„Ø§ØªÛŒ Ú©Ù‡ Ù…Ø¹Ù…ÙˆÙ„Ø§ Ø§ÛŒÙ† ØµÙ†Ù Ù…ÛŒ Ø®Ø±Ø¯
  sell_products String[] // Ù…Ø­ØµÙˆÙ„Ø§ØªÛŒ Ú©Ù‡ Ù…Ø¹Ù…ÙˆÙ„Ø§ Ø§ÛŒÙ† ØµÙ†Ù Ù…ÛŒ ÙØ±ÙˆØ´Ù†Ø¯
  account_count Int      @default(0)

  // Ø§Ø±ØªØ¨Ø§Ø·Ø§Øª
  accounts Account[]
  Brand    Brand[]

  // Ø§ÛŒÙ†Ø¯Ú©Ø³â€ŒÙ‡Ø§
  @@index([parentId])
  @@index([name])
  @@index([business_number])
  @@index([industry_branch_id])
  @@index([level])
  @@map("industries")
}

// ==================== ENUMS ====================

model IndustryRelation {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at DateTime @default(now())

  // ØµÙ†Ù ÙØ±ÙˆØ´Ù†Ø¯Ù‡ (ØªØ£Ù…ÛŒÙ†â€ŒÚ©Ù†Ù†Ø¯Ù‡)
  supplier_industry_id String   @db.ObjectId
  supplier_industry    Industry @relation("SupplierRelations", fields: [supplier_industry_id], references: [id], onDelete: Cascade)

  // ØµÙ†Ù Ø®Ø±ÛŒØ¯Ø§Ø± (Ù…Ø´ØªØ±ÛŒ)
  customer_industry_id String   @db.ObjectId
  customer_industry    Industry @relation("CustomerRelations", fields: [customer_industry_id], references: [id], onDelete: Cascade)

  // Ù†ÙˆØ¹ Ùˆ Ù‚Ø¯Ø±Øª Ø§Ø±ØªØ¨Ø§Ø·
  relation_type String // "DIRECT_SUPPLY", "COMPLEMENTARY", "POTENTIAL"
  strength      Float  @default(1.0)

  @@unique([supplier_industry_id, customer_industry_id])
  @@index([supplier_industry_id])
  @@index([customer_industry_id])
  @@map("industry_relations")
}

model Account {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø§ÛŒÙ‡
  name String?

  // ğŸ”¥ ØµÙ†Ù Ú©Ø³Ø¨â€ŒÙˆÚ©Ø§Ø± - ÙÙ‚Ø· ÛŒÚ© Ø¨Ø§Ø± ØªØ¹Ø±ÛŒÙ Ø´ÙˆØ¯
  industryId         String?   @db.ObjectId
  industry           Industry? @relation(fields: [industryId], references: [id])
  main_industry_name String? // Ø§Ú¯Ø± ØµÙ†Ù Ø¯Ø± Ù„ÛŒØ³Øª Ù†Ø¨ÙˆØ¯

  // Ù†ÙˆØ¹ ÙØ¹Ø§Ù„ÛŒØª Ú©Ø³Ø¨â€ŒÙˆÚ©Ø§Ø±
  activity_type AccountActivityType? @default(PERSONAL)

  // ØªÚ¯â€ŒÙ‡Ø§ÛŒ ØªØ®ØµØµÛŒ
  business_tags String[] // ØªÚ¯â€ŒÙ‡Ø§ÛŒ Ú©Ø³Ø¨â€ŒÙˆÚ©Ø§Ø±

  // Ø¨Ù‚ÛŒÙ‡ ÙÛŒÙ„Ø¯Ù‡Ø§...
  description              String?
  profile_description      String? @map("profile_description")
  activity_domain          String?
  related_activity_history String?
  human_resource_count     String?

  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªÙ…Ø§Ø³ Ùˆ Ø¢Ø¯Ø±Ø³
  profile_photo String?
  public_phone  String?
  address       String?
  postal_code   String?
  shaba_code    String?

  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø­Ù‚ÙˆÙ‚ÛŒ
  is_company            Boolean @default(false)
  company_name          String?
  company_register_code String?

  // ÙˆØ¶Ø¹ÛŒØª
  confirmed          Boolean   @default(false)
  is_active          Boolean   @default(true)
  brands             Brand[]
  // Ø³ÛŒØ³ØªÙ… Ù†Ø´Ø§Ù†â€ŒÙ‡Ø§
  current_badge_type String?
  badge_expires_at   DateTime?

  // Ø¢Ù…Ø§Ø± Ø³Ø±ÛŒØ¹
  total_views Int @default(0)
  total_likes Int @default(0)
  total_saves Int @default(0)

  // Ø§Ø±ØªØ¨Ø§Ø·Ø§Øª
  account_users       AccountUser[]
  products            Product[]
  buy_ads             BuyAd[]
  reviews             Review[]
  comments            Comment[]
  interactions        Interaction[]
  files               File[]
  credit_transactions CreditTransaction[]
  credit_activities   CreditActivity[]
  orders              Order[]
  Offer               Offer[]
  CatalogProduct      Catalog[]

  // Ø§ÛŒÙ†Ø¯Ú©Ø³â€ŒÙ‡Ø§ÛŒ Ø­ÛŒØ§ØªÛŒ
  @@index([is_active, confirmed])
  @@index([activity_type, is_active])
  @@index([industryId, is_active]) // ğŸ”¥ Ø¬Ø¯ÛŒØ¯
  @@index([name])
  @@index([public_phone])
  @@index([created_at])
  @@index([current_badge_type])
  @@map("accounts")
}

model AccountUser {
  id           String      @id @default(auto()) @map("_id") @db.ObjectId
  created_at   DateTime    @default(now())
  account_role AccountRole @default(VIEWER)

  user_id    String @db.ObjectId
  account_id String @db.ObjectId

  user    User    @relation(fields: [user_id], references: [id], onDelete: Cascade)
  account Account @relation(fields: [account_id], references: [id], onDelete: Cascade)

  // ğŸ”¥ Ø±ÙˆØ§Ø¨Ø· Ø¬Ø¯ÛŒØ¯ Ù…ØªÙ…Ø±Ú©Ø²
  account_user_behavior   AccountUserBehavior?
  account_user_activities AccountUserActivity[]

  @@unique([user_id, account_id])
  @@index([user_id])
  @@index([account_id])
  @@map("account_users")
}

model Plan {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø§ÛŒÙ‡
  name        String
  level       Int     @unique // Ø³Ø·Ø­ Ù¾Ù„Ù† (1, 2, 3, ...)
  description String?

  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù‚ÛŒÙ…Øª Ùˆ Ø§Ø¹ØªØ¨Ø§Ø±
  price         Int // Ù‚ÛŒÙ…Øª Ø¨Ù‡ Ø±ÛŒØ§Ù„
  credit_amount Int // Ù…ÛŒØ²Ø§Ù† Ø§Ø¹ØªØ¨Ø§Ø± Ø§ØµÙ„ÛŒ
  bonus_credit  Int @default(0) // Ø§Ø¹ØªØ¨Ø§Ø± Ù‡Ø¯ÛŒÙ‡
  total_credit  Int // Ø§Ø¹ØªØ¨Ø§Ø± Ú©Ù„ (credit_amount + bonus_credit)

  // Ù…Ø¯Øª Ø²Ù…Ø§Ù†
  expiry_days Int // Ù…Ø¯Øª Ø§Ø¹ØªØ¨Ø§Ø± Ø¨Ù‡ Ø±ÙˆØ²

  // ÙˆØ¶Ø¹ÛŒØª
  status     PlanStatus @default(ACTIVE)
  is_popular Boolean    @default(false)

  // Ù…Ø²Ø§ÛŒØ§
  benefits String[] // Ù„ÛŒØ³Øª Ù…Ø²Ø§ÛŒØ§

  // Ø§Ø±ØªØ¨Ø§Ø·Ø§Øª
  user_plans UserPlan[]

  // Ø§ÛŒÙ†Ø¯Ú©Ø³â€ŒÙ‡Ø§ÛŒ Ø­ÛŒØ§ØªÛŒ
  @@index([status])
  @@index([price])
  @@index([is_popular])
  @@map("plans")
}

model UserPlan {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  // Ú©Ø§Ø±Ø¨Ø± Ùˆ Ù¾Ù„Ù†
  user_id String @db.ObjectId
  plan_id String @db.ObjectId
  user    User   @relation(fields: [user_id], references: [id], onDelete: Cascade)
  plan    Plan   @relation(fields: [plan_id], references: [id], onDelete: Cascade)

  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ
  start_date DateTime @default(now())
  end_date   DateTime // ØªØ§Ø±ÛŒØ® Ø§Ù†Ù‚Ø¶Ø§
  is_active  Boolean  @default(true)

  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø§Ø³ØªÙØ§Ø¯Ù‡
  initial_credit   Int // Ø§Ø¹ØªØ¨Ø§Ø± Ø§ÙˆÙ„ÛŒÙ‡
  remaining_credit Int // Ø§Ø¹ØªØ¨Ø§Ø± Ø¨Ø§Ù‚ÛŒÙ…Ø§Ù†Ø¯Ù‡
  used_credit      Int @default(0) // Ø§Ø¹ØªØ¨Ø§Ø± Ù…ØµØ±Ù Ø´Ø¯Ù‡

  // ØªØ±Ø§Ú©Ù†Ø´ Ù…Ø±ØªØ¨Ø·
  transaction_id String?      @db.ObjectId
  transaction    Transaction? @relation(fields: [transaction_id], references: [id])

  // Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ ÙØ¹Ø§Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø§Ø¹ØªØ¨Ø§Ø±ÛŒ
  credit_activities CreditActivity[]

  // Ù‡Ø± Ú©Ø§Ø±Ø¨Ø± ÙÙ‚Ø· ÛŒÚ© Ù¾Ù„Ù† ÙØ¹Ø§Ù„ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯
  @@unique([user_id, plan_id, is_active])
  // Ø§ÛŒÙ†Ø¯Ú©Ø³â€ŒÙ‡Ø§ÛŒ Ø­ÛŒØ§ØªÛŒ
  @@index([user_id, is_active])
  @@index([plan_id])
  @@index([end_date])
  @@index([is_active, end_date])
  @@map("user_plans")
}

enum SellUnit {
  // ÙˆØ§Ø­Ø¯Ù‡Ø§ÛŒ Ø´Ù…Ø§Ø±Ø´ÛŒ
  PIECE // Ø¹Ø¯Ø¯
  PACKAGE // Ø¨Ø³ØªÙ‡
  BOX // Ø¬Ø¹Ø¨Ù‡
  CARTON // Ú©Ø§Ø±ØªÙ†
  PALLET // Ù¾Ø§Ù„Øª
  PAIR // Ø¬ÙØª
  DOZEN // Ø¯Ø³Øª (Û±Û² ØªØ§ÛŒÛŒ)
  SET // Ø³Øª
  UNIT // Ø¯Ø³ØªÚ¯Ø§Ù‡

  // ÙˆØ§Ø­Ø¯Ù‡Ø§ÛŒ ÙˆØ²Ù†ÛŒ
  KILOGRAM // Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…
  GRAM // Ú¯Ø±Ù…
  TON // ØªÙ†
  MESGHAL // Ù…Ø«Ù‚Ø§Ù„

  // ÙˆØ§Ø­Ø¯Ù‡Ø§ÛŒ Ø­Ø¬Ù…ÛŒ
  LITER // Ù„ÛŒØªØ±
  MILLILITER // Ù…ÛŒÙ„ÛŒâ€ŒÙ„ÛŒØªØ±
  BARREL // Ø¨Ø´Ú©Ù‡

  // ÙˆØ§Ø­Ø¯Ù‡Ø§ÛŒ Ø·ÙˆÙ„ÛŒ
  METER // Ù…ØªØ±
  CENTIMETER // Ø³Ø§Ù†ØªÛŒÙ…ØªØ±
  SQUARE_METER // Ù…ØªØ± Ù…Ø±Ø¨Ø¹

  // ÙˆØ§Ø­Ø¯Ù‡Ø§ÛŒ ØµÙ†Ø¹ØªÛŒ
  ROLL // Ø±ÙˆÙ„
  SHEET // ÙˆØ±Ù‚
  COIL // Ø­Ù„Ù‚Ù‡/Ú©Ù„Ø§Ù

  // ÙˆØ§Ø­Ø¯Ù‡Ø§ÛŒ Ø¨Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ
  BAG // Ú©ÛŒØ³Ù‡
  BOTTLE // Ø¨Ø·Ø±ÛŒ
  CAN // Ù‚ÙˆØ·ÛŒ

  // ÙˆØ§Ø­Ø¯Ù‡Ø§ÛŒ Ø­Ù…Ù„
  CONTAINER // Ú©Ø§Ù†ØªÛŒÙ†Ø±
  TRUCK_LOAD // Ú©Ø§Ù…ÛŒÙˆÙ†
}

enum PaymentMethodType {
  CASH // Ù†Ù‚Ø¯ÛŒ
  BANK_TRANSFER // Ø§Ù†ØªÙ‚Ø§Ù„ Ø¨Ø§Ù†Ú©ÛŒ
  CHECK_3DAY // Ú†Ú© 3 Ø±ÙˆØ²Ù‡
  CHECK_7DAY // Ú†Ú© 7 Ø±ÙˆØ²Ù‡
  CHECK_15DAY // Ú†Ú© 15 Ø±ÙˆØ²Ù‡
  CHECK_30DAY // Ú†Ú© 30 Ø±ÙˆØ²Ù‡
  CHECK_60DAY // Ú†Ú© 60 Ø±ÙˆØ²Ù‡
  CREDIT_30D // Ø§Ø¹ØªØ¨Ø§Ø± 30 Ø±ÙˆØ²Ù‡
  CREDIT_60D // Ø§Ø¹ØªØ¨Ø§Ø± 60 Ø±ÙˆØ²Ù‡
  CREDIT_90D // Ø§Ø¹ØªØ¨Ø§Ø± 90 Ø±ÙˆØ²Ù‡
}

type PaymentSettlement {
  method     PaymentMethodType
  multiplier Float             @default(1.0)
  isActive   Boolean           @default(true)
}

// ==================== CATALOG ENUMS ====================

enum CatalogProductStatus {
  DRAFT
  PENDING_REVIEW
  APPROVED
  REJECTED
  ARCHIVED
}

enum ManufacturerType {
  DOMESTIC
  INTERNATIONAL
  LICENSED
}

enum BrandType {
  CORPORATE // Ø¨Ø±Ù†Ø¯Ù‡Ø§ÛŒ Ø¨Ø²Ø±Ú¯ Ø´Ø±Ú©ØªÛŒ
  REGIONAL // Ø¨Ø±Ù†Ø¯Ù‡Ø§ÛŒ Ù…Ù†Ø·Ù‚Ù‡â€ŒØ§ÛŒ
  ARTISAN // Ø¨Ø±Ù†Ø¯Ù‡Ø§ÛŒ ØµÙ†Ø¹ØªÚ¯Ø±ÛŒ/Ù…Ø­Ù„ÛŒ
  DIGITAL_BRAND // Ø¨Ø±Ù†Ø¯Ù‡Ø§ÛŒ Ø¯ÛŒØ¬ÛŒØªØ§Ù„ Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯Ù‡ ØªÙˆØ³Ø· Ù¾Ù„ØªÙØ±Ù…
  GENERIC // Ø¨Ø±Ù†Ø¯Ù‡Ø§ÛŒ Ø¹Ù…ÙˆÙ…ÛŒ
}

// ==================== CATALOG MODELS ====================

// ==================== CATALOG ENUMS ====================

enum CatalogStatus {
  DRAFT
  PENDING_REVIEW
  APPROVED
  REJECTED
  ARCHIVED
}

// ==================== CATALOG MODELS ====================

model Brand {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  name              String
  name_fa           String
  logo              String?
  description       String?
  brand_type        BrandType
  manufacturer_type ManufacturerType
  country           String?
  website           String?
  region            String?
  is_verified       Boolean          @default(false)
  is_system_brand   Boolean          @default(false)

  // Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ ØµÙ†Ù
  industry_id String?   @db.ObjectId
  industry    Industry? @relation(fields: [industry_id], references: [id])

  // Ù…Ø§Ù„Ú© Ø¨Ø±Ù†Ø¯
  account_id String?  @db.ObjectId
  account    Account? @relation(fields: [account_id], references: [id])

  // Ù…Ø­ØµÙˆÙ„Ø§Øª Ø§ÛŒÙ† Ø¨Ø±Ù†Ø¯ Ø¯Ø± Ú©Ø§ØªØ§Ù„ÙˆÚ¯
  catalogs Catalog[]

  // Ø¢Ù…Ø§Ø±
  products_count Int @default(0)

  @@index([name])
  @@index([name_fa])
  @@index([industry_id])
  @@index([account_id])
  @@index([brand_type])
  @@index([is_verified])
  @@map("brands")
}

// Ù…Ø¯Ù„ Unit Ø¨Ø±Ø§ÛŒ ÙˆØ§Ø­Ø¯Ù‡Ø§
model Unit {
  id     String  @id @default(auto()) @map("_id") @db.ObjectId
  key    String  @unique
  label  String
  symbol String
  rate   Float   @default(1)
  isBase Boolean @default(false)

  @@map("units")
}

model CategorySpec {
  id          String   @id @default(auto()) @map("_id") @db.ObjectId
  category_id String   @db.ObjectId
  category    Category @relation(fields: [category_id], references: [id], onDelete: Cascade)

  // ğŸ”¥ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Spec Ù…Ø³ØªÙ‚ÛŒÙ…Ø§Ù‹ Ø§ÛŒÙ†Ø¬Ø§ (Ø¨Ø¯ÙˆÙ† Ù…Ø¯Ù„ Spec Ø¬Ø¯Ø§Ú¯Ø§Ù†Ù‡)
  key      String
  label    String
  type     String // text, number, select, boolean
  value    String? // Ù…Ù‚Ø¯Ø§Ø± Ù¾ÛŒØ´â€ŒÙØ±Ø¶
  options  String[] // Ø¨Ø±Ø§ÛŒ type = "select"
  unitKeys String[] // ÙˆØ§Ø­Ø¯Ù‡Ø§ÛŒ Ù…Ø¬Ø§Ø²

  @@unique([category_id, key]) // Ù‡Ø± key Ø¯Ø± ÛŒÚ© Category ÛŒÚ©ØªØ§ Ø¨Ø§Ø´Ù‡
  @@index([category_id])
  @@map("category_specs")
}

// Ù…Ø¯Ù„ Unit (Ø¨Ø¯ÙˆÙ† ØªØºÛŒÛŒØ±)

model Category {
  id          String     @id @default(auto()) @map("_id") @db.ObjectId
  created_at  DateTime   @default(now())
  updated_at  DateTime   @updatedAt
  name        String
  description String?
  parent_id   String?    @db.ObjectId
  parent      Category?  @relation("CategoryChildren", fields: [parent_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  children    Category[] @relation("CategoryChildren")
  bId         Int        @unique
  metadata    Json?

  specs     CategorySpec[]
  sellUnits SellUnit[]

  // Ø±ÙˆØ§Ø¨Ø· Ù…Ø­ØµÙˆÙ„Ø§Øª
  main_category_products Product[] @relation("ProductCategory")
  sub_category_products  Product[] @relation("ProductSubCategory")
  catalogs               Catalog[]

  @@index([parent_id])
  @@map("categories")
}

model Catalog {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø§ÛŒÙ‡
  name         String
  name_fa      String
  description  String?
  model_number String?
  sku_pattern  String?

  // ÙˆØ¶Ø¹ÛŒØª
  status    CatalogStatus @default(DRAFT)
  is_public Boolean       @default(false)

  // Ø¨Ø±Ù†Ø¯ Ùˆ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ
  brand_id String @db.ObjectId
  brand    Brand  @relation(fields: [brand_id], references: [id], onDelete: Cascade)

  category_id String   @db.ObjectId
  category    Category @relation(fields: [category_id], references: [id], onDelete: Cascade)

  // ØªÙˆÙ„ÛŒØ¯ Ú©Ù†Ù†Ø¯Ù‡
  manufacturer_account_id String  @db.ObjectId
  manufacturer_account    Account @relation(fields: [manufacturer_account_id], references: [id], onDelete: Cascade)

  // ÙˆØ§Ø­Ø¯Ù‡Ø§ÛŒ Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯
  sell_unit   SellUnit
  spect_units Json

  // ØªØµØ§ÙˆÛŒØ± Ùˆ Ù…Ø³ØªÙ†Ø¯Ø§Øª
  images    String[]
  documents String[]
  video_url String?

  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù…Ø¯ÛŒØ±ÛŒØªÛŒ
  submitted_by     String?
  reviewed_by      String?
  reviewed_at      DateTime?
  rejection_reason String?

  // Ø¢Ù…Ø§Ø± Ø§Ø³ØªÙØ§Ø¯Ù‡
  usage_count Int @default(0)

  // Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ù…Ø­ØµÙˆÙ„Ø§Øª Ø³Ø§ÛŒØª Ø§ØµÙ„ÛŒ
  used_in_products Product[]

  // ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯ Ù‚Ø§Ø¨Ù„ ÙÛŒÙ„ØªØ±
  specs CatalogSpec[]

  // âŒ Ø­Ø°Ù Ø±Ø§Ø¨Ø·Ù‡ Ù…Ø³ØªÙ‚ÛŒÙ… Ø¨Ø§ Spec - Ø§Ø² Json Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯ Ø§Ú¯Ø± Ù†ÛŒØ§Ø² Ù‡Ø³Øª
  special_specs Json // ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø®Ø§Øµ (Ø§Ø®ØªØµØ§ØµÛŒ Ø§ÛŒÙ† Ù…Ø­ØµÙˆÙ„ ÙÙ‚Ø· Ù†Ù…Ø§ÛŒØ´ÛŒ)

  @@index([brand_id])
  @@index([category_id])
  @@index([manufacturer_account_id])
  @@index([status])
  @@index([is_public])
  @@index([name])
  @@index([name_fa])
  @@index([model_number])
  @@map("catalogs")
}

model CatalogSpec {
  id         String  @id @default(auto()) @map("_id") @db.ObjectId
  catalog_id String  @db.ObjectId
  catalog    Catalog @relation(fields: [catalog_id], references: [id], onDelete: Cascade)

  key       String // "screen_size"
  label     String // "Ø§Ù†Ø¯Ø§Ø²Ù‡ ØµÙØ­Ù‡ Ù†Ù…Ø§ÛŒØ´"
  value     String // "6.5 Ø§ÛŒÙ†Ú†"
  spec_type String // "GENERAL", "TECHNICAL"

  @@index([catalog_id])
  @@index([key, value])
  @@map("catalog_specs")
}

model Product {
  id           String    @id @default(auto()) @map("_id") @db.ObjectId
  created_at   DateTime  @default(now())
  updated_at   DateTime  @updatedAt
  p_created_at DateTime? @map("p_created_at")
  name String
  stock        Int       @default(0)

  // ğŸ”¥ Ù‚ÛŒÙ…Øªâ€ŒÙ‡Ø§ÛŒ Ù¾Ø§ÛŒÙ‡ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø´Ø¯Ù‡ Ø§Ø² Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒâ€ŒÙ‡Ø§
  base_min_price       Int? // Ú©Ù…ØªØ±ÛŒÙ† Ù‚ÛŒÙ…Øª Ù¾Ø§ÛŒÙ‡
  base_max_price       Int? // Ø¨ÛŒØ´ØªØ±ÛŒÙ† Ù‚ÛŒÙ…Øª Ù¾Ø§ÛŒÙ‡
  calculated_min_price Int? // Ú©Ù…ØªØ±ÛŒÙ† Ù‚ÛŒÙ…Øª Ø¨Ø§ Ø§Ø­ØªØ³Ø§Ø¨ Ø´Ø±Ø§ÛŒØ·
  calculated_max_price Int? // Ø¨ÛŒØ´ØªØ±ÛŒÙ† Ù‚ÛŒÙ…Øª Ø¨Ø§ Ø§Ø­ØªØ³Ø§Ø¨ Ø´Ø±Ø§ÛŒØ·

  min_sale_amount Int
  description     String?
  address         String?

  // ğŸ”¥ ÙˆØ§Ø­Ø¯ Ù…Ø­ØµÙˆÙ„
  unit SellUnit

  is_rejected       Boolean       @default(false)
  has_video         Boolean       @default(false)
  is_old            Boolean       @default(false)
  confirmed         Boolean       @default(false)
  status            ProductStatus @default(APPROVED)
  last_price_update DateTime?     @map("last_price_update")

  total_views Int @default(0)
  total_likes Int @default(0)
  total_saves Int @default(0)

  province_name String?
  province_id   Int?
  city_name     String?
  city_id       Int?

  boost_power       Int       @default(0)
  boost_expires_at  DateTime?
  boost_purchased   Boolean   @default(false)
  boost_is_elevated Boolean   @default(false)

  // Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ
  category_id         String? @db.ObjectId
  category_name       String?
  sub_category_id     String? @db.ObjectId
  sub_category_name   String?
  super_category_name String?

  brand_name               String
  is_brands_representative Boolean @default(false)

  account_id String  @db.ObjectId
  account    Account @relation(fields: [account_id], references: [id], onDelete: Cascade)
  user_id    String  @db.ObjectId
  user       User    @relation(fields: [user_id], references: [id], onDelete: Cascade)

  // ğŸ”¥ ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ø³ÛŒØ³ØªÙ… Ù‚ÛŒÙ…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡
  has_any_discount      Boolean @default(false)
  best_discount_percent Float? // Ø¨Ù‡ØªØ±ÛŒÙ† Ø¯Ø±ØµØ¯ ØªØ®ÙÛŒÙ Ù…ÙˆØ¬ÙˆØ¯

  // ğŸ”¥ Ø®Ù„Ø§ØµÙ‡ Ø´Ø±Ø§ÛŒØ· Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø±Ø§ÛŒ ÙÛŒÙ„ØªØ± Ø³Ø±ÛŒØ¹
  available_conditions PricingConditionType[]
  available_categories PricingConditionCategory[]

  // Ø§Ø±ØªØ¨Ø§Ø·Ø§Øª
  files                   File[]
  reviews                 Review[]
  comments                Comment[]
  interactions            Interaction[]
  credit_transactions     CreditTransaction[]
  credit_activities       CreditActivity[]
  order_items             OrderItem[]
  account_user_activities AccountUserActivity[]

  // ğŸ”¥ Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒâ€ŒÙ‡Ø§ÛŒ Ù‚ÛŒÙ…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ Ø¬Ø¯ÛŒØ¯
  pricing_strategies ProductPrice[]

  category     Category? @relation("ProductCategory", fields: [category_id], references: [id])
  sub_category Category? @relation("ProductSubCategory", fields: [sub_category_id], references: [id])

  // Ø§Ø±ØªØ¨Ø§Ø· Ø§Ø®ØªÛŒØ§Ø±ÛŒ Ø¨Ø§ Ú©Ø§ØªØ§Ù„ÙˆÚ¯
  catalog_id          String?  @db.ObjectId
  catalog             Catalog? @relation(fields: [catalog_id], references: [id])
  is_based_on_catalog Boolean  @default(false)

  @@index([catalog_id])
  @@index([account_id])
  @@index([user_id])
  @@index([category_id])
  @@index([sub_category_id])
  @@index([category_id, sub_category_id])
  @@index([boost_is_elevated, confirmed])
  @@index([base_min_price])
  @@index([calculated_min_price])
  @@index([created_at])
  @@index([province_id, city_id])
  @@index([total_views])
  @@index([total_likes])
  // ğŸ”¥ Ø§ÛŒÙ†Ø¯Ú©Ø³â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø¨Ù‡ØªØ±
  @@index([unit])
  @@index([calculated_min_price, has_any_discount])
  @@index([category_id, calculated_min_price])
  @@index([best_discount_percent])
  @@index([available_conditions]) // Ø¨Ø±Ø§ÛŒ ÙÛŒÙ„ØªØ± Ø´Ø±Ø§ÛŒØ· Ø®Ø§Øµ
  @@map("products")
}

// ==================== Ù‚ÛŒÙ…Øª Ú¯Ø°Ø§Ø±ÛŒ Ùˆ Ø±ÙˆØ´Ù‡Ø§ ====================
enum ProductPriceType {
  FIXED // Ù‚ÛŒÙ…Øª Ø«Ø§Ø¨Øª - ÛŒÚ© Ù‚ÛŒÙ…Øª Ø¨Ø±Ø§ÛŒ Ù‡Ù…Ù‡
  TIERED // Ù‚ÛŒÙ…Øª Ù¾Ù„Ú©Ø§Ù†ÛŒ - Ú©Ø§Ù‡Ø´ Ù‚ÛŒÙ…Øª Ø¨Ø§ Ø§ÙØ²Ø§ÛŒØ´ ØªØ¹Ø¯Ø§Ø¯
  VOLUME_DISCOUNT // ØªØ®ÙÛŒÙ Ø­Ø¬Ù…ÛŒ - ØªØ®ÙÛŒÙ Ø¯Ø±ØµØ¯ÛŒ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø­Ø¬Ù…
  NEGOTIABLE // Ù‚ÛŒÙ…Øª Ù‚Ø§Ø¨Ù„ Ù…Ø°Ø§Ú©Ø±Ù‡ - Ú†Ø§Ù†Ù‡â€ŒØ²Ù†ÛŒ
  AUCTION // Ù…Ø²Ø§ÛŒØ¯Ù‡ - Ù‚ÛŒÙ…Øª Ø±Ù‚Ø§Ø¨ØªÛŒ
  BUNDLE // Ù‚ÛŒÙ…Øª Ø¨Ø³ØªÙ‡â€ŒØ§ÛŒ - Ø®Ø±ÛŒØ¯ Ù¾Ú©ÛŒØ¬
}

enum PricingConditionCategory {
  PAYMENT_SETTLEMENT // Ù†Ø­ÙˆÙ‡ ØªØ³ÙˆÛŒÙ‡
  DELIVERY_METHOD // Ø±ÙˆØ´ Ø­Ù…Ù„
  CUSTOMER_TYPE // Ù†ÙˆØ¹ Ù…Ø´ØªØ±ÛŒ
  TIME_CONDITION // Ø´Ø±Ø§ÛŒØ· Ø²Ù…Ø§Ù†ÛŒ
  ORDER_CONDITION // Ø´Ø±Ø§ÛŒØ· Ø³ÙØ§Ø±Ø´
  LOCATION_CONDITION // Ø´Ø±Ø§ÛŒØ· Ù…Ú©Ø§Ù†ÛŒ
  SPECIAL_OFFER // Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯Ø§Øª ÙˆÛŒÚ˜Ù‡
}

enum PricingConditionType {
  // ğŸ”¥ Ø¯Ø³ØªÙ‡: Ù†Ø­ÙˆÙ‡ ØªØ³ÙˆÛŒÙ‡
  CASH_PAYMENT // Ù¾Ø±Ø¯Ø§Ø®Øª Ù†Ù‚Ø¯ÛŒ
  CHECK_3DAY // Ú†Ú© 3 Ø±ÙˆØ²Ù‡
  CHECK_7DAY // Ú†Ú© 7 Ø±ÙˆØ²Ù‡
  CHECK_15DAY // Ú†Ú© 15 Ø±ÙˆØ²Ù‡
  CHECK_30DAY // Ú†Ú© 30 Ø±ÙˆØ²Ù‡
  CHECK_60DAY // Ú†Ú© 60 Ø±ÙˆØ²Ù‡
  CREDIT_30D // Ø§Ø¹ØªØ¨Ø§Ø± 30 Ø±ÙˆØ²Ù‡
  CREDIT_60D // Ø§Ø¹ØªØ¨Ø§Ø± 60 Ø±ÙˆØ²Ù‡
  CREDIT_90D // Ø§Ø¹ØªØ¨Ø§Ø± 90 Ø±ÙˆØ²Ù‡
  ONLINE_PAYMENT // Ù¾Ø±Ø¯Ø§Ø®Øª Ø¢Ù†Ù„Ø§ÛŒÙ†

  // ğŸ”¥ Ø¯Ø³ØªÙ‡: Ø±ÙˆØ´ Ø­Ù…Ù„
  EXPRESS_DELIVERY // Ù¾ÛŒÚ© Ø³Ø±ÛŒØ¹
  STANDARD_DELIVERY // Ù¾ÛŒÚ© Ø¹Ø§Ø¯ÛŒ
  CUSTOMER_PICKUP // ØªØ­ÙˆÛŒÙ„ Ø¯Ø±Ø¨ Ù…ØºØ§Ø²Ù‡
  FREE_DELIVERY // Ø­Ù…Ù„ Ø±Ø§ÛŒÚ¯Ø§Ù†
  INTERNATIONAL_SHIPPING // Ø­Ù…Ù„ Ø¨ÛŒÙ†â€ŒØ§Ù„Ù…Ù„Ù„ÛŒ

  // ğŸ”¥ Ø¯Ø³ØªÙ‡: Ù†ÙˆØ¹ Ù…Ø´ØªØ±ÛŒ
  CORPORATE_CUSTOMER // Ù…Ø´ØªØ±ÛŒ Ø´Ø±Ú©ØªÛŒ
  LOYAL_CUSTOMER // Ù…Ø´ØªØ±ÛŒ ÙˆÙØ§Ø¯Ø§Ø±
  NEW_CUSTOMER // Ù…Ø´ØªØ±ÛŒ Ø¬Ø¯ÛŒØ¯
  FIRST_ORDER // Ø§ÙˆÙ„ÛŒÙ† Ø®Ø±ÛŒØ¯
  WHOLESALER // Ø¹Ù…Ø¯Ù‡â€ŒÙØ±ÙˆØ´
  RETAILER // Ø®Ø±Ø¯Ù‡â€ŒÙØ±ÙˆØ´

  // ğŸ”¥ Ø¯Ø³ØªÙ‡: Ø´Ø±Ø§ÛŒØ· Ø²Ù…Ø§Ù†ÛŒ
  SEASONAL_DISCOUNT // ØªØ®ÙÛŒÙ ÙØµÙ„ÛŒ
  HOLIDAY_DISCOUNT // ØªØ®ÙÛŒÙ ØªØ¹Ø·ÛŒÙ„Ø§Øª
  FLASH_SALE // ÙØ±ÙˆØ´ ÙÙ„Ø´
  WEEKEND_DISCOUNT // ØªØ®ÙÛŒÙ Ø¢Ø®Ø± Ù‡ÙØªÙ‡
  NIGHT_ORDER // Ø³ÙØ§Ø±Ø´ Ø´Ø¨Ø§Ù†Ù‡

  // ğŸ”¥ Ø¯Ø³ØªÙ‡: Ø´Ø±Ø§ÛŒØ· Ø³ÙØ§Ø±Ø´
  BULK_ORDER // Ø³ÙØ§Ø±Ø´ Ø¹Ù…Ø¯Ù‡
  PRE_ORDER // Ù¾ÛŒØ´â€ŒØ®Ø±ÛŒØ¯
  SUBSCRIPTION // Ø®Ø±ÛŒØ¯ Ø§Ø´ØªØ±Ø§Ú©ÛŒ
  BUNDLE_ORDER // Ø®Ø±ÛŒØ¯ Ø¨Ø³ØªÙ‡â€ŒØ§ÛŒ

  // ğŸ”¥ Ø¯Ø³ØªÙ‡: Ø´Ø±Ø§ÛŒØ· Ù…Ú©Ø§Ù†ÛŒ
  SAME_CITY // Ù‡Ù…â€ŒØ´Ù‡Ø±ÛŒ
  SAME_PROVINCE // Ù‡Ù…â€ŒØ§Ø³ØªØ§Ù†ÛŒ
  CAPITAL_CITY // Ø´Ù‡Ø±Ø³ØªØ§Ù† Ù¾Ø§ÛŒØªØ®Øª
  REMOTE_AREA // Ù…Ù†Ø§Ø·Ù‚ Ø¯ÙˆØ±Ø§ÙØªØ§Ø¯Ù‡
}

model ProductPrice {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at DateTime @default(now()) // Ø²Ù…Ø§Ù† Ø§ÛŒØ¬Ø§Ø¯
  updated_at DateTime @updatedAt // Ø²Ù…Ø§Ù† Ø¢Ø®Ø±ÛŒÙ† Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ

  product_id String  @db.ObjectId // Ø¢ÛŒØ¯ÛŒ Ù…Ø­ØµÙˆÙ„ Ù…Ø±ØªØ¨Ø·
  product    Product @relation(fields: [product_id], references: [id], onDelete: Cascade)

  condition_category PricingConditionCategory? // Ø¯Ø³ØªÙ‡ Ø´Ø±Ø· Ø§Ø¹Ù…Ø§Ù„
  condition_type     PricingConditionType? // Ù†ÙˆØ¹ Ø´Ø±Ø· Ø§Ø¹Ù…Ø§Ù„

  // ğŸ”¥ ÙˆØ§Ø­Ø¯ Ø§ÛŒÙ† Ù‚ÛŒÙ…Øª
  price_unit SellUnit // ÙˆØ§Ø­Ø¯ Ù‚ÛŒÙ…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ

  // ğŸ”¥ Ø¶Ø±ÛŒØ¨ ØªØ¨Ø¯ÛŒÙ„ Ù†Ø³Ø¨Øª Ø¨Ù‡ ÙˆØ§Ø­Ø¯ Ø§ØµÙ„ÛŒ Ù…Ø­ØµÙˆÙ„
  conversion_rate Float @default(1.0) // Ø¶Ø±ÛŒØ¨ ØªØ¨Ø¯ÛŒÙ„ Ø¨Ù‡ ÙˆØ§Ø­Ø¯ Ø§ØµÙ„ÛŒ

  // ğŸ”¥ Ù‚ÛŒÙ…Øª Ù¾Ø§ÛŒÙ‡ Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† ÙˆØ§Ø­Ø¯ (Ù‚Ø§Ø¨Ù„ ÙˆÛŒØ±Ø§ÛŒØ´ ØªÙˆØ³Ø· Ú©Ø§Ø±Ø¨Ø±)
  base_price_amount Int? // Ù‚ÛŒÙ…Øª Ù¾Ø§ÛŒÙ‡ Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† ÙˆØ§Ø­Ø¯

  // ğŸ”¥ Ø¯Ø±ØµØ¯ ØªØºÛŒÛŒØ± Ù†Ø³Ø¨Øª Ø¨Ù‡ Ù‚ÛŒÙ…Øª Ù¾Ø§ÛŒÙ‡ (Ù‚Ø§Ø¨Ù„ ÙˆÛŒØ±Ø§ÛŒØ´)
  custom_adjustment_percent Float? // Ø¯Ø±ØµØ¯ ØªØºÛŒÛŒØ± Ø¯Ø³ØªÛŒ

  // ğŸ”¥ Ù‚ÛŒÙ…Øª Ù†Ù‡Ø§ÛŒÛŒ (Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø´Ø¯Ù‡ Ø§Ø² base_price_amount Ùˆ custom_adjustment_percent)
  final_price_amount Int? // Ù‚ÛŒÙ…Øª Ù†Ù‡Ø§ÛŒÛŒ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø´Ø¯Ù‡

  condition_config Json? // ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø§Ø®ØªØµØ§ØµÛŒ Ø´Ø±Ø·

  is_active  Boolean @default(true) // ÙØ¹Ø§Ù„/ØºÛŒØ±ÙØ¹Ø§Ù„
  is_primary Boolean @default(false) // Ù‚ÛŒÙ…Øª Ø§ØµÙ„ÛŒ Ù…Ø­ØµÙˆÙ„

  // Ø¨Ø±Ø§ÛŒ ÙÛŒÙ„ØªØ± Ø³Ø±ÛŒØ¹
  min_effective_price Int? // Ú©Ù…ØªØ±ÛŒÙ† Ù‚ÛŒÙ…Øª Ù…Ø¤Ø«Ø±
  max_effective_price Int? // Ø¨ÛŒØ´ØªØ±ÛŒÙ† Ù‚ÛŒÙ…Øª Ù…Ø¤Ø«Ø±
  has_discount        Boolean @default(false) // Ø¢ÛŒØ§ ØªØ®ÙÛŒÙ Ø¯Ø§Ø±Ø¯

  @@index([product_id, is_primary])
  @@index([condition_category, condition_type])
  @@index([price_unit])
  @@index([final_price_amount])
  @@map("product_prices")
}

// âœ… Ø¯Ø± Ù…Ø¯Ù„ BuyAd Ø§Ø² Json Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†:
model BuyAd {
  id                 String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at         DateTime @default(now())
  name               String?
  requirement_amount Int
  register_date      DateTime @map("register_date")

  // Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ
  category_id      Int?
  category_name    String?
  subcategory_name String?
  unit             String

  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø±
  first_name  String?
  last_name   String?
  is_verified Boolean       @default(false)
  status      ProductStatus @default(APPROVED)

  // ğŸ”¥ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯Ø§Øª Ø¨Ù‡ ØµÙˆØ±Øª Json
  offer_settings    Json?
  total_offers      Int              @default(0)
  last_offer_at     DateTime?
  // Ø§Ø±ØªØ¨Ø§Ø·Ø§Øª
  account_id        String           @db.ObjectId
  account           Account          @relation(fields: [account_id], references: [id], onDelete: Cascade)
  user_id           String           @db.ObjectId
  user              User             @relation(fields: [user_id], references: [id], onDelete: Cascade)
  credit_activities CreditActivity[]
  Conversation      Conversation[]
  offers            Offer[] // ğŸ”¥ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯
  // ğŸ”¥ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯Ù† ÙÛŒÙ„Ø¯ conditions Ø¨Ø±Ø§ÛŒ Ø´Ø±Ø·â€ŒÙ‡Ø§ÛŒ Ø§Ø¹Ù…Ø§Ù„ Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒ
  conditions        Json?

  // Ø§ÛŒÙ†Ø¯Ú©Ø³â€ŒÙ‡Ø§ÛŒ Ø­ÛŒØ§ØªÛŒ
  @@index([account_id])
  @@index([user_id])
  @@index([category_id])
  @@index([created_at])
  @@map("buy_ads")
}

// ğŸ”¥ enum ÙˆØ¶Ø¹ÛŒØª Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯Ø§Øª
enum OfferStatus {
  PENDING // Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± Ø¨Ø±Ø±Ø³ÛŒ
  ACCEPTED // Ù¾Ø°ÛŒØ±ÙØªÙ‡ Ø´Ø¯Ù‡
  REJECTED // Ø±Ø¯ Ø´Ø¯Ù‡
  COUNTERED // Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù…ØªÙ‚Ø§Ø¨Ù„
  EXPIRED // Ù…Ù†Ù‚Ø¶ÛŒ Ø´Ø¯Ù‡
  WITHDRAWN // æ’¤å› Ø´Ø¯Ù‡
}

// ğŸ”¥ Ù…Ø¯Ù„ Offer Ø±Ùˆ Ù‡Ù… Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†
model Offer {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  // Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ø¯Ù‡Ù†Ø¯Ù‡
  seller_id  String  @db.ObjectId
  seller     User    @relation(fields: [seller_id], references: [id], onDelete: Cascade)
  account_id String  @db.ObjectId
  account    Account @relation(fields: [account_id], references: [id], onDelete: Cascade)

  // Ø¨Ø±Ø§ÛŒ Ú©Ø¯Ø§Ù… Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø®Ø±ÛŒØ¯
  buy_ad_id String @db.ObjectId
  buy_ad    BuyAd  @relation(fields: [buy_ad_id], references: [id], onDelete: Cascade)

  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯
  proposed_price  Int
  proposed_amount Int
  unit            String
  delivery_time   Int // Ù…Ø¯Øª ØªØ­ÙˆÛŒÙ„ Ø¨Ù‡ Ø±ÙˆØ²
  description     String?

  // ÙˆØ¶Ø¹ÛŒØª Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯
  status OfferStatus @default(PENDING)

  // Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ù…Ú©Ø§Ù„Ù…Ø§Øª
  conversation_id String?       @db.ObjectId
  conversation    Conversation? @relation(fields: [conversation_id], references: [id])

  // Ø¨Ø±Ø§ÛŒ Ø³ÛŒØ³ØªÙ…â€ŒÙ‡Ø§ÛŒ ØªØ®ØµØµÛŒ Ø¢ÛŒÙ†Ø¯Ù‡
  metadata Json?

  @@index([buy_ad_id, status])
  @@index([seller_id, created_at])
  @@index([status, created_at])
  @@map("offers")
}

model Review {
  id            String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at    DateTime @default(now())
  rating_score  Int      @default(5)
  comment       String?
  confirmed     Boolean  @default(false)
  likes         Int      @default(0)
  already_liked Boolean  @default(false)

  // Ú©Ø§Ø±Ø¨Ø± Ù†Ø¸Ø± Ø¯Ù‡Ù†Ø¯Ù‡
  user_id    String  @db.ObjectId
  first_name String?
  last_name  String?
  city       String?
  province   String?

  // Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ù…Ø­ØµÙˆÙ„ ÛŒØ§ Ø§Ú©Ø§Ù†Øª
  product_id String?  @db.ObjectId
  product    Product? @relation(fields: [product_id], references: [id], onDelete: Cascade)
  account_id String?  @db.ObjectId
  account    Account? @relation(fields: [account_id], references: [id], onDelete: Cascade)
  user       User     @relation(fields: [user_id], references: [id], onDelete: Cascade)

  // Ù‡Ø± Ú©Ø§Ø±Ø¨Ø± ÙÙ‚Ø· ÛŒÚ© Ù†Ø¸Ø± Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ù…Ø­ØµÙˆÙ„/Ø§Ú©Ø§Ù†Øª
  @@unique([user_id, product_id])
  @@unique([user_id, account_id])
  // Ø§ÛŒÙ†Ø¯Ú©Ø³â€ŒÙ‡Ø§ÛŒ Ø­ÛŒØ§ØªÛŒ
  @@index([product_id, created_at])
  @@index([account_id, created_at])
  @@index([user_id, created_at])
  @@index([rating_score])
  @@index([confirmed])
  @@map("reviews")
}

model Comment {
  id            String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at    DateTime @default(now())
  content       String
  confirmed     Boolean  @default(true)
  likes         Int      @default(0)
  already_liked Boolean  @default(false)

  // Ú©Ø§Ø±Ø¨Ø± Ú©Ø§Ù…Ù†Øª Ø¯Ù‡Ù†Ø¯Ù‡
  user_id    String  @db.ObjectId
  first_name String?
  last_name  String?
  city       String?
  province   String?

  // Ø³ÛŒØ³ØªÙ… Ù¾Ø§Ø³Ø®Ú¯ÙˆÛŒÛŒ
  parent_id String?   @db.ObjectId
  parent    Comment?  @relation("CommentReplies", fields: [parent_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  replies   Comment[] @relation("CommentReplies")

  // Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ù…Ø­ØµÙˆÙ„ ÛŒØ§ Ø§Ú©Ø§Ù†Øª
  product_id String?  @db.ObjectId
  product    Product? @relation(fields: [product_id], references: [id], onDelete: Cascade)
  account_id String?  @db.ObjectId
  account    Account? @relation(fields: [account_id], references: [id], onDelete: Cascade)
  user       User     @relation(fields: [user_id], references: [id], onDelete: Cascade)

  // Ø§ÛŒÙ†Ø¯Ú©Ø³â€ŒÙ‡Ø§ÛŒ Ø­ÛŒØ§ØªÛŒ
  @@index([product_id, created_at])
  @@index([account_id, created_at])
  @@index([user_id, created_at])
  @@index([parent_id])
  @@index([confirmed])
  @@map("comments")
}

model Interaction {
  id         String          @id @default(auto()) @map("_id") @db.ObjectId
  created_at DateTime        @default(now())
  type       InteractionType

  // Ú©Ø§Ø±Ø¨Ø± Ø§Ù†Ø¬Ø§Ù… Ø¯Ù‡Ù†Ø¯Ù‡
  user_id String @db.ObjectId
  user    User   @relation(fields: [user_id], references: [id], onDelete: Cascade)

  // Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ù…Ø­ØµÙˆÙ„ ÛŒØ§ Ø§Ú©Ø§Ù†Øª
  product_id String?  @db.ObjectId
  product    Product? @relation(fields: [product_id], references: [id], onDelete: Cascade)
  account_id String?  @db.ObjectId
  account    Account? @relation(fields: [account_id], references: [id], onDelete: Cascade)

  // Ù‡Ø± Ú©Ø§Ø±Ø¨Ø± ÙÙ‚Ø· ÛŒÚ© Ø¨Ø§Ø± Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ù„Ø§ÛŒÚ©/Ø°Ø®ÛŒØ±Ù‡ Ú©Ù†Ø¯ (ÙˆÛŒÙˆ Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ù†Ø¯Ø§Ø±Ø¯)
  @@unique([user_id, product_id, type])
  @@unique([user_id, account_id, type])
  // Ø§ÛŒÙ†Ø¯Ú©Ø³â€ŒÙ‡Ø§ÛŒ Ø­ÛŒØ§ØªÛŒ
  @@index([product_id, type, created_at])
  @@index([account_id, type, created_at])
  @@index([user_id, type])
  @@index([type, created_at])
  @@map("interactions")
}

model File {
  id             String    @id @default(auto()) @map("_id") @db.ObjectId
  created_at     DateTime  @default(now())
  file_path      String
  thumbnail_path String?   @map("thumbnail_path")
  status         String?   @default("2")
  mime           Int?
  upload_date    DateTime? @map("upload_date")
  file_usage     FileUsage
  description    String?

  // Ø§Ø±ØªØ¨Ø§Ø·Ø§Øª
  product_id String?  @db.ObjectId
  product    Product? @relation(fields: [product_id], references: [id], onDelete: Cascade)
  account_id String?  @db.ObjectId
  account    Account? @relation(fields: [account_id], references: [id], onDelete: Cascade)
  user_id    String?  @db.ObjectId
  user       User?    @relation(fields: [user_id], references: [id], onDelete: Cascade)

  // Ø§ÛŒÙ†Ø¯Ú©Ø³â€ŒÙ‡Ø§ÛŒ Ø­ÛŒØ§ØªÛŒ
  @@index([product_id])
  @@index([account_id])
  @@index([user_id])
  @@index([file_usage])
  @@index([created_at])
  @@map("files")
}

model Conversation {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  // Ø¯Ùˆ Ø·Ø±Ù Ú¯ÙØªÚ¯Ùˆ
  user1_id String @db.ObjectId
  user2_id String @db.ObjectId
  user1    User   @relation("ConversationUser1", fields: [user1_id], references: [id])
  user2    User   @relation("ConversationUser2", fields: [user2_id], references: [id])

  // Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§
  messages Message[]

  // Ø¢Ø®Ø±ÛŒÙ† Ù¾ÛŒØ§Ù… Ø¨Ø±Ø§ÛŒ performance
  last_message_text String?
  last_message_time DateTime?

  // ÙˆØ¶Ø¹ÛŒØª Ø®ÙˆØ§Ù†Ø¯Ù†
  user1_last_read_at DateTime?
  user2_last_read_at DateTime?

  buy_ad_id String? @db.ObjectId
  buyAd     BuyAd?  @relation(fields: [buy_ad_id], references: [id])
  Offer     Offer[]

  @@unique([user1_id, user2_id])
  @@index([user1_id, updated_at])
  @@index([user2_id, updated_at])
  @@index([updated_at])
  @@map("conversations")
}

model Message {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at DateTime @default(now())
  content    String
  is_read    Boolean  @default(false)

  // ÙØ±Ø³ØªÙ†Ø¯Ù‡
  sender_id String @db.ObjectId
  sender    User   @relation("SentMessages", fields: [sender_id], references: [id], onDelete: Cascade)

  // Ú¯ÙØªÚ¯ÙˆÛŒ Ù…Ø±ØªØ¨Ø·
  conversation_id String       @db.ObjectId
  conversation    Conversation @relation(fields: [conversation_id], references: [id], onDelete: Cascade)

  @@index([conversation_id, created_at])
  @@index([sender_id, created_at])
  @@index([is_read])
  @@map("messages")
}

model Order {
  id           String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at   DateTime @default(now())
  updated_at   DateTime @updatedAt
  order_number String   @unique

  // Ù†ÙˆØ¹ Ø³ÙØ§Ø±Ø´
  order_type OrderType
  status     OrderStatus @default(PENDING)

  // Ú©Ø§Ø±Ø¨Ø± Ù…Ø±ØªØ¨Ø·
  user_id String @db.ObjectId
  user    User   @relation(fields: [user_id], references: [id], onDelete: Cascade)

  // ÙØ±ÙˆØ´Ù†Ø¯Ù‡ (Ø¨Ø±Ø§ÛŒ Ø³ÙØ§Ø±Ø´Ø§Øª Ø®Ø±ÛŒØ¯ Ø§Ø² Ø¯ÛŒÚ¯Ø±Ø§Ù†)
  seller_id String? @db.ObjectId
  seller    User?   @relation("OrderSeller", fields: [seller_id], references: [id])

  // Ø§Ú©Ø§Ù†Øª Ù…Ø±ØªØ¨Ø·
  account_id String?  @db.ObjectId
  account    Account? @relation(fields: [account_id], references: [id], onDelete: Cascade)

  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù…Ø§Ù„ÛŒ
  total_amount    Int
  tax_amount      Int @default(0)
  discount_amount Int @default(0)
  net_amount      Int

  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø±Ø¯Ø§Ø®Øª
  payment_method PaymentMethod?
  paid_at        DateTime?

  // Ù…Ù‡Ù„Øª Ù¾Ø±Ø¯Ø§Ø®Øª
  expires_at DateTime?

  // Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ Ø³ÙØ§Ø±Ø´
  items OrderItem[]

  // ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§ÛŒ Ù¾Ø±Ø¯Ø§Ø®Øª
  transactions Transaction[]

  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø§Ø¶Ø§ÙÛŒ Ø¨Ø± Ø§Ø³Ø§Ø³ Ù†ÙˆØ¹ Ø³ÙØ§Ø±Ø´
  metadata Json?

  // ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ ØªØ³ÙˆÛŒÙ‡
  settled_at           DateTime?
  settlement_reference String?

  // Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ ÙØ¹Ø§Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø§Ø¹ØªØ¨Ø§Ø±ÛŒ
  credit_activities CreditActivity[]

  @@index([user_id, created_at])
  @@index([seller_id, created_at])
  @@index([order_type, status])
  @@index([status, created_at])
  @@map("orders")
}

model OrderItem {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at DateTime @default(now())
  order_id   String   @db.ObjectId
  order      Order    @relation(fields: [order_id], references: [id], onDelete: Cascade)

  // Ù†ÙˆØ¹ Ø¢ÛŒØªÙ…
  item_type  String
  item_id    String? @db.ObjectId
  item_title String

  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù‚ÛŒÙ…Øª Ùˆ Ù…Ù‚Ø¯Ø§Ø±
  quantity    Int @default(1)
  unit_price  Int
  total_price Int

  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø§Ø¶Ø§ÙÛŒ
  description String?

  // Ø¨Ø±Ø§ÛŒ Ù…Ø­ØµÙˆÙ„Ø§Øª ÙÛŒØ²ÛŒÚ©ÛŒ
  product_id String?  @db.ObjectId
  product    Product? @relation(fields: [product_id], references: [id])

  @@index([order_id])
  @@index([item_type, item_id])
  @@map("order_items")
}

model Transaction {
  id                 String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at         DateTime @default(now())
  updated_at         DateTime @updatedAt
  transaction_number String   @unique

  // ÙˆØ¶Ø¹ÛŒØª ØªØ±Ø§Ú©Ù†Ø´
  status TransactionStatus @default(PENDING)

  // Ø³ÙØ§Ø±Ø´ Ù…Ø±ØªØ¨Ø·
  order_id String @db.ObjectId
  order    Order  @relation(fields: [order_id], references: [id], onDelete: Cascade)

  // Ú©Ø§Ø±Ø¨Ø± Ù…Ø±ØªØ¨Ø·
  user_id String @db.ObjectId
  user    User   @relation(fields: [user_id], references: [id], onDelete: Cascade)

  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù…Ø§Ù„ÛŒ
  amount     Int
  fee        Int    @default(0)
  net_amount Int
  currency   String @default("IRR")

  // Ù†ÙˆØ¹ ØªØ±Ø§Ú©Ù†Ø´
  transaction_type TransactionType

  // Ø±ÙˆØ´ Ù¾Ø±Ø¯Ø§Ø®Øª
  payment_method PaymentMethod?

  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø±Ø¯Ø§Ø®Øª
  gateway_reference String?
  gateway_response  Json?

  // Ø²Ù…Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ù…Ù‡Ù…
  processed_at DateTime?
  completed_at DateTime?

  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø®Ø·Ø§ Ùˆ Ø¨Ø§Ø²Ù¾Ø±Ø¯Ø§Ø®Øª
  error_code    String?
  error_message String?
  refund_amount Int?
  refund_reason String?
  refunded_at   DateTime?

  // ØªØ£ÛŒÛŒØ¯ Ù…Ø¯ÛŒØ±ÛŒØªÛŒ
  verified_by String?
  verified_at DateTime?
  notes       String?

  // ğŸ”¥ Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø§ÛŒÙ† ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯:
  description String? // ØªÙˆØ¶ÛŒØ­Ø§Øª ØªØ±Ø§Ú©Ù†Ø´
  metadata    Json? // Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù…ØªØ§Ø¯ÛŒØªØ§ Ø¨Ø±Ø§ÛŒ Ø§Ù†Ø¹Ø·Ø§Ùâ€ŒÙ¾Ø°ÛŒØ±ÛŒ

  // Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ ØªØ±Ø§Ú©Ù†Ø´ Ø§Ø¹ØªØ¨Ø§Ø±ÛŒ
  credit_transaction CreditTransaction?
  UserPlan           UserPlan[]

  @@index([order_id])
  @@index([user_id, created_at])
  @@index([created_at])
  @@index([transaction_type]) // ğŸ”¥ Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø§ÛŒÙ†Ø¯Ú©Ø³
  @@index([status, created_at]) // ğŸ”¥ Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø§ÛŒÙ†Ø¯Ú©Ø³
  @@map("transactions")
}

model CreditTransaction {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at DateTime @default(now())

  // Ú©Ø§Ø±Ø¨Ø± Ù…Ø±ØªØ¨Ø·
  user_id String @db.ObjectId
  user    User   @relation(fields: [user_id], references: [id], onDelete: Cascade)

  // Ø§Ú©Ø§Ù†Øª Ù…Ø±ØªØ¨Ø·
  account_id String?  @db.ObjectId
  account    Account? @relation(fields: [account_id], references: [id], onDelete: Cascade)

  // Ù…Ø­ØµÙˆÙ„ Ù…Ø±ØªØ¨Ø·
  product_id String?  @db.ObjectId
  product    Product? @relation(fields: [product_id], references: [id], onDelete: Cascade)

  // ØªØ±Ø§Ú©Ù†Ø´ Ø§ØµÙ„ÛŒ Ù…Ø±ØªØ¨Ø·
  transaction_id String?      @unique @db.ObjectId
  transaction    Transaction? @relation(fields: [transaction_id], references: [id])

  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªØ±Ø§Ú©Ù†Ø´ Ø§Ø¹ØªØ¨Ø§Ø±ÛŒ
  amount        Int
  balance_after Int
  activity_type String
  quantity      Int?
  description   String?

  // Ù†ÙˆØ¹ ØªØ±Ø§Ú©Ù†Ø´ Ø§Ø¹ØªØ¨Ø§Ø±ÛŒ
  credit_transaction_type TransactionType  @default(DEBIT)
  credit_activities       CreditActivity[]

  @@index([user_id, created_at])
  @@index([account_id, created_at])
  @@index([activity_type])
  @@map("credit_transactions")
}

model CreditActivity {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at DateTime @default(now())

  // Ú©Ø§Ø±Ø¨Ø± Ø§Ù†Ø¬Ø§Ù… Ø¯Ù‡Ù†Ø¯Ù‡
  user_id String @db.ObjectId
  user    User   @relation(fields: [user_id], references: [id], onDelete: Cascade)

  // Ø§Ú©Ø§Ù†Øª Ù…Ø±ØªØ¨Ø·
  account_id String?  @db.ObjectId
  account    Account? @relation(fields: [account_id], references: [id], onDelete: Cascade)

  // Ù…Ø­ØµÙˆÙ„ Ù…Ø±ØªØ¨Ø·
  product_id String?  @db.ObjectId
  product    Product? @relation(fields: [product_id], references: [id], onDelete: Cascade)

  // Ø³ÙØ§Ø±Ø´ Ù…Ø±ØªØ¨Ø·
  order_id String? @db.ObjectId
  order    Order?  @relation(fields: [order_id], references: [id], onDelete: Cascade)

  // Ø¢Ú¯Ù‡ÛŒ Ø®Ø±ÛŒØ¯ Ù…Ø±ØªØ¨Ø·
  buy_ad_id String? @db.ObjectId
  buy_ad    BuyAd?  @relation(fields: [buy_ad_id], references: [id], onDelete: Cascade)

  // ØªØ±Ø§Ú©Ù†Ø´ Ø§Ø¹ØªØ¨Ø§Ø±ÛŒ Ù…Ø±ØªØ¨Ø·
  credit_transaction_id String?            @db.ObjectId
  credit_transaction    CreditTransaction? @relation(fields: [credit_transaction_id], references: [id], onDelete: Cascade)

  // Ù†ÙˆØ¹ ÙØ¹Ø§Ù„ÛŒØª
  activity_type CreditActivityType

  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª ÙØ¹Ø§Ù„ÛŒØª
  quantity     Int                  @default(1)
  unit_price   Int
  total_cost   Int
  user_plan_id String?              @db.ObjectId
  user_plan    UserPlan?            @relation(fields: [user_plan_id], references: [id], onDelete: Cascade)
  // ÙˆØ¶Ø¹ÛŒØª
  status       CreditActivityStatus @default(PENDING)

  @@index([user_id, created_at])
  @@index([account_id, created_at])
  @@index([order_id])
  @@index([activity_type])
  @@index([status])
  @@map("credit_activities")
}

model AccountUserActivity {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at DateTime @default(now())

  // ğŸ”¥ Ù…ØªÙ…Ø±Ú©Ø² Ø¨Ø± AccountUser
  account_user_id String      @db.ObjectId
  account_user    AccountUser @relation(fields: [account_user_id], references: [id], onDelete: Cascade)

  // Ù†ÙˆØ¹ ÙØ¹Ø§Ù„ÛŒØª
  activity_type UserActivityType

  // Ù‡Ø¯Ù ÙØ¹Ø§Ù„ÛŒØª
  target_type String?
  target_id   String? @db.ObjectId

  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù…Ø®ØªØµØ± Ùˆ Ù…ÙÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ø´Ø®ØµÛŒâ€ŒØ³Ø§Ø²ÛŒ
  metadata Json?

  // ÙˆØ²Ù† ÙØ¹Ø§Ù„ÛŒØª
  weight Int @default(1)

  // Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ù…Ø­ØµÙˆÙ„
  product_id String?  @db.ObjectId
  product    Product? @relation(fields: [product_id], references: [id], onDelete: Cascade)

  @@index([account_user_id, created_at])
  @@index([activity_type, created_at])
  @@index([target_type, target_id])
  @@map("account_user_activities")
}

model AccountUserBehavior {
  id              String      @id @default(auto()) @map("_id") @db.ObjectId
  account_user_id String      @unique @db.ObjectId
  account_user    AccountUser @relation(fields: [account_user_id], references: [id], onDelete: Cascade)
  updated_at      DateTime    @updatedAt

  // Ø¹Ù„Ø§Ù‚Ù‡â€ŒÙ…Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø§ÛŒÙ† Ú©Ø§Ø±Ø¨Ø± Ø¯Ø± Ø§ÛŒÙ† Ø§Ú©Ø§Ù†Øª
  interests Json?

  // Ø§Ù„Ú¯ÙˆÙ‡Ø§ÛŒ Ø¬Ø³ØªØ¬ÙˆÛŒ Ø§ÛŒÙ† Ú©Ø§Ø±Ø¨Ø± Ø¯Ø± Ø§ÛŒÙ† Ø§Ú©Ø§Ù†Øª
  search_patterns Json?

  // ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ù…Ø®ØªØµØ± Ø§ÛŒÙ† Ú©Ø§Ø±Ø¨Ø± Ø¯Ø± Ø§ÛŒÙ† Ø§Ú©Ø§Ù†Øª
  recent_searches String[]
  recent_views    String[]
  recent_saves    String[]

  // Ø¢Ù…Ø§Ø± Ø³Ø±ÛŒØ¹ Ø§ÛŒÙ† Ú©Ø§Ø±Ø¨Ø± Ø¯Ø± Ø§ÛŒÙ† Ø§Ú©Ø§Ù†Øª
  total_searches Int       @default(0)
  total_views    Int       @default(0)
  total_saves    Int       @default(0)
  last_active    DateTime?

  @@index([updated_at])
  @@map("account_user_behaviors")
}
