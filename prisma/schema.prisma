// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

// ==================== ENUMS ====================
enum Language {
  fa
  en
  ar
  tr
  de
  fr
  es
  zh
  ru
}

// Ø¯Ø± ÙØ§ÛŒÙ„ prisma schema ÛŒØ§ enums Ø¬Ø¯Ø§Ú¯Ø§Ù†Ù‡
enum SystemRole {
  USER
  ADMIN
  MODERATOR
  OPERATOR
  CONTENT_APPROVER
}

enum AccountRole {
  OWNER // ØµØ§Ø­Ø¨ Ú©Ø³Ø¨â€ŒÙˆÚ©Ø§Ø±
  MANAGER // Ù…Ø¯ÛŒØ±
  FINANCE // Ù…Ø³Ø¦ÙˆÙ„ Ù…Ø§Ù„ÛŒ
  VIEWER // Ù…Ø´Ø§Ù‡Ø¯Ù‡â€ŒÚ¯Ø±
  SUPPORT // Ù¾Ø´ØªÛŒØ¨Ø§Ù†
  PRODUCT_MANAGER // Ù…Ø¯ÛŒØ± Ù…Ø­ØµÙˆÙ„
  SALES_MANAGER // Ù…Ø¯ÛŒØ± ÙØ±ÙˆØ´
  MARKETER // Ø¨Ø§Ø²Ø§Ø±ÛŒØ§Ø¨
  PURCHASE_MANAGER // Ù…Ø¯ÛŒØ± Ø®Ø±ÛŒØ¯
  WAREHOUSE_MANAGER // Ù…Ø¯ÛŒØ± Ø§Ù†Ø¨Ø§Ø±
  CONTENT_CREATOR // ØªÙˆÙ„ÛŒØ¯Ú©Ù†Ù†Ø¯Ù‡ Ù…Ø­ØªÙˆØ§
  CUSTOMER_SERVICE // Ù¾Ø´ØªÛŒØ¨Ø§Ù† Ù…Ø´ØªØ±ÛŒ
  OPERATIONS // Ù†ÛŒØ±ÙˆÛŒ Ø¹Ù…Ù„ÛŒØ§ØªÛŒ
  CONSULTANT // Ù…Ø´Ø§ÙˆØ±
  PARTNER // Ø´Ø±ÛŒÚ©
  EMPLOYEE // Ú©Ø§Ø±Ù…Ù†Ø¯
  INTERN // Ú©Ø§Ø±Ø¢Ù…ÙˆØ²
  OTHER // Ø³Ø§ÛŒØ±
}

enum FileUsage {
  // Ø¹Ù…ÙˆÙ…ÛŒ
  GENERAL
  DOCUMENT

  // Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ (Ú©Ø§Ø±Ø¨Ø±Ø§Ù†)
  PROFILE_PHOTO
  PROFILE_SMALL_PHOTO
  ID_CARD_FRONT
  ID_CARD_BACK
  SELFIE_WITH_ID
  SIGNATURE
  BANK_CARD
  ADDRESS_PROOF

  // Ú©Ø³Ø¨â€ŒÙˆÚ©Ø§Ø± / Ø³Ø§Ø²Ù…Ø§Ù†
  LOGO
  BANNER
  SHOP_FRONT
  INTERIOR_PHOTO
  SHOP_VIDEO
  CERTIFICATE
  LICENSE
  TAX_DOCUMENT
  REGISTRATION_DOC
  TEAM_PHOTO

  // Ù…Ø­ØµÙˆÙ„ / Ø®Ø¯Ù…Ø§Øª
  PRODUCT_IMAGE
  PRODUCT_GALLERY
  PRODUCT_VIDEO
  PRODUCT_LABEL
  PRODUCT_CERT
  PRODUCT_MANUAL

  // ØªØ¨Ù„ÛŒØºØ§Øª / Ù…Ø­ØªÙˆØ§ÛŒ Ø¨Ø§Ø²Ø§Ø±ÛŒØ§Ø¨ÛŒ
  AD_BANNER
  PROMO_VIDEO
  SOCIAL_POST

  // Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ùˆ ØªØ§ÛŒÛŒØ¯Ø§Øª
  SUPPORT_ATTACHMENT
  VERIFICATION_DOC
}

enum AccountActivityType {
  PERSONAL // Ú©Ø§Ø±Ø¨Ø± Ø´Ø®ØµÛŒ - ÙÙ‚Ø· Ø®Ø±ÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ù…ØµØ±Ù
  RETAIL_BUYER // Ø®Ø±ÛŒØ¯Ø§Ø± Ø®Ø±Ø¯Ù‡â€ŒÙØ±ÙˆØ´ - Ø®Ø±ÛŒØ¯ Ø¹Ù…Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ ÙØ±ÙˆØ´ Ø®Ø±Ø¯Ù‡
  WHOLESALER // Ø¹Ù…Ø¯Ù‡â€ŒÙØ±ÙˆØ´ - ÙØ±ÙˆØ´ Ø¹Ù…Ø¯Ù‡
  MANUFACTURER // ØªÙˆÙ„ÛŒØ¯Ú©Ù†Ù†Ø¯Ù‡ - Ø®Ø±ÛŒØ¯ Ù…ÙˆØ§Ø¯ Ø§ÙˆÙ„ÛŒÙ‡ + ÙØ±ÙˆØ´ Ù…Ø­ØµÙˆÙ„
  SUPPLIER // ØªØ£Ù…ÛŒÙ†â€ŒÚ©Ù†Ù†Ø¯Ù‡ Ù…ÙˆØ§Ø¯ Ø§ÙˆÙ„ÛŒÙ‡
  DISTRIBUTOR // Ù¾Ø®Ø´â€ŒÚ©Ù†Ù†Ø¯Ù‡
  SERVICE // Ø§Ø±Ø§Ø¦Ù‡â€ŒØ¯Ù‡Ù†Ø¯Ù‡ Ø®Ø¯Ù…Ø§Øª
  BROKER // Ú©Ø§Ø±Ú¯Ø²Ø§Ø±
  IMPORTER
  EXPORTER
}

enum ProductStatus {
  PENDING // Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± Ø¨Ø±Ø±Ø³ÛŒ
  APPROVED // ØªØ§ÛŒÛŒØ¯ Ø´Ø¯Ù‡ Ùˆ ÙØ¹Ø§Ù„
  REJECTED // Ø±Ø¯ Ø´Ø¯Ù‡
  EDIT_PENDING // Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± ØªØ§ÛŒÛŒØ¯ Ù¾Ø³ Ø§Ø² ÙˆÛŒØ±Ø§ÛŒØ´
  SUSPENDED // ØªØ¹Ù„ÛŒÙ‚ Ø´Ø¯Ù‡ (Ù…Ø«Ù„Ø§Ù‹ Ø¨Ù‡ Ø¯Ù„ÛŒÙ„ ØªØ®Ù„Ù)
  INACTIVE // ØºÛŒØ±ÙØ¹Ø§Ù„ ØªÙˆØ³Ø· ÙØ±ÙˆØ´Ù†Ø¯Ù‡ ÛŒØ§ Ø³ÛŒØ³ØªÙ…
  OUT_OF_STOCK // Ù†Ø§Ù…ÙˆØ¬ÙˆØ¯ (Ù…ÙˆØ¬ÙˆØ¯ÛŒ ØµÙØ±)
}

enum InteractionType {
  LIKE
  SAVE
  VIEW
}

enum OrderType {
  PACKAGE_PURCHASE
  PRODUCT_PURCHASE
  PAYMENT_REQUEST
  WITHDRAWAL_REQUEST
  DEPOSIT_REQUEST
  ESCROW_PAYMENT
  ESCROW_RELEASE
  ESCROW_REFUND
  SERVICE_PURCHASE
}

enum OrderStatus {
  PENDING
  PAID
  CONFIRMED
  PROCESSING
  COMPLETED
  CANCELLED
  FAILED
  REFUNDED
  PARTIALLY_REFUNDED
  EXPIRED
}

enum TransactionStatus {
  PENDING
  SUCCESS
  FAILED
  CANCELLED
  REFUNDED
  PARTIALLY_REFUNDED
  PROCESSING
}

enum TransactionType {
  DEBIT
  CREDIT
  BONUS
}

enum PaymentMethod {
  CREDIT_BALANCE
  ONLINE_GATEWAY
  BANK_TRANSFER
  WALLET
  CASH
  CRYPTO
}

// ÙØ¹Ø§Ù„ÛŒØªÙ‡Ø§ÛŒ Ù¾ÙˆÙ„ÛŒ
enum CreditActivityType {
  PRODUCT_BOOST
  SEND_BROADCAST
  FEATURED_BANNER
  VIDEO_UPLOAD
  INVITE_BONUS
  PRODUCT_CREATE
  PROFILE_COMPLETE
  DAILY_LOGIN
  REFERRAL_BONUS
  WELCOME_BONUS
  PACKAGE_PURCHASE
}

enum CreditActivityStatus {
  PENDING
  COMPLETED
  FAILED
  REFUNDED
}

enum UserActivityType {
  PROFILE_UPDATE
  PRODUCT_DELETE
  // ğŸ” Ø¬Ø³ØªØ¬Ùˆ (Ø¨Ø³ÛŒØ§Ø± Ù…Ù‡Ù… Ø¨Ø±Ø§ÛŒ Ø´Ø®ØµÛŒâ€ŒØ³Ø§Ø²ÛŒ)
  SEARCH_QUERY
  SEARCH_FILTER

  // ğŸ‘€ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù…Ø­ØµÙˆÙ„Ø§Øª (Ù…Ø³ØªÙ‚ÛŒÙ… Ù†Ø´Ø§Ù†â€ŒØ¯Ù‡Ù†Ø¯Ù‡ Ø¹Ù„Ø§Ù‚Ù‡)
  PRODUCT_VIEW
  PRODUCT_DETAIL_VIEW
  CATEGORY_VIEW

  // â¤ï¸ ØªØ¹Ø§Ù…Ù„ Ø¨Ø§ Ù…Ø­ØµÙˆÙ„Ø§Øª (Ù†Ø´Ø§Ù†â€ŒØ¯Ù‡Ù†Ø¯Ù‡ Ø¹Ù„Ø§Ù‚Ù‡ Ù‚ÙˆÛŒ)
  PRODUCT_LIKE
  PRODUCT_SAVE
  PRODUCT_COMPARE

  // ğŸ’° ÙØ¹Ø§Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø®Ø±ÛŒØ¯ Ùˆ ÙØ±ÙˆØ´ (Ù…Ù‡Ù…â€ŒØªØ±ÛŒÙ† Ø¨Ø±Ø§ÛŒ B2B)
  BUY_AD_CREATE // Ú©Ø§Ø±Ø¨Ø± Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø®Ø±ÛŒØ¯ Ø«Ø¨Øª Ú©Ø±Ø¯Ù‡
  BUY_AD_VIEW // Ú©Ø§Ø±Ø¨Ø± Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø®Ø±ÛŒØ¯ Ø¯ÛŒÚ¯Ø±Ø§Ù† Ø±Ùˆ Ø¯ÛŒØ¯Ù‡
  OFFER_CREATE // Ú©Ø§Ø±Ø¨Ø± Ø¨Ù‡ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø®Ø±ÛŒØ¯ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ø¯Ø§Ø¯Ù‡
  OFFER_VIEW // Ú©Ø§Ø±Ø¨Ø± Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯Ø§Øª Ø±Ùˆ Ø¯ÛŒØ¯Ù‡

  // ğŸ›’ Ø³ÙØ§Ø±Ø´Ø§Øª (Ø±ÙØªØ§Ø± Ø®Ø±ÛŒØ¯ ÙˆØ§Ù‚Ø¹ÛŒ)
  ORDER_CREATE
  ORDER_VIEW

  // ğŸ’¬ Ø¨Ø§Ø²Ø®ÙˆØ±Ø¯ (Ù†Ø´Ø§Ù†â€ŒØ¯Ù‡Ù†Ø¯Ù‡ ØªØ¬Ø±Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø±)
  REVIEW_CREATE
  REVIEW_LIKE

  // ğŸ‘¤ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù¾Ø±ÙˆÙØ§ÛŒÙ„â€ŒÙ‡Ø§ (Ø¹Ù„Ø§Ù‚Ù‡ Ø¨Ù‡ ØµÙ†Ù/ÙØ±ÙˆØ´Ù†Ø¯Ù‡ Ø®Ø§Øµ)
  ACCOUNT_VIEW
  PROFILE_VIEW
}

enum PlanStatus {
  ACTIVE
  INACTIVE
  COMING_SOON
}

enum LocationType {
  COUNTRY // Ú©Ø´ÙˆØ±
  PROVINCE // Ø§Ø³ØªØ§Ù†
  CITY // Ø´Ù‡Ø±
  TOWN // Ø´Ù‡Ø±Ú©
  VILLAGE // Ø±ÙˆØ³ØªØ§
  DISTRICT // Ù…Ù†Ø·Ù‚Ù‡
  NEIGHBORHOOD // Ù…Ø­Ù„Ù‡
  RURAL_DISTRICT // Ø¯Ù‡Ø³ØªØ§Ù†

  // ğŸ­ Ù…Ú©Ø§Ù†â€ŒÙ‡Ø§ÛŒ ØªØ®ØµØµÛŒ Ø¨Ø±Ø§ÛŒ Ú©Ø³Ø¨â€ŒÙˆÚ©Ø§Ø±Ù‡Ø§ÛŒ Ø¹Ù…Ø¯Ù‡â€ŒÙØ±ÙˆØ´ÛŒ
  INDUSTRIAL_ESTATE // Ø´Ù‡Ø±Ú© ØµÙ†Ø¹ØªÛŒ
  INDUSTRIAL_ZONE // Ù…Ù†Ø·Ù‚Ù‡ ØµÙ†Ø¹ØªÛŒ
  COMMERCIAL_ZONE // Ù…Ù†Ø·Ù‚Ù‡ ØªØ¬Ø§Ø±ÛŒ
  WHOLESALE_MARKET // Ø¨Ø§Ø²Ø§Ø± Ø¹Ù…Ø¯Ù‡â€ŒÙØ±ÙˆØ´ÛŒ
  TRADE_CENTER // Ù…Ø±Ú©Ø² ØªØ¬Ø§Ø±ÛŒ
  WAREHOUSE_DISTRICT // Ù…Ù†Ø·Ù‚Ù‡ Ø§Ù†Ø¨Ø§Ø±ÛŒ

  // ğŸ›ï¸ Ù…Ø±Ø§Ú©Ø² Ø®Ø±ÛŒØ¯ Ùˆ ÙØ±ÙˆØ´
  SHOPPING_CENTER // Ù…Ø±Ú©Ø² Ø®Ø±ÛŒØ¯
  SHOPPING_MALL // Ù…Ø§Ù„
  BAZAAR // Ø¨Ø§Ø²Ø§Ø±
  TRADITIONAL_BAZAAR // Ø¨Ø§Ø²Ø§Ø± Ø³Ù†ØªÛŒ

  // ğŸ—ï¸ Ø§Ù†ÙˆØ§Ø¹ Ù…Ø¬ØªÙ…Ø¹â€ŒÙ‡Ø§
  BUSINESS_COMPLEX // Ù…Ø¬ØªÙ…Ø¹ Ú©Ø³Ø¨â€ŒÙˆÚ©Ø§Ø±
  OFFICE_COMPLEX // Ù…Ø¬ØªÙ…Ø¹ Ø§Ø¯Ø§Ø±ÛŒ
  RESIDENTIAL_COMPLEX // Ù…Ø¬ØªÙ…Ø¹ Ù…Ø³Ú©ÙˆÙ†ÛŒ
}

// ==================== CORE MULTILINGUAL MODELS ====================

model Location {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at DateTime @default(now())

  type      LocationType
  code      String
  parent_id String?      @db.ObjectId

  parent   Location?  @relation("LocationChildren", fields: [parent_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  children Location[] @relation("LocationChildren")

  contents LocationContent[]

  // ğŸ”— Ø±ÙˆØ§Ø¨Ø· Ø¨Ø§ User - Ù‡Ø± Ú©Ø¯Ø§Ù… Ø¨Ø§ Ù†Ø§Ù… Ù…Ù†Ø­ØµØ±Ø¨Ù‡â€ŒÙØ±Ø¯
  users_level_1 User[] @relation("UserLocationLevel1")
  users_level_2 User[] @relation("UserLocationLevel2")
  users_level_3 User[] @relation("UserLocationLevel3")
  users_level_4 User[] @relation("UserLocationLevel4")

  // ğŸ”— Ø±ÙˆØ§Ø¨Ø· Ø¨Ø§ Product
  products_level_1 Product[] @relation("ProductLocationLevel1")
  products_level_2 Product[] @relation("ProductLocationLevel2")
  products_level_3 Product[] @relation("ProductLocationLevel3")
  products_level_4 Product[] @relation("ProductLocationLevel4")

  // ğŸ”— Ø±ÙˆØ§Ø¨Ø· Ø¨Ø§ Account
  accounts_level_1 Account[] @relation("AccountLocationLevel1")
  accounts_level_2 Account[] @relation("AccountLocationLevel2")
  accounts_level_3 Account[] @relation("AccountLocationLevel3")
  accounts_level_4 Account[] @relation("AccountLocationLevel4")

  // ğŸ”— Ø±ÙˆØ§Ø¨Ø· Ø¨Ø§ BuyAd
  buy_ads_level_1 BuyAd[] @relation("BuyAdLocationLevel1")
  buy_ads_level_2 BuyAd[] @relation("BuyAdLocationLevel2")
  buy_ads_level_3 BuyAd[] @relation("BuyAdLocationLevel3")
  buy_ads_level_4 BuyAd[] @relation("BuyAdLocationLevel4")

  // ğŸ”— Ø±ÙˆØ§Ø¨Ø· Ø¨Ø§ Offer
  offers_level_1 Offer[] @relation("OfferLocationLevel1")
  offers_level_2 Offer[] @relation("OfferLocationLevel2")
  offers_level_3 Offer[] @relation("OfferLocationLevel3")
  offers_level_4 Offer[] @relation("OfferLocationLevel4")

  // âœ… Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø±ÙˆØ§Ø¨Ø· Ø¨Ø§ Warehouse
  warehouses_level_1 Warehouse[] @relation("WarehouseLocationLevel1")
  warehouses_level_2 Warehouse[] @relation("WarehouseLocationLevel2")
  warehouses_level_3 Warehouse[] @relation("WarehouseLocationLevel3")
  warehouses_level_4 Warehouse[] @relation("WarehouseLocationLevel4")

  @@index([type])
  @@index([code])
  @@index([parent_id])
  @@map("locations")
}

model LocationContent {
  id          String   @id @default(auto()) @map("_id") @db.ObjectId
  location_id String   @db.ObjectId
  // ğŸ”§ Ø§ÛŒÙ†Ø¬Ø§ Cascade Ø¯Ø±Ø³Øª Ø§Ø³Øª Ú†ÙˆÙ† Ø±Ø§Ø¨Ø·Ù‡ Ø¨ÛŒÙ† Ø¯Ùˆ Ù…Ø¯Ù„ Ù…Ø®ØªÙ„Ù Ø§Ø³Øª
  location    Location @relation(fields: [location_id], references: [id], onDelete: Cascade)

  language        Language
  name            String
  full_name       String?
  auto_translated Boolean  @default(true)

  @@unique([location_id, language])
  @@index([location_id])
  @@index([language])
  @@index([name])
  @@map("location_contents")
}

// ==================== USER MULTILINGUAL MODELS ====================

enum UserSex {
  MALE
  FEMALE
  OTHER
}

model User {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at DateTime @default(now())

  // ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø§ØµÙ„ÛŒ (ØºÛŒØ±Ù‚Ø§Ø¨Ù„ ØªØ±Ø¬Ù…Ù‡)
  user_name           String?    @unique
  is_verified         Boolean    @default(false)
  is_buyer            Boolean    @default(false)
  is_seller           Boolean    @default(false)
  is_blocked          Boolean    @default(false)
  wallet_balance      Int        @default(0)
  category_id         Int?
  active_package_type Int        @default(0)
  package_end         DateTime?
  customer_status     String     @default("00000000")
  support_status      String     @default("00000000")
  phone_allowed       Boolean    @default(true)
  product_count       Int        @default(0)
  response_rate       Float?
  has_phone           Boolean    @default(false)
  total_profile_views Int        @default(0)
  last_profile_view   DateTime?
  rating              Float?     @default(0.0)
  credit_level        Int        @default(0)
  current_credit      Int        @default(0)
  total_spent         Int        @default(0)
  bonus_credit        Int        @default(0)
  email               String?    @unique
  mobile              String?    @unique
  password            String
  system_role         SystemRole @default(USER)
  sex                 UserSex?
  // ğŸ”— Ø±Ø§Ø¨Ø·Ù‡ Ø¨Ø§ Location
  location_level_1_id String?    @db.ObjectId // Ú©Ø´ÙˆØ±
  location_level_2_id String?    @db.ObjectId // Ø§Ø³ØªØ§Ù†
  location_level_3_id String?    @db.ObjectId // Ø´Ù‡Ø±
  location_level_4_id String?    @db.ObjectId // Ù…Ù†Ø·Ù‚Ù‡/Ù…Ø­Ù„Ù‡

  location_level_1 Location? @relation("UserLocationLevel1", fields: [location_level_1_id], references: [id])
  location_level_2 Location? @relation("UserLocationLevel2", fields: [location_level_2_id], references: [id])
  location_level_3 Location? @relation("UserLocationLevel3", fields: [location_level_3_id], references: [id])
  location_level_4 Location? @relation("UserLocationLevel4", fields: [location_level_4_id], references: [id])

  // ğŸ”¥ Ø±Ø§Ø¨Ø·Ù‡ Ø¨Ø§ Ù…Ø­ØªÙˆØ§ÛŒ Ú†Ù†Ø¯Ø²Ø¨Ø§Ù†Ù‡
  contents UserContent[]

  // Ø³Ø§ÛŒØ± Ø§Ø±ØªØ¨Ø§Ø·Ø§Øª
  account_users       AccountUser[]
  reviews             Review[]
  comments            Comment[]
  buy_ads             BuyAd[]
  products            Product[]
  interactions        Interaction[]
  credit_transactions CreditTransaction[]

  // ğŸ”¥ Ø§ØµÙ„Ø§Ø­: Ù†Ø§Ù…â€ŒÙ‡Ø§ÛŒ Ù…Ù†Ø­ØµØ±Ø¨Ù‡â€ŒÙØ±Ø¯ Ø¨Ø±Ø§ÛŒ Ø±ÙˆØ§Ø¨Ø· Ù¾ÛŒØ§Ù…
  sent_messages     Message[] @relation("UserSentMessages")
  received_messages Message[] @relation("UserReceivedMessages")

  conversations1     Conversation[]     @relation("ConversationUser1")
  conversations2     Conversation[]     @relation("ConversationUser2")
  verification_codes VerificationCode[]
  files              File[]
  orders             Order[]
  credit_activities  CreditActivity[]
  seller_orders      Order[]            @relation("OrderSeller")
  transactions       Transaction[]
  user_sessions      UserSession[]
  user_plans         UserPlan[]
  Offer              Offer[]
  product_audit_logs ProductAuditLog[]

  // âŒ Ø­Ø°Ù Ø®Ø·ÙˆØ· ØªÚ©Ø±Ø§Ø±ÛŒ
  // Message             Message[] âŒ Ø­Ø°Ù Ø´ÙˆØ¯
  // Message             Message[] âŒ Ø­Ø°Ù Ø´ÙˆØ¯

  // Ø§ÛŒÙ†Ø¯Ú©Ø³â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯
  @@index([is_seller, is_buyer])
  @@index([created_at, rating])
  // Ø§ÛŒÙ†Ø¯Ú©Ø³â€ŒÙ‡Ø§ÛŒ Ø­ÛŒØ§ØªÛŒ
  @@index([is_verified, is_blocked])
  @@index([created_at])
  @@index([credit_level])
  @@index([current_credit])
  @@index([location_level_1_id])
  @@index([location_level_2_id])
  @@index([location_level_3_id])
  @@index([location_level_4_id])
  @@map("users")
}

model UserContent {
  id       String   @id @default(auto()) @map("_id") @db.ObjectId
  user_id  String   @db.ObjectId
  user     User     @relation(fields: [user_id], references: [id], onDelete: Cascade)
  language Language

  // ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ ØªØ±Ø¬Ù…Ù‡â€ŒÙ¾Ø°ÛŒØ±
  first_name    String?
  last_name     String?
  bio           String?
  job_title     String?
  company       String?
  activity_type String?
  coming_from   String?

  // Ø¨Ø±Ø§ÛŒ Ù¾ÛŒÚ¯ÛŒØ±ÛŒ ØªØ±Ø¬Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø±
  auto_translated Boolean @default(true)

  @@unique([user_id, language])
  @@index([user_id])
  @@index([language])
  @@index([first_name, last_name])
  @@map("user_contents")
}

// ==================== VERIFICATION & SESSION MODELS ====================

model VerificationCode {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  code       String
  mobile     String
  expires_at DateTime
  user_id    String?  @db.ObjectId
  user       User?    @relation(fields: [user_id], references: [id], onDelete: Cascade)
  created_at DateTime @default(now())

  @@map("verification_codes")
}

model UserSession {
  id         String    @id @default(auto()) @map("_id") @db.ObjectId
  user_id    String    @db.ObjectId
  user       User      @relation(fields: [user_id], references: [id], onDelete: Cascade)
  started_at DateTime  @default(now())
  ended_at   DateTime?

  // Ø®Ù„Ø§ØµÙ‡ Ø¬Ù„Ø³Ù‡ Ø¨Ø±Ø§ÛŒ Ø¢Ù†Ø§Ù„ÛŒØ²
  session_type              String?
  number_of_pages_visited   Int     @default(0)
  number_of_products_viewed Int     @default(0)
  number_of_searches_made   Int     @default(0)

  @@index([user_id, started_at])
  @@index([started_at])
  @@map("user_sessions")
}

// ==================== INDUSTRY & BUSINESS MODELS ====================

model IndustryBranch {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  // ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ ØºÛŒØ±Ù‚Ø§Ø¨Ù„ ØªØ±Ø¬Ù…Ù‡
  code  String @unique
  level Int    @default(1)

  // Ø³Ù„Ø³Ù„Ù‡ Ù…Ø±Ø§ØªØ¨ Ø¯Ø±Ø®ØªÛŒ
  parentId String?          @db.ObjectId
  parent   IndustryBranch?  @relation("IndustryBranchChildren", fields: [parentId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  children IndustryBranch[] @relation("IndustryBranchChildren")

  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø§Ø¶Ø§ÙÛŒ ØºÛŒØ±Ù‚Ø§Ø¨Ù„ ØªØ±Ø¬Ù…Ù‡
  department_code    String?
  business_tree_code String?

  // ğŸ”¥ Ø±Ø§Ø¨Ø·Ù‡ Ø¨Ø§ Ù…Ø­ØªÙˆØ§ÛŒ Ú†Ù†Ø¯Ø²Ø¨Ø§Ù†Ù‡
  contents IndustryBranchContent[]

  // Ø§Ø±ØªØ¨Ø§Ø·Ø§Øª
  industries Industry[]

  // Ø§ÛŒÙ†Ø¯Ú©Ø³â€ŒÙ‡Ø§
  @@index([parentId])
  @@index([level])
  @@index([department_code])
  @@map("industry_branches")
}

model IndustryBranchContent {
  id                 String         @id @default(auto()) @map("_id") @db.ObjectId
  industry_branch_id String         @db.ObjectId
  industry_branch    IndustryBranch @relation(fields: [industry_branch_id], references: [id], onDelete: Cascade)
  language           Language

  name            String
  description     String?
  department      String?
  auto_translated Boolean @default(true)

  @@unique([industry_branch_id, language])
  @@index([industry_branch_id])
  @@index([language])
  @@index([name])
  @@map("industry_branch_contents")
}

// Ù†ÙˆØ¹ Ú©Ø³Ø¨â€ŒÙˆÚ©Ø§Ø± (Ø§Ø² BUTTONS Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ù…ÛŒâ€ŒØ´ÙˆØ¯)
enum IndustryBusinessType {
  HOUSEHOLD // Ø®Ø§Ù†Ú¯ÛŒ
  GUILD // ØµÙ†ÙÛŒ
  SERVICE // Ø®Ø¯Ù…Ø§ØªÛŒ
  INDUSTRIAL // ØµÙ†Ø¹ØªÛŒ
  COMMERCIAL // ØªØ¬Ø§Ø±ÛŒ
  AGRICULTURAL // Ú©Ø´Ø§ÙˆØ±Ø²ÛŒ
}

model Industry {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø§ØµÙ„ÛŒ
  business_number String?

  // Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø¯Ø±Ø®ØªÛŒ
  industry_branch_id String?         @db.ObjectId
  industry_branch    IndustryBranch? @relation(fields: [industry_branch_id], references: [id])

  // Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ù†ÙˆØ¹ Ú©Ø³Ø¨â€ŒÙˆÚ©Ø§Ø±
  business_type IndustryBusinessType[]
  is_active     Boolean                @default(true)

  // ÙˆØ¶Ø¹ÛŒØª
  level     Int @default(1)
  priority1 Int @default(0)
  priority2 Int @default(0)
  priority3 Int @default(0)

  // Ø³Ù„Ø³Ù„Ù‡ Ù…Ø±Ø§ØªØ¨ ØµÙ†ÙÛŒ
  parentId String?    @db.ObjectId
  parent   Industry?  @relation("IndustryChildren", fields: [parentId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  children Industry[] @relation("IndustryChildren")

  // ğŸ”¥ Ø§Ø±ØªØ¨Ø§Ø·Ø§Øª Ø®Ø±ÛŒØ¯/ÙØ±ÙˆØ´
  as_supplier_relations IndustryRelation[] @relation("SupplierRelations")
  as_customer_relations IndustryRelation[] @relation("CustomerRelations")

  // ØªÚ¯â€ŒÙ‡Ø§ Ùˆ Ù…Ø­ØµÙˆÙ„Ø§Øª

  buy_products  String[]
  sell_products String[]
  account_count Int      @default(0)

  // ğŸ”¥ Ø±Ø§Ø¨Ø·Ù‡ Ø¨Ø§ Ù…Ø­ØªÙˆØ§ÛŒ Ú†Ù†Ø¯Ø²Ø¨Ø§Ù†Ù‡
  contents IndustryContent[]

  // Ø§Ø±ØªØ¨Ø§Ø·Ø§Øª
  accounts        Account[]
  Brand           Brand[]
  MarketAnalytics MarketAnalytics[]

  // Ø§ÛŒÙ†Ø¯Ú©Ø³â€ŒÙ‡Ø§
  @@index([parentId])
  @@index([business_number])
  @@index([industry_branch_id])
  @@index([level])
  @@map("industries")
}

model IndustryContent {
  id          String   @id @default(auto()) @map("_id") @db.ObjectId
  industry_id String   @db.ObjectId
  industry    Industry @relation(fields: [industry_id], references: [id], onDelete: Cascade)
  language    Language

  name            String?
  description     String?
  introduction    String?
  business_tags   String[]
  related_tags    String[]
  auto_translated Boolean  @default(true)

  @@unique([industry_id, language])
  @@index([industry_id])
  @@index([language])
  @@map("industry_contents")
}

//Ø§ÛŒÙ† Ù…Ø¯Ù„ ØªØ§Ù…ÛŒÙ† Ú©Ù†Ù†Ø¯Ú¯Ø§Ù† Ùˆ Ø®Ø±ÛŒØ¯Ø§Ø±Ø§Ù† Ù…Ø±ØªØ¨Ø· Ø¨Ø§ Ù‡Ø± ØµÙ†Ù Ø±Ø§ Ø¯Ø± Ø®ÙˆØ¯ Ù†Ú¯Ù‡ Ù…ÛŒ Ø¯Ø§Ø±Ø¯
model IndustryRelation {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at DateTime @default(now())

  // ØµÙ†Ù ÙØ±ÙˆØ´Ù†Ø¯Ù‡ (ØªØ£Ù…ÛŒÙ†â€ŒÚ©Ù†Ù†Ø¯Ù‡)
  supplier_industry_id String   @db.ObjectId
  supplier_industry    Industry @relation("SupplierRelations", fields: [supplier_industry_id], references: [id], onDelete: Cascade)

  // ØµÙ†Ù Ø®Ø±ÛŒØ¯Ø§Ø± (Ù…Ø´ØªØ±ÛŒ)
  customer_industry_id String   @db.ObjectId
  customer_industry    Industry @relation("CustomerRelations", fields: [customer_industry_id], references: [id], onDelete: Cascade)

  // Ù†ÙˆØ¹ Ùˆ Ù‚Ø¯Ø±Øª Ø§Ø±ØªØ¨Ø§Ø·
  relation_type String
  strength      Float  @default(1.0)

  @@unique([supplier_industry_id, customer_industry_id])
  @@index([supplier_industry_id])
  @@index([customer_industry_id])
  @@map("industry_relations")
}

// ==================== ACCOUNT MULTILINGUAL MODELS ====================

model Account {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  // ğŸ”¥ ØµÙ†Ù Ú©Ø³Ø¨â€ŒÙˆÚ©Ø§Ø±
  industryId String?   @db.ObjectId
  industry   Industry? @relation(fields: [industryId], references: [id])

  // Ù†ÙˆØ¹ ÙØ¹Ø§Ù„ÛŒØª Ú©Ø³Ø¨â€ŒÙˆÚ©Ø§Ø±
  activity_type AccountActivityType? @default(PERSONAL)

  // ØªÚ¯â€ŒÙ‡Ø§ÛŒ ØªØ®ØµØµÛŒ
  business_tags String[]

  activity_domain          String?
  related_activity_history String?
  human_resource_count     String?

  // ğŸ”— Ø³ÛŒØ³ØªÙ… Ù„ÙˆÚ©ÛŒØ´Ù† Ø¬Ø¯ÛŒØ¯ - Ù‡Ù…Ù‡ Ø§Ø®ØªÛŒØ§Ø±ÛŒ
  location_level_1_id String? @db.ObjectId // Ú©Ø´ÙˆØ±
  location_level_2_id String? @db.ObjectId // Ø§Ø³ØªØ§Ù†
  location_level_3_id String? @db.ObjectId // Ø´Ù‡Ø±
  location_level_4_id String? @db.ObjectId // Ù…Ù†Ø·Ù‚Ù‡/Ù…Ø­Ù„Ù‡/Ø´Ù‡Ø±Ú© ØµÙ†Ø¹ØªÛŒ

  location_level_1 Location? @relation("AccountLocationLevel1", fields: [location_level_1_id], references: [id])
  location_level_2 Location? @relation("AccountLocationLevel2", fields: [location_level_2_id], references: [id])
  location_level_3 Location? @relation("AccountLocationLevel3", fields: [location_level_3_id], references: [id])
  location_level_4 Location? @relation("AccountLocationLevel4", fields: [location_level_4_id], references: [id])

  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªÙ…Ø§Ø³ Ùˆ Ø¢Ø¯Ø±Ø³
  profile_photo String?
  public_phone  String?

  postal_code String?
  shaba_code  String?

  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø­Ù‚ÙˆÙ‚ÛŒ
  is_company Boolean @default(false)

  company_register_code String?

  // ÙˆØ¶Ø¹ÛŒØª
  confirmed    Boolean   @default(false)
  confirmed_at DateTime? // ØªØ§Ø±ÛŒØ® ØªØ§ÛŒÛŒØ¯
  is_active    Boolean   @default(true)
  brands       Brand[]

  // Ø³ÛŒØ³ØªÙ… Ù†Ø´Ø§Ù†â€ŒÙ‡Ø§
  current_badge_type String?
  badge_expires_at   DateTime?

  // Ø¢Ù…Ø§Ø± Ø³Ø±ÛŒØ¹
  total_views Int @default(0)
  total_likes Int @default(0)
  total_saves Int @default(0)

  // ğŸ”¥ Ø±Ø§Ø¨Ø·Ù‡ Ø¨Ø§ Ù…Ø­ØªÙˆØ§ÛŒ Ú†Ù†Ø¯Ø²Ø¨Ø§Ù†Ù‡
  contents AccountContent[]

  // Ø§Ø±ØªØ¨Ø§Ø·Ø§Øª
  account_users       AccountUser[]
  products            Product[]
  buy_ads             BuyAd[]
  reviews             Review[]
  comments            Comment[]
  interactions        Interaction[]
  files               File[]
  credit_transactions CreditTransaction[]
  credit_activities   CreditActivity[]
  orders              Order[]
  Offer               Offer[]
  CatalogProduct      Catalog[]
  auto_translated     Boolean             @default(true)

  warehouses            Warehouse[]
  market_analytics      MarketAnalytics[]
  total_products_active Int               @default(0) // ØªØ¹Ø¯Ø§Ø¯ Ù…Ø­ØµÙˆÙ„Ø§Øª ÙØ¹Ø§Ù„
  response_time_hours   Float? // Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ø²Ù…Ø§Ù† Ù¾Ø§Ø³Ø®Ú¯ÙˆÛŒÛŒ

  // Ø§ÛŒÙ†Ø¯Ú©Ø³â€ŒÙ‡Ø§ÛŒ Ø­ÛŒØ§ØªÛŒ
  @@index([is_active, confirmed])
  @@index([activity_type, is_active])
  @@index([industryId, is_active])
  @@index([public_phone])
  @@index([created_at])
  @@index([current_badge_type])
  @@index([location_level_1_id])
  @@index([location_level_2_id])
  @@index([location_level_3_id])
  @@index([location_level_4_id])
  @@map("accounts")
}

model AccountContent {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  account_id String   @db.ObjectId
  account    Account  @relation(fields: [account_id], references: [id], onDelete: Cascade)
  language   Language

  name                     String?
  company_name             String?
  main_industry_name       String?
  description              String?
  profile_description      String?
  address                  String?
  related_activity_history String?
  auto_translated          Boolean @default(true)

  @@unique([account_id, language])
  @@index([account_id])
  @@index([language])
  @@index([name])
  @@map("account_contents")
}

model AccountUser {
  id           String      @id @default(auto()) @map("_id") @db.ObjectId
  created_at   DateTime    @default(now())
  account_role AccountRole @default(VIEWER)

  user_id    String @db.ObjectId
  account_id String @db.ObjectId

  user    User    @relation(fields: [user_id], references: [id], onDelete: Cascade)
  account Account @relation(fields: [account_id], references: [id], onDelete: Cascade)

  // ğŸ”¥ Ø±ÙˆØ§Ø¨Ø· Ø¬Ø¯ÛŒØ¯ Ù…ØªÙ…Ø±Ú©Ø²
  account_user_behavior   AccountUserBehavior?
  account_user_activities AccountUserActivity[]

  @@unique([user_id, account_id])
  @@index([user_id])
  @@index([account_id])
  @@map("account_users")
}

// ==================== PLAN & SUBSCRIPTION MODELS ====================

model Plan {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  // ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ ØºÛŒØ±Ù‚Ø§Ø¨Ù„ ØªØ±Ø¬Ù…Ù‡
  level         Int        @unique
  price         Int
  credit_amount Int
  bonus_credit  Int        @default(0)
  total_credit  Int
  expiry_days   Int
  status        PlanStatus @default(ACTIVE)
  is_popular    Boolean    @default(false)

  // ğŸ”¥ Ø±Ø§Ø¨Ø·Ù‡ Ø¨Ø§ Ù…Ø­ØªÙˆØ§ÛŒ Ú†Ù†Ø¯Ø²Ø¨Ø§Ù†Ù‡
  contents PlanContent[]

  // Ø§Ø±ØªØ¨Ø§Ø·Ø§Øª
  user_plans UserPlan[]

  // Ø§ÛŒÙ†Ø¯Ú©Ø³â€ŒÙ‡Ø§ÛŒ Ø­ÛŒØ§ØªÛŒ
  @@index([status])
  @@index([price])
  @@index([is_popular])
  @@map("plans")
}

model PlanContent {
  id       String   @id @default(auto()) @map("_id") @db.ObjectId
  plan_id  String   @db.ObjectId
  plan     Plan     @relation(fields: [plan_id], references: [id], onDelete: Cascade)
  language Language

  name            String
  description     String?
  benefits        String[]
  auto_translated Boolean  @default(true)

  @@unique([plan_id, language])
  @@index([plan_id])
  @@index([language])
  @@index([name])
  @@map("plan_contents")
}

model UserPlan {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  // Ú©Ø§Ø±Ø¨Ø± Ùˆ Ù¾Ù„Ù†
  user_id String @db.ObjectId
  plan_id String @db.ObjectId
  user    User   @relation(fields: [user_id], references: [id], onDelete: Cascade)
  plan    Plan   @relation(fields: [plan_id], references: [id], onDelete: Cascade)

  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ
  start_date DateTime @default(now())
  end_date   DateTime
  is_active  Boolean  @default(true)

  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø§Ø³ØªÙØ§Ø¯Ù‡
  initial_credit   Int
  remaining_credit Int
  used_credit      Int @default(0)

  // ØªØ±Ø§Ú©Ù†Ø´ Ù…Ø±ØªØ¨Ø·
  transaction_id String?      @db.ObjectId
  transaction    Transaction? @relation(fields: [transaction_id], references: [id])

  // Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ ÙØ¹Ø§Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø§Ø¹ØªØ¨Ø§Ø±ÛŒ
  credit_activities CreditActivity[]

  // Ù‡Ø± Ú©Ø§Ø±Ø¨Ø± ÙÙ‚Ø· ÛŒÚ© Ù¾Ù„Ù† ÙØ¹Ø§Ù„ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯
  @@unique([user_id, plan_id, is_active])
  // Ø§ÛŒÙ†Ø¯Ú©Ø³â€ŒÙ‡Ø§ÛŒ Ø­ÛŒØ§ØªÛŒ
  @@index([user_id, is_active])
  @@index([plan_id])
  @@index([end_date])
  @@index([is_active, end_date])
  @@map("user_plans")
}

// ==================== PRODUCT & CATALOG MULTILINGUAL MODELS ====================

enum SellUnit {
  // ÙˆØ§Ø­Ø¯Ù‡Ø§ÛŒ Ø´Ù…Ø§Ø±Ø´ÛŒ
  PIECE
  PACKAGE
  BOX
  CARTON
  PALLET
  PAIR
  DOZEN
  SET
  UNIT

  // ÙˆØ§Ø­Ø¯Ù‡Ø§ÛŒ ÙˆØ²Ù†ÛŒ
  KILOGRAM
  GRAM
  TON
  MESGHAL

  // ÙˆØ§Ø­Ø¯Ù‡Ø§ÛŒ Ø­Ø¬Ù…ÛŒ
  LITER
  MILLILITER
  BARREL

  // ÙˆØ§Ø­Ø¯Ù‡Ø§ÛŒ Ø·ÙˆÙ„ÛŒ
  METER
  CENTIMETER
  SQUARE_METER

  // ÙˆØ§Ø­Ø¯Ù‡Ø§ÛŒ ØµÙ†Ø¹ØªÛŒ
  ROLL
  SHEET
  COIL

  // ÙˆØ§Ø­Ø¯Ù‡Ø§ÛŒ Ø¨Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ
  BAG
  BOTTLE
  CAN

  // ÙˆØ§Ø­Ø¯Ù‡Ø§ÛŒ Ø­Ù…Ù„
  CONTAINER
  TRUCK_LOAD
}

enum PaymentMethodType {
  CASH
  BANK_TRANSFER
  CHECK_3DAY
  CHECK_7DAY
  CHECK_15DAY
  CHECK_30DAY
  CHECK_60DAY
  CREDIT_30D
  CREDIT_60D
  CREDIT_90D
}

type PaymentSettlement {
  method     PaymentMethodType
  multiplier Float             @default(1.0)
  isActive   Boolean           @default(true)
}

// ==================== CATALOG ENUMS ====================

enum CatalogProductStatus {
  DRAFT
  PENDING_REVIEW
  APPROVED
  REJECTED
  ARCHIVED
}

enum ManufacturerType {
  DOMESTIC
  INTERNATIONAL
  LICENSED
}

enum BrandType {
  CORPORATE
  REGIONAL
  ARTISAN
  DIGITAL_BRAND
  GENERIC
}

enum CatalogStatus {
  DRAFT
  PENDING_REVIEW
  APPROVED
  REJECTED
  ARCHIVED
}

// ==================== BRAND MULTILINGUAL MODELS ====================

model Brand {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  logo              String?
  brand_type        BrandType
  manufacturer_type ManufacturerType
  country           String?
  website           String?
  region            String?
  is_verified       Boolean          @default(false)
  is_system_brand   Boolean          @default(false)

  // Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ ØµÙ†Ù
  industry_id String?   @db.ObjectId
  industry    Industry? @relation(fields: [industry_id], references: [id])

  // Ù…Ø§Ù„Ú© Ø¨Ø±Ù†Ø¯
  account_id String?  @db.ObjectId
  account    Account? @relation(fields: [account_id], references: [id])

  // ğŸ”¥ Ø±Ø§Ø¨Ø·Ù‡ Ø¨Ø§ Ù…Ø­ØªÙˆØ§ÛŒ Ú†Ù†Ø¯Ø²Ø¨Ø§Ù†Ù‡
  contents BrandContent[]

  // Ù…Ø­ØµÙˆÙ„Ø§Øª Ø§ÛŒÙ† Ø¨Ø±Ù†Ø¯ Ø¯Ø± Ú©Ø§ØªØ§Ù„ÙˆÚ¯
  catalogs Catalog[]

  // Ø¢Ù…Ø§Ø±
  products_count Int @default(0)

  @@index([industry_id])
  @@index([account_id])
  @@index([brand_type])
  @@index([is_verified])
  @@map("brands")
}

model BrandContent {
  id       String   @id @default(auto()) @map("_id") @db.ObjectId
  brand_id String   @db.ObjectId
  brand    Brand    @relation(fields: [brand_id], references: [id], onDelete: Cascade)
  language Language

  name            String
  description     String?
  auto_translated Boolean @default(true)

  @@unique([brand_id, language])
  @@index([brand_id])
  @@index([language])
  @@index([name])
  @@map("brand_contents")
}

// ==================== CATEGORY MULTILINGUAL MODELS ====================

model Category {
  id         String     @id @default(auto()) @map("_id") @db.ObjectId
  created_at DateTime   @default(now())
  updated_at DateTime   @updatedAt
  parent_id  String?    @db.ObjectId
  parent     Category?  @relation("CategoryChildren", fields: [parent_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  children   Category[] @relation("CategoryChildren")
  bId        Int        @unique

  // ğŸ”¥ Ø±Ø§Ø¨Ø·Ù‡ Ø¨Ø§ Ù…Ø­ØªÙˆØ§ÛŒ Ú†Ù†Ø¯Ø²Ø¨Ø§Ù†Ù‡
  contents CategoryContent[]

  sellUnits SellUnit[]

  // Ø±ÙˆØ§Ø¨Ø· Ù…Ø­ØµÙˆÙ„Ø§Øª
  main_category_products Product[]         @relation("ProductCategory")
  sub_category_products  Product[]         @relation("ProductSubCategory")
  catalogs               Catalog[]
  CategorySpec           CategorySpec[]
  MarketAnalytics        MarketAnalytics[]

  @@index([parent_id])
  @@map("categories")
}

model CategoryContent {
  id              String   @id @default(auto()) @map("_id") @db.ObjectId
  category_id     String   @db.ObjectId
  category        Category @relation(fields: [category_id], references: [id], onDelete: Cascade)
  language        Language
  name            String
  description     String?
  metadata        Json?
  auto_translated Boolean  @default(true)

  @@unique([category_id, language])
  @@index([category_id])
  @@index([language])
  @@index([name])
  @@map("category_contents")
}

// ==================== SPECIFICATION MODELS ====================

model Unit {
  id     String  @id @default(auto()) @map("_id") @db.ObjectId
  key    String  @unique
  symbol String
  rate   Float   @default(1)
  isBase Boolean @default(false)

  // ğŸ”¥ Ø±Ø§Ø¨Ø·Ù‡ Ø¨Ø§ Ù…Ø­ØªÙˆØ§ÛŒ Ú†Ù†Ø¯Ø²Ø¨Ø§Ù†Ù‡
  contents UnitContent[]

  @@map("units")
}

model UnitContent {
  id              String   @id @default(auto()) @map("_id") @db.ObjectId
  unit_id         String   @db.ObjectId
  unit            Unit     @relation(fields: [unit_id], references: [id], onDelete: Cascade)
  language        Language
  label           String
  auto_translated Boolean  @default(true)

  @@unique([unit_id, language])
  @@index([unit_id])
  @@index([language])
  @@index([label])
  @@map("unit_contents")
}

// Ø¯Ø± schema.prisma - Ù…Ø¯Ù„ Spec
model Spec {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  // ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ ØºÛŒØ±Ù‚Ø§Ø¨Ù„ ØªØ±Ø¬Ù…Ù‡
  key               String   @unique // ğŸ”¥ Ø§ÛŒÙ† Ø®Ø· Ø±Ø§ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯
  type              String
  data_type         String?
  is_required       Boolean  @default(false)
  is_filterable     Boolean  @default(true)
  is_searchable     Boolean  @default(false)
  sort_order        Int      @default(0)
  options           Json?
  min_value         Float?
  max_value         Float?
  step              Float?
  allowed_unit_keys String[]

  // ğŸ”¥ Ø±Ø§Ø¨Ø·Ù‡ Ø¨Ø§ Ù…Ø­ØªÙˆØ§ÛŒ Ú†Ù†Ø¯Ø²Ø¨Ø§Ù†Ù‡
  contents SpecContent[]

  // Ø§Ø±ØªØ¨Ø§Ø·Ø§Øª
  category_specs CategorySpec[]
  catalog_specs  CatalogSpec[]

  // Ø§ÛŒÙ†Ø¯Ú©Ø³â€ŒÙ‡Ø§
  @@index([type])
  @@index([is_filterable])
  @@index([sort_order])
  @@map("specs")
}

model SpecContent {
  id       String   @id @default(auto()) @map("_id") @db.ObjectId
  spec_id  String   @db.ObjectId
  spec     Spec     @relation(fields: [spec_id], references: [id], onDelete: Cascade)
  language Language

  label           String
  description     String?
  auto_translated Boolean @default(true)

  @@unique([spec_id, language])
  @@index([spec_id])
  @@index([language])
  @@index([label])
  @@map("spec_contents")
}

// âœ… Ø·Ø±Ø§Ø­ÛŒ Ø¨Ù‡ÛŒÙ†Ù‡
model CategorySpec {
  id          String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at  DateTime @default(now())
  category_id String   @db.ObjectId
  spec_id     String   @db.ObjectId
  category    Category @relation(fields: [category_id], references: [id], onDelete: Cascade)
  spec        Spec     @relation(fields: [spec_id], references: [id], onDelete: Cascade)

  @@unique([category_id, spec_id])
  @@index([category_id])
  @@index([spec_id])
  @@map("category_specs")
}

// ==================== CATALOG MULTILINGUAL MODELS ====================

model Catalog {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø§ÛŒÙ‡
  model_number String?
  sku_pattern  String?

  // ÙˆØ¶Ø¹ÛŒØª
  status    CatalogStatus @default(DRAFT)
  is_public Boolean       @default(false)

  // Ø¨Ø±Ù†Ø¯ Ùˆ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ
  brand_id String @db.ObjectId
  brand    Brand  @relation(fields: [brand_id], references: [id], onDelete: Cascade)

  category_id String   @db.ObjectId
  category    Category @relation(fields: [category_id], references: [id], onDelete: Cascade)

  // ØªÙˆÙ„ÛŒØ¯ Ú©Ù†Ù†Ø¯Ù‡
  manufacturer_account_id String  @db.ObjectId
  manufacturer_account    Account @relation(fields: [manufacturer_account_id], references: [id], onDelete: Cascade)

  // ÙˆØ§Ø­Ø¯Ù‡Ø§ÛŒ Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯
  sell_unit   SellUnit
  spect_units Json

  // ØªØµØ§ÙˆÛŒØ± Ùˆ Ù…Ø³ØªÙ†Ø¯Ø§Øª
  images    String[]
  documents String[]
  video_url String?

  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù…Ø¯ÛŒØ±ÛŒØªÛŒ
  submitted_by     String?
  reviewed_by      String?
  reviewed_at      DateTime?
  rejection_reason String?

  // Ø¢Ù…Ø§Ø± Ø§Ø³ØªÙØ§Ø¯Ù‡
  usage_count Int @default(0)

  // ğŸ”¥ Ø±Ø§Ø¨Ø·Ù‡ Ø¨Ø§ Ù…Ø­ØªÙˆØ§ÛŒ Ú†Ù†Ø¯Ø²Ø¨Ø§Ù†Ù‡
  contents CatalogContent[]

  // Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ù…Ø­ØµÙˆÙ„Ø§Øª Ø³Ø§ÛŒØª Ø§ØµÙ„ÛŒ
  used_in_products Product[]

  catalog_specs CatalogSpec[]

  special_specs Json

  @@index([brand_id])
  @@index([category_id])
  @@index([manufacturer_account_id])
  @@index([status])
  @@index([is_public])
  @@index([model_number])
  @@map("catalogs")
}

model CatalogContent {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  catalog_id String   @db.ObjectId
  catalog    Catalog  @relation(fields: [catalog_id], references: [id], onDelete: Cascade)
  language   Language

  name            String
  description     String?
  auto_translated Boolean @default(true)

  @@unique([catalog_id, language])
  @@index([catalog_id])
  @@index([language])
  @@index([name])
  @@map("catalog_contents")
}

model CatalogSpec {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at DateTime @default(now())

  catalog_id String @db.ObjectId
  spec_id    String @db.ObjectId

  catalog Catalog @relation(fields: [catalog_id], references: [id], onDelete: Cascade)
  spec    Spec    @relation(fields: [spec_id], references: [id], onDelete: Cascade)

  // Ù…Ù‚Ø¯Ø§Ø± Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Spec Ø¯Ø± Ø§ÛŒÙ† Catalog
  value String

  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø§Ø¶Ø§ÙÛŒ
  spec_type String @default("GENERAL")

  @@unique([catalog_id, spec_id])
  @@index([catalog_id])
  @@index([spec_id])
  @@index([spec_type])
  @@map("catalog_specs")
}

// ==================== PRODUCT MULTILINGUAL MODELS ====================
//  Ù…Ø¯Ù„ Ø¨Ø±Ø§ÛŒ ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ù‚ÛŒÙ…Øªâ€ŒÙ‡Ø§
model ProductPriceHistory {
  id          String   @id @default(auto()) @map("_id") @db.ObjectId
  product_id  String   @db.ObjectId
  old_price   Int
  new_price   Int
  changed_at  DateTime @default(now())
  change_type String // MANUAL, AUTOMATIC, DISCOUNT
  reason      String?

  @@index([product_id, changed_at])
}

// Ø¯Ø± schema.prisma - Ø§ØµÙ„Ø§Ø­ Ù…Ø¯Ù„ Product
model Product {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  // ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø§ØµÙ„ÛŒ
  stock           Int           @default(0)
  min_sale_amount Int
  unit            SellUnit
  status          ProductStatus @default(PENDING)

  // Ù‚ÛŒÙ…Øªâ€ŒÙ‡Ø§
  base_min_price Int?
  base_max_price Int?

  // Ø±ÙˆØ§Ø¨Ø·
  category_id     String? @db.ObjectId
  sub_category_id String? @db.ObjectId
  account_id      String  @db.ObjectId
  user_id         String  @db.ObjectId
  catalog_id      String? @db.ObjectId

  // Ù„ÙˆÚ©ÛŒØ´Ù†
  location_level_1_id String? @db.ObjectId
  location_level_2_id String? @db.ObjectId
  location_level_3_id String? @db.ObjectId
  location_level_4_id String? @db.ObjectId

  // ğŸ”§ ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØªÛŒ Ø¨Ø±Ø§ÛŒ Ø±Ø¯ Ù…Ø­ØµÙˆÙ„
  confirmed        Boolean   @default(false)
  rejection_reason String? // Ø¯Ù„ÛŒÙ„ Ø±Ø¯
  rejection_code   String? // Ú©Ø¯ Ø±Ø¯ (Ù…Ø«Ù„Ø§Ù‹: GENERAL, QUALITY, PRICE, etc.)
  rejected_at      DateTime? // ØªØ§Ø±ÛŒØ® Ø±Ø¯
  rejected_by      String?   @db.ObjectId // Ú©Ø§Ø±Ø¨Ø± Ø§Ø¯Ù…ÛŒÙ†ÛŒ Ú©Ù‡ Ø±Ø¯ Ú©Ø±Ø¯Ù‡
  can_resubmit     Boolean   @default(false) // Ø¢ÛŒØ§ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ù…Ø¬Ø¯Ø¯Ø§Ù‹ Ø§Ø±Ø³Ø§Ù„ Ú©Ù†Ø¯
  resubmit_after   DateTime? // ØªØ§Ø±ÛŒØ® Ù…Ø¬Ø§Ø² Ø¨Ø±Ø§ÛŒ Ø§Ø±Ø³Ø§Ù„ Ù…Ø¬Ø¯Ø¯

  // ğŸ”§ ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØªÛŒ Ø¨Ø±Ø§ÛŒ ØªØ¹Ù„ÛŒÙ‚
  suspension_reason  String? // Ø¯Ù„ÛŒÙ„ ØªØ¹Ù„ÛŒÙ‚
  suspended_at       DateTime? // ØªØ§Ø±ÛŒØ® ØªØ¹Ù„ÛŒÙ‚
  suspended_by       String?   @db.ObjectId // Ú©Ø§Ø±Ø¨Ø± Ø§Ø¯Ù…ÛŒÙ†ÛŒ Ú©Ù‡ ØªØ¹Ù„ÛŒÙ‚ Ú©Ø±Ø¯Ù‡
  suspension_ends_at DateTime? // ØªØ§Ø±ÛŒØ® Ù¾Ø§ÛŒØ§Ù† ØªØ¹Ù„ÛŒÙ‚

  // ğŸ”§ ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØªÛŒ Ø¨Ø±Ø§ÛŒ ØªØ§ÛŒÛŒØ¯
  confirmed_at      DateTime? // ØªØ§Ø±ÛŒØ® ØªØ§ÛŒÛŒØ¯
  confirmed_by      String?          @db.ObjectId // Ú©Ø§Ø±Ø¨Ø± Ø§Ø¯Ù…ÛŒÙ†ÛŒ Ú©Ù‡ ØªØ§ÛŒÛŒØ¯ Ú©Ø±Ø¯Ù‡
  // Ø±ÙˆØ§Ø¨Ø·
  category          Category?        @relation("ProductCategory", fields: [category_id], references: [id])
  sub_category      Category?        @relation("ProductSubCategory", fields: [sub_category_id], references: [id])
  account           Account          @relation(fields: [account_id], references: [id], onDelete: Cascade)
  user              User             @relation(fields: [user_id], references: [id], onDelete: Cascade)
  catalog           Catalog?         @relation(fields: [catalog_id], references: [id])
  total_searches    Int              @default(0)
  total_views       Int              @default(0)
  total_saves       Int              @default(0)
  total_likes       Int              @default(0)
  location_level_1  Location?        @relation("ProductLocationLevel1", fields: [location_level_1_id], references: [id])
  location_level_2  Location?        @relation("ProductLocationLevel2", fields: [location_level_2_id], references: [id])
  location_level_3  Location?        @relation("ProductLocationLevel3", fields: [location_level_3_id], references: [id])
  location_level_4  Location?        @relation("ProductLocationLevel4", fields: [location_level_4_id], references: [id])
  boost_purchased   Boolean          @default(false)
  boost_power       Int              @default(0)
  boost_expires_at  DateTime?
  boost_is_elevated Boolean          @default(false)
  // Ù…Ø­ØªÙˆØ§ÛŒ Ú†Ù†Ø¯Ø²Ø¨Ø§Ù†Ù‡
  contents          ProductContent[]

  // Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒâ€ŒÙ‡Ø§ÛŒ Ù‚ÛŒÙ…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ
  pricing_strategies  ProductPrice[]
  reviews             Review[]
  comments            Comment[]
  interactions        Interaction[]
  files               File[]
  order_items         OrderItem[]
  credit_transactions CreditTransaction[]
  credit_activities   CreditActivity[]
  account_activities  AccountUserActivity[]

  product_audit_logs ProductAuditLog[]

  //***************Ø¬Ø¯ÛŒØ¯***********
  inventories      Inventory[]
  market_analytics MarketAnalytics[]
  //******************************

  Warehouse Warehouse[]

  // Ø§ÛŒÙ†Ø¯Ú©Ø³â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ú¯Ø²Ø§Ø±Ø´â€ŒÚ¯ÛŒØ±ÛŒ
  @@index([status, created_at])
  @@index([account_id, status])
  @@index([stock]) // Ø¨Ø±Ø§ÛŒ ÙÛŒÙ„ØªØ± Ù…ÙˆØ¬ÙˆØ¯ÛŒ
  @@index([account_id])
  @@index([user_id])
  @@index([category_id])
  @@index([status])
  @@index([created_at])
  @@map("products")
}

model ProductContent {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  product_id String   @db.ObjectId
  product    Product  @relation(fields: [product_id], references: [id], onDelete: Cascade)
  language   Language

  name                String
  description         String?
  address             String?
  tags                String[]
  category_name       String?
  sub_category_name   String?
  super_category_name String?
  brand_name          String?
  city_name           String?
  // Ù…Ø´Ø®ØµØ§Øª ÙÙ†ÛŒ Ù‚Ø§Ø¨Ù„ ØªØ±Ø¬Ù…Ù‡
  technical_specs     Json?
  features            String[]

  auto_translated Boolean @default(true)

  @@unique([product_id, language])
  @@index([product_id])
  @@index([language])
  @@map("product_contents")
}

// ØªØ§Ø±ÛŒØ®Ú†Ù‡ ØªØºÛŒÛŒØ±Ø§Øª Ù…Ø­ØµÙˆÙ„ Ø±Ø§ Ù†Ú¯Ù‡ Ù…ÛŒ Ø¯Ø§Ø±Ø¯. Ø§Ù…Ø§ Ø¨Ø¹Ø¯Ø§ Ø¨Ø§ÛŒØ¯ ØªÚ©Ù…ÛŒÙ„ Ø´ÙˆØ¯ ØªØ§ Ù…ØªÙ† Ùˆ ØªØµØ§ÙˆÛŒØ± Ùˆ Ø§Ø¯Ø¹Ø§Ù‡Ø§ÛŒ ÙØ±ÙˆØ´Ù†Ø¯Ù‡ Ø¯Ø± ØªØ§Ø±ÛŒØ® Ù‡Ø§ÛŒ Ù…ØªÙØ§ÙˆØª Ø±Ø§ Ù…Ø³ØªÙ†Ø¯ Ú©Ù†Ø¯
model ProductAuditLog {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at DateTime @default(now())

  product_id String  @db.ObjectId
  product    Product @relation(fields: [product_id], references: [id], onDelete: Cascade)

  user_id String @db.ObjectId
  user    User   @relation(fields: [user_id], references: [id], onDelete: Cascade)

  action     String // approve, reject, suspend, unsuspend, edit, etc.
  old_status ProductStatus?
  new_status ProductStatus?
  reason     String?
  notes      String?

  metadata Json?

  @@index([product_id, created_at])
  @@index([user_id, created_at])
  @@index([action])
  @@map("product_audit_logs")
}

// ==================== PRICING & OFFER MODELS ====================

enum ProductPriceType {
  FIXED
  TIERED
  VOLUME_DISCOUNT
  NEGOTIABLE
  AUCTION
  BUNDLE
}

enum PricingConditionCategory {
  PAYMENT_SETTLEMENT
  DELIVERY_METHOD
  CUSTOMER_TYPE
  TIME_CONDITION
  ORDER_CONDITION
  LOCATION_CONDITION
  SPECIAL_OFFER
}

enum PricingConditionType {
  // ğŸ”¥ Ø¯Ø³ØªÙ‡: Ù†Ø­ÙˆÙ‡ ØªØ³ÙˆÛŒÙ‡
  CASH_PAYMENT
  CHECK_3DAY
  CHECK_7DAY
  CHECK_15DAY
  CHECK_30DAY
  CHECK_60DAY
  CREDIT_30D
  CREDIT_60D
  CREDIT_90D
  ONLINE_PAYMENT

  // ğŸ”¥ Ø¯Ø³ØªÙ‡: Ø±ÙˆØ´ Ø­Ù…Ù„
  EXPRESS_DELIVERY
  STANDARD_DELIVERY
  CUSTOMER_PICKUP
  FREE_DELIVERY
  INTERNATIONAL_SHIPPING

  // ğŸ”¥ Ø¯Ø³ØªÙ‡: Ù†ÙˆØ¹ Ù…Ø´ØªØ±ÛŒ
  CORPORATE_CUSTOMER
  LOYAL_CUSTOMER
  NEW_CUSTOMER
  FIRST_ORDER
  WHOLESALER
  RETAILER

  // ğŸ”¥ Ø¯Ø³ØªÙ‡: Ø´Ø±Ø§ÛŒØ· Ø²Ù…Ø§Ù†ÛŒ
  SEASONAL_DISCOUNT
  HOLIDAY_DISCOUNT
  FLASH_SALE
  WEEKEND_DISCOUNT
  NIGHT_ORDER

  // ğŸ”¥ Ø¯Ø³ØªÙ‡: Ø´Ø±Ø§ÛŒØ· Ø³ÙØ§Ø±Ø´
  BULK_ORDER
  PRE_ORDER
  SUBSCRIPTION
  BUNDLE_ORDER

  // ğŸ”¥ Ø¯Ø³ØªÙ‡: Ø´Ø±Ø§ÛŒØ· Ù…Ú©Ø§Ù†ÛŒ
  SAME_CITY
  SAME_PROVINCE
  CAPITAL_CITY
  REMOTE_AREA
}

model ProductPrice {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  product_id String  @db.ObjectId
  product    Product @relation(fields: [product_id], references: [id], onDelete: Cascade)

  condition_category PricingConditionCategory?
  condition_type     PricingConditionType?

  // ğŸ”¥ ÙˆØ§Ø­Ø¯ Ø§ÛŒÙ† Ù‚ÛŒÙ…Øª
  price_unit SellUnit

  // ğŸ”¥ Ø¶Ø±ÛŒØ¨ ØªØ¨Ø¯ÛŒÙ„ Ù†Ø³Ø¨Øª Ø¨Ù‡ ÙˆØ§Ø­Ø¯ Ø§ØµÙ„ÛŒ Ù…Ø­ØµÙˆÙ„
  conversion_rate Float @default(1.0)

  // ğŸ”¥ Ù‚ÛŒÙ…Øª Ù¾Ø§ÛŒÙ‡ Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† ÙˆØ§Ø­Ø¯ (Ù‚Ø§Ø¨Ù„ ÙˆÛŒØ±Ø§ÛŒØ´ ØªÙˆØ³Ø· Ú©Ø§Ø±Ø¨Ø±)
  base_price_amount Int?

  // ğŸ”¥ Ø¯Ø±ØµØ¯ ØªØºÛŒÛŒØ± Ù†Ø³Ø¨Øª Ø¨Ù‡ Ù‚ÛŒÙ…Øª Ù¾Ø§ÛŒÙ‡ (Ù‚Ø§Ø¨Ù„ ÙˆÛŒØ±Ø§ÛŒØ´)
  custom_adjustment_percent Float?

  // ğŸ”¥ Ù‚ÛŒÙ…Øª Ù†Ù‡Ø§ÛŒÛŒ (Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø´Ø¯Ù‡ Ø§Ø² base_price_amount Ùˆ custom_adjustment_percent)
  final_price_amount Int?

  condition_config Json?

  is_active  Boolean @default(true)
  is_primary Boolean @default(false)

  // Ø¨Ø±Ø§ÛŒ ÙÛŒÙ„ØªØ± Ø³Ø±ÛŒØ¹
  min_effective_price Int?
  max_effective_price Int?
  has_discount        Boolean @default(false)

  // Ø§ÛŒÙ†Ø¯Ú©Ø³â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ Ø¨Ø±Ø§ÛŒ ØªØ­Ù„ÛŒÙ„ Ø¨Ø§Ø²Ø§Ø±
  @@index([condition_type, final_price_amount])
  @@index([is_active, created_at])
  @@index([product_id, is_primary])
  @@index([condition_category, condition_type])
  @@index([price_unit])
  @@index([final_price_amount])
  @@map("product_prices")
}

// ==================== BUY AD & OFFER MODELS ====================
enum BuyAdType {
  SIMPLE // Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø³Ø§Ø¯Ù‡ - ÙÙ‚Ø· ØªÙ…Ø§Ø³/Ù¾ÛŒØ§Ù…
  OFFER // Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¨Ø§ Ù‚Ø§Ø¨Ù„ÛŒØª Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù‚ÛŒÙ…Øª
  AUCTION // Ù…Ø²Ø§ÛŒØ¯Ù‡
  TENDER // Ù…Ù†Ø§Ù‚ØµÙ‡
  NEGOTIATION // Ù…Ø°Ø§Ú©Ø±Ù‡ Ù‚ÛŒÙ…Øª
}

enum BuyAdStatus {
  DRAFT // Ù¾ÛŒØ´â€ŒÙ†ÙˆÛŒØ³ - Ø¯Ø± Ø­Ø§Ù„ ÙˆÛŒØ±Ø§ÛŒØ´
  PENDING // Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± ØªØ£ÛŒÛŒØ¯
  APPROVED // ØªØ§ÛŒÛŒØ¯ Ø´Ø¯Ù‡ Ùˆ ÙØ¹Ø§Ù„
  INACTIVE // ØºÛŒØ± ÙØ¹Ø§Ù„ Ùˆ ØºÛŒØ± Ù‚Ø§Ø¨Ù„ Ù…Ø´Ø§Ù‡Ø¯Ù‡
  EXPIRED // Ù…Ù†Ù‚Ø¶ÛŒ Ø´Ø¯Ù‡
  FULFILLED // ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡
  CANCELLED // Ù„ØºÙˆ Ø´Ø¯Ù‡
}

// Ù…Ø¯Ù„ BuyAd Ú©Ø§Ù…Ù„ (Ø§Ú¯Ø± Ù†ÛŒØ§Ø² Ø¯Ø§Ø±ÛŒ):
model BuyAd {
  id                 String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at         DateTime @default(now())
  requirement_amount Int
  register_date      DateTime @map("register_date")

  // ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ ØºÛŒØ±Ù‚Ø§Ø¨Ù„ ØªØ±Ø¬Ù…Ù‡
  category_id    Int?
  unit           String
  is_verified    Boolean     @default(false)
  status         BuyAdStatus @default(PENDING)
  offer_settings Json?
  total_offers   Int         @default(0)
  last_offer_at  DateTime?
  conditions     Json?

  // === ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ ===
  type          BuyAdType   @default(SIMPLE)
  buy_ad_status BuyAdStatus @default(DRAFT)
  expires_at    DateTime?
  fulfilled_at  DateTime?

  // ØªÙ†Ø¸ÛŒÙ…Ø§Øª ØªÙ…Ø§Ø³
  allow_phone_contact   Boolean @default(true)
  allow_message_contact Boolean @default(true)
  allow_public_offers   Boolean @default(true)

  // Ø´Ø±Ø§ÛŒØ· ÙØ±ÙˆØ´Ù†Ø¯Ù‡
  min_seller_rating Float?

  preferred_payment_methods PaymentMethodType[]

  // Ø¢Ù…Ø§Ø±
  total_views    Int @default(0)
  total_contacts Int @default(0)

  // === Ø±ÙˆØ§Ø¨Ø· ===
  account_id String  @db.ObjectId
  account    Account @relation(fields: [account_id], references: [id], onDelete: Cascade)
  user_id    String  @db.ObjectId
  user       User    @relation(fields: [user_id], references: [id], onDelete: Cascade)

  // Ù„ÙˆÚ©ÛŒØ´Ù†
  location_level_1_id String? @db.ObjectId
  location_level_2_id String? @db.ObjectId
  location_level_3_id String? @db.ObjectId
  location_level_4_id String? @db.ObjectId

  location_level_1 Location? @relation("BuyAdLocationLevel1", fields: [location_level_1_id], references: [id])
  location_level_2 Location? @relation("BuyAdLocationLevel2", fields: [location_level_2_id], references: [id])
  location_level_3 Location? @relation("BuyAdLocationLevel3", fields: [location_level_3_id], references: [id])
  location_level_4 Location? @relation("BuyAdLocationLevel4", fields: [location_level_4_id], references: [id])

  // Ø³Ø§ÛŒØ± Ø±ÙˆØ§Ø¨Ø·
  credit_activities CreditActivity[]
  Conversation      Conversation[]
  offers            Offer[]
  contents          BuyAdContent[]

  // === Ø§ÛŒÙ†Ø¯Ú©Ø³â€ŒÙ‡Ø§ ===
  @@index([account_id])
  @@index([user_id])
  @@index([category_id])
  @@index([created_at])
  @@index([type])
  @@index([buy_ad_status])
  @@index([expires_at])
  @@index([location_level_1_id])
  @@index([location_level_2_id])
  @@index([location_level_3_id])
  @@index([location_level_4_id])
  @@map("buy_ads")
}

model BuyAdContent {
  id        String   @id @default(auto()) @map("_id") @db.ObjectId
  buy_ad_id String   @db.ObjectId
  buy_ad    BuyAd    @relation(fields: [buy_ad_id], references: [id], onDelete: Cascade)
  language  Language

  name                    String?
  category_name           String?
  subcategory_name        String?
  auto_translated         Boolean  @default(true)
  description             String?
  required_certifications String[] //Ø´Ø±Ø§ÛŒØ· Ø®Ø±ÛŒØ¯

  @@unique([buy_ad_id, language])
  @@index([buy_ad_id])
  @@index([language])
  @@index([name])
  @@map("buy_ad_contents")
}

// ğŸ”¥ Ù…Ø¯Ù„ Offer
enum OfferType {
  DIRECT_OFFER // Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù…Ø³ØªÙ‚ÛŒÙ…
  COUNTER_OFFER // Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù…ØªÙ‚Ø§Ø¨Ù„
  AUCTION_BID // Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù…Ø²Ø§ÛŒØ¯Ù‡
  TENDER_BID // Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù…Ù†Ø§Ù‚ØµÙ‡
  NEGOTIATION // Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù…Ø°Ø§Ú©Ø±Ù‡
}

enum OfferPriority {
  LOW
  NORMAL
  HIGH
  URGENT
}

enum OfferStatus {
  PENDING // Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± Ø¨Ø±Ø±Ø³ÛŒ - Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ø¬Ø¯ÛŒØ¯ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯Ù‡
  UNDER_REVIEW // Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±Ø±Ø³ÛŒ - Ø®Ø±ÛŒØ¯Ø§Ø± Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±Ø±Ø³ÛŒ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯
  ACCEPTED // Ù¾Ø°ÛŒØ±ÙØªÙ‡ Ø´Ø¯Ù‡ - Ø®Ø±ÛŒØ¯Ø§Ø± Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ø±Ø§ Ù¾Ø°ÛŒØ±ÙØªÙ‡
  REJECTED // Ø±Ø¯ Ø´Ø¯Ù‡ - Ø®Ø±ÛŒØ¯Ø§Ø± Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ø±Ø§ Ø±Ø¯ Ú©Ø±Ø¯Ù‡
  COUNTERED // Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù…ØªÙ‚Ø§Ø¨Ù„ - Ø®Ø±ÛŒØ¯Ø§Ø± Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù…ØªÙ‚Ø§Ø¨Ù„ Ø¯Ø§Ø¯Ù‡
  EXPIRED // Ù…Ù†Ù‚Ø¶ÛŒ Ø´Ø¯Ù‡ - Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ø¨Ù‡ Ù¾Ø§ÛŒØ§Ù† Ø§Ø¹ØªØ¨Ø§Ø± Ø±Ø³ÛŒØ¯Ù‡
  WITHDRAWN // Ù¾Ø³ Ú¯Ø±ÙØªÙ‡ Ø´Ø¯Ù‡ - ÙØ±ÙˆØ´Ù†Ø¯Ù‡ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ø±Ø§ Ù¾Ø³ Ú¯Ø±ÙØªÙ‡
  CANCELLED // Ù„ØºÙˆ Ø´Ø¯Ù‡ - Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ ØªÙˆØ³Ø· Ø³ÛŒØ³ØªÙ… Ù„ØºÙˆ Ø´Ø¯Ù‡
  NEGOTIATING // Ø¯Ø± Ø­Ø§Ù„ Ù…Ø°Ø§Ú©Ø±Ù‡ - Ø·Ø±ÙÛŒÙ† Ø¯Ø± Ø­Ø§Ù„ Ù…Ø°Ø§Ú©Ø±Ù‡ Ù‡Ø³ØªÙ†Ø¯
  CONFIRMED // ØªØ£ÛŒÛŒØ¯ Ø´Ø¯Ù‡ - Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù†Ù‡Ø§ÛŒÛŒ ØªØ£ÛŒÛŒØ¯ Ø´Ø¯Ù‡
  ON_HOLD // Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± - Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù…ÙˆÙ‚ØªØ§Ù‹ Ù…ØªÙˆÙ‚Ù Ø´Ø¯Ù‡
}

// Ø§ÛŒÙ† Ù…Ø¯Ù„ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯Ø§Øª Ø®Ø±ÛŒØ¯Ø§Ø± Ø¨Ù‡ ÙØ±ÙˆØ´Ù†Ø¯Ù‡ Ø±Ø§ Ø¯Ø± Ø®ÙˆØ¯ Ù†Ú¯Ù‡ Ù…ÛŒØ¯Ø§Ø±Ø¯
model Offer {
  // === ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø§ØµÙ„ÛŒ ===
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  // === Ø±ÙˆØ§Ø¨Ø· Ø§ØµÙ„ÛŒ ===
  seller_id  String  @db.ObjectId
  seller     User    @relation(fields: [seller_id], references: [id], onDelete: Cascade)
  account_id String  @db.ObjectId
  account    Account @relation(fields: [account_id], references: [id], onDelete: Cascade)
  buy_ad_id  String  @db.ObjectId
  buy_ad     BuyAd   @relation(fields: [buy_ad_id], references: [id], onDelete: Cascade)

  // === Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ ===
  proposed_price  Int
  proposed_amount Int
  unit            String
  delivery_time   Int
  description     String?

  // === Ø§Ù†ÙˆØ§Ø¹ Ùˆ ÙˆØ¶Ø¹ÛŒØªâ€ŒÙ‡Ø§ ===
  type     OfferType     @default(DIRECT_OFFER)
  priority OfferPriority @default(NORMAL)
  status   OfferStatus   @default(PENDING)

  // === Ø³ÛŒØ³ØªÙ… Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù…ØªÙ‚Ø§Ø¨Ù„ ===
  parent_offer_id String? @db.ObjectId
  parent_offer    Offer?  @relation("OfferReplies", fields: [parent_offer_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  child_offers    Offer[] @relation("OfferReplies")

  // === Ø²Ù…Ø§Ù†â€ŒØ¨Ù†Ø¯ÛŒ Ùˆ Ø§Ø¹ØªØ¨Ø§Ø± ===
  validity_hours    Int?      @default(24) // Ù…Ø¯Øª Ø§Ø¹ØªØ¨Ø§Ø± Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯
  expires_at        DateTime? // ØªØ§Ø±ÛŒØ® Ø§Ù†Ù‚Ø¶Ø§
  is_auto_renewable Boolean   @default(false)

  // === Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø­Ù…Ù„ Ùˆ Ù†Ù‚Ù„ ===
  shipping_cost Int?
  shipping_time Int? // Ø±ÙˆØ²
  //packaging_details String? Ø³Ù…Øª Ú©Ø§Ù†ØªÙ†Øª

  // === Ú¯ÙˆØ§Ù‡ÛŒâ€ŒÙ‡Ø§ Ùˆ ØªØ¶Ù…ÛŒÙ†â€ŒÙ‡Ø§ ===
  certifications    String[] // Ú¯ÙˆØ§Ù‡ÛŒâ€ŒÙ‡Ø§ÛŒ Ø§Ø±Ø§Ø¦Ù‡ Ø´Ø¯Ù‡
  warranty_months   Int? // Ù…Ø¯Øª Ú¯Ø§Ø±Ø§Ù†ØªÛŒ
  quality_guarantee Boolean  @default(false) // ØªØ¶Ù…ÛŒÙ† Ú©ÛŒÙÛŒØª

  // === ÙˆØ¶Ø¹ÛŒØª Ø¯ÛŒØ¯Ú¯Ø§Ù‡â€ŒÙ‡Ø§ ===
  is_seen_by_buyer Boolean   @default(false)
  seen_by_buyer_at DateTime?
  view_count       Int       @default(0) // ØªØ¹Ø¯Ø§Ø¯ Ø¨Ø§Ø²Ø¯ÛŒØ¯

  // === Ø§Ù…ØªÛŒØ§Ø²Ø¯Ù‡ÛŒ Ùˆ Ø¨Ø§Ø²Ø®ÙˆØ±Ø¯ ===
  buyer_rating  Int? // Ø§Ù…ØªÛŒØ§Ø² Ø®Ø±ÛŒØ¯Ø§Ø± Ø¨Ù‡ ÙØ±ÙˆØ´Ù†Ø¯Ù‡ (1-5)
  seller_rating Int? // Ø§Ù…ØªÛŒØ§Ø² ÙØ±ÙˆØ´Ù†Ø¯Ù‡ Ø¨Ù‡ Ø®Ø±ÛŒØ¯Ø§Ø± (1-5)
  //buyer_feedback  String? // Ù†Ø¸Ø±Ø§Øª Ø®Ø±ÛŒØ¯Ø§Ø±
  //seller_feedback String? // Ù†Ø¸Ø±Ø§Øª ÙØ±ÙˆØ´Ù†Ø¯Ù‡

  // === Ù…Ú©Ø§Ù„Ù…Ù‡ Ù…Ø±ØªØ¨Ø· ===
  conversation_id String?       @db.ObjectId
  conversation    Conversation? @relation(fields: [conversation_id], references: [id])

  // === Ù„ÙˆÚ©ÛŒØ´Ù† ===
  location_level_1_id String? @db.ObjectId // Ú©Ø´ÙˆØ±
  location_level_2_id String? @db.ObjectId // Ø§Ø³ØªØ§Ù†
  location_level_3_id String? @db.ObjectId // Ø´Ù‡Ø±
  location_level_4_id String? @db.ObjectId // Ù…Ù†Ø·Ù‚Ù‡/Ù…Ø­Ù„Ù‡/Ø´Ù‡Ø±Ú© ØµÙ†Ø¹ØªÛŒ

  location_level_1 Location? @relation("OfferLocationLevel1", fields: [location_level_1_id], references: [id])
  location_level_2 Location? @relation("OfferLocationLevel2", fields: [location_level_2_id], references: [id])
  location_level_3 Location? @relation("OfferLocationLevel3", fields: [location_level_3_id], references: [id])
  location_level_4 Location? @relation("OfferLocationLevel4", fields: [location_level_4_id], references: [id])

  // === Ù…Ø­ØªÙˆØ§ÛŒ Ú†Ù†Ø¯Ø²Ø¨Ø§Ù†Ù‡ ===
  contents OfferContent[]

  // === Ù…ØªØ§Ø¯ÛŒØªØ§ Ø¨Ø±Ø§ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø§Ø¶Ø§ÙÛŒ ===
  metadata Json?

  // === Ø§ÛŒÙ†Ø¯Ú©Ø³â€ŒÙ‡Ø§ ===
  @@index([buy_ad_id, status])
  @@index([seller_id, created_at])
  @@index([status, created_at])
  @@index([type, status])
  @@index([priority])
  @@index([parent_offer_id])
  @@index([validity_hours])
  @@index([expires_at])
  @@index([is_seen_by_buyer])
  @@index([location_level_1_id])
  @@index([location_level_2_id])
  @@index([location_level_3_id])
  @@index([location_level_4_id])
  @@index([location_level_2_id, location_level_3_id])
  @@map("offers")
}

// Ù…Ø¯Ù„ Ù…Ø­ØªÙˆØ§ÛŒ Ú†Ù†Ø¯Ø²Ø¨Ø§Ù†Ù‡ Ø¨Ø±Ø§ÛŒ Offer
model OfferContent {
  id       String   @id @default(auto()) @map("_id") @db.ObjectId
  offer_id String   @db.ObjectId
  offer    Offer    @relation(fields: [offer_id], references: [id], onDelete: Cascade)
  language Language

  // ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ù‚Ø§Ø¨Ù„ ØªØ±Ø¬Ù…Ù‡
  description         String? // ØªÙˆØ¶ÛŒØ­Ø§Øª Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ø¨Ù‡ Ø²Ø¨Ø§Ù† Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø±
  packaging_details   String? // Ø¬Ø²Ø¦ÛŒØ§Øª Ø¨Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ
  certifications_note String? // ØªÙˆØ¶ÛŒØ­Ø§Øª Ú¯ÙˆØ§Ù‡ÛŒâ€ŒÙ‡Ø§
  shipping_note       String? // ØªÙˆØ¶ÛŒØ­Ø§Øª Ø­Ù…Ù„ Ùˆ Ù†Ù‚Ù„

  auto_translated Boolean @default(true)
  buyer_feedback  String? // Ù†Ø¸Ø±Ø§Øª Ø®Ø±ÛŒØ¯Ø§Ø±
  seller_feedback String? // Ù†Ø¸Ø±Ø§Øª ÙØ±ÙˆØ´Ù†Ø¯Ù‡

  @@unique([offer_id, language])
  @@index([offer_id])
  @@index([language])
  @@map("offer_contents")
}

// ==================== INTERACTION & SOCIAL MODELS ====================

model Review {
  id            String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at    DateTime @default(now())
  rating_score  Int      @default(5)
  confirmed     Boolean  @default(false)
  likes         Int      @default(0)
  already_liked Boolean  @default(false)

  // ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ ØºÛŒØ±Ù‚Ø§Ø¨Ù„ ØªØ±Ø¬Ù…Ù‡
  user_id    String   @db.ObjectId
  product_id String?  @db.ObjectId
  product    Product? @relation(fields: [product_id], references: [id], onDelete: Cascade)
  account_id String?  @db.ObjectId
  account    Account? @relation(fields: [account_id], references: [id], onDelete: Cascade)
  user       User     @relation(fields: [user_id], references: [id], onDelete: Cascade)

  // ğŸ”¥ Ø±Ø§Ø¨Ø·Ù‡ Ø¨Ø§ Ù…Ø­ØªÙˆØ§ÛŒ Ú†Ù†Ø¯Ø²Ø¨Ø§Ù†Ù‡
  contents ReviewContent[]

  // Ù‡Ø± Ú©Ø§Ø±Ø¨Ø± ÙÙ‚Ø· ÛŒÚ© Ù†Ø¸Ø± Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ù…Ø­ØµÙˆÙ„/Ø§Ú©Ø§Ù†Øª
  @@unique([user_id, product_id])
  @@unique([user_id, account_id])
  // Ø§ÛŒÙ†Ø¯Ú©Ø³â€ŒÙ‡Ø§ÛŒ Ø­ÛŒØ§ØªÛŒ
  @@index([product_id, created_at])
  @@index([account_id, created_at])
  @@index([user_id, created_at])
  @@index([rating_score])
  @@index([confirmed])
  @@map("reviews")
}

model ReviewContent {
  id        String   @id @default(auto()) @map("_id") @db.ObjectId
  review_id String   @db.ObjectId
  review    Review   @relation(fields: [review_id], references: [id], onDelete: Cascade)
  language  Language

  comment         String?
  auto_translated Boolean @default(true)

  @@unique([review_id, language])
  @@index([review_id])
  @@index([language])
  @@map("review_contents")
}

model Comment {
  id            String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at    DateTime @default(now())
  confirmed     Boolean  @default(true)
  likes         Int      @default(0)
  already_liked Boolean  @default(false)

  // Ú©Ø§Ø±Ø¨Ø± Ú©Ø§Ù…Ù†Øª Ø¯Ù‡Ù†Ø¯Ù‡
  user_id String @db.ObjectId
  user    User   @relation(fields: [user_id], references: [id], onDelete: Cascade)

  // Ø³ÛŒØ³ØªÙ… Ù¾Ø§Ø³Ø®Ú¯ÙˆÛŒÛŒ
  parent_id String?   @db.ObjectId
  parent    Comment?  @relation("CommentReplies", fields: [parent_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  replies   Comment[] @relation("CommentReplies")

  // Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ù…Ø­ØµÙˆÙ„ ÛŒØ§ Ø§Ú©Ø§Ù†Øª
  product_id String?  @db.ObjectId
  product    Product? @relation(fields: [product_id], references: [id], onDelete: Cascade)
  account_id String?  @db.ObjectId
  account    Account? @relation(fields: [account_id], references: [id], onDelete: Cascade)

  // ğŸ”¥ Ø±Ø§Ø¨Ø·Ù‡ Ø¨Ø§ Ù…Ø­ØªÙˆØ§ÛŒ Ú†Ù†Ø¯Ø²Ø¨Ø§Ù†Ù‡
  contents CommentContent[]

  // Ø§ÛŒÙ†Ø¯Ú©Ø³â€ŒÙ‡Ø§ÛŒ Ø­ÛŒØ§ØªÛŒ
  @@index([product_id, created_at])
  @@index([account_id, created_at])
  @@index([user_id, created_at])
  @@index([parent_id])
  @@index([confirmed])
  @@map("comments")
}

model CommentContent {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  comment_id String   @db.ObjectId
  comment    Comment  @relation(fields: [comment_id], references: [id], onDelete: Cascade)
  language   Language

  content String // Ù…Ø­ØªÙˆØ§ÛŒ Ú©Ø§Ù…Ù†Øª

  auto_translated Boolean @default(false) // Ø¢ÛŒØ§ ØªØ±Ø¬Ù…Ù‡ Ø®ÙˆØ¯Ú©Ø§Ø± Ø§Ø³Øª

  @@unique([comment_id, language])
  @@index([comment_id])
  @@index([language])
  @@map("comment_contents")
}

model Interaction {
  id         String          @id @default(auto()) @map("_id") @db.ObjectId
  created_at DateTime        @default(now())
  type       InteractionType

  // Ú©Ø§Ø±Ø¨Ø± Ø§Ù†Ø¬Ø§Ù… Ø¯Ù‡Ù†Ø¯Ù‡
  user_id String @db.ObjectId
  user    User   @relation(fields: [user_id], references: [id], onDelete: Cascade)

  // Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ù…Ø­ØµÙˆÙ„ ÛŒØ§ Ø§Ú©Ø§Ù†Øª
  product_id String?  @db.ObjectId
  product    Product? @relation(fields: [product_id], references: [id], onDelete: Cascade)
  account_id String?  @db.ObjectId
  account    Account? @relation(fields: [account_id], references: [id], onDelete: Cascade)

  // Ù‡Ø± Ú©Ø§Ø±Ø¨Ø± ÙÙ‚Ø· ÛŒÚ© Ø¨Ø§Ø± Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ù„Ø§ÛŒÚ©/Ø°Ø®ÛŒØ±Ù‡ Ú©Ù†Ø¯ (ÙˆÛŒÙˆ Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ù†Ø¯Ø§Ø±Ø¯)
  @@unique([user_id, product_id, type])
  @@unique([user_id, account_id, type])
  // Ø§ÛŒÙ†Ø¯Ú©Ø³â€ŒÙ‡Ø§ÛŒ Ø­ÛŒØ§ØªÛŒ
  @@index([product_id, type, created_at])
  @@index([account_id, type, created_at])
  @@index([user_id, type])
  @@index([type, created_at])
  @@map("interactions")
}

// ==================== FILE & MESSAGING MODELS ====================

model File {
  id             String    @id @default(auto()) @map("_id") @db.ObjectId
  created_at     DateTime  @default(now())
  file_path      String
  thumbnail_path String?   @map("thumbnail_path")
  status         String?   @default("2")
  mime           Int?
  upload_date    DateTime? @map("upload_date")
  file_usage     FileUsage
  description    String?

  // Ø§Ø±ØªØ¨Ø§Ø·Ø§Øª
  product_id String?  @db.ObjectId
  product    Product? @relation(fields: [product_id], references: [id], onDelete: Cascade)
  account_id String?  @db.ObjectId
  account    Account? @relation(fields: [account_id], references: [id], onDelete: Cascade)
  user_id    String?  @db.ObjectId
  user       User?    @relation(fields: [user_id], references: [id], onDelete: Cascade)

  // Ø§ÛŒÙ†Ø¯Ú©Ø³â€ŒÙ‡Ø§ÛŒ Ø­ÛŒØ§ØªÛŒ
  @@index([product_id])
  @@index([account_id])
  @@index([user_id])
  @@index([file_usage])
  @@index([created_at])
  @@map("files")
}

model Conversation {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  // Ø¯Ùˆ Ø·Ø±Ù Ú¯ÙØªÚ¯Ùˆ
  user1_id String @db.ObjectId
  user2_id String @db.ObjectId
  user1    User   @relation("ConversationUser1", fields: [user1_id], references: [id])
  user2    User   @relation("ConversationUser2", fields: [user2_id], references: [id])

  // Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§
  messages Message[]

  // Ø¢Ø®Ø±ÛŒÙ† Ù¾ÛŒØ§Ù… Ø¨Ø±Ø§ÛŒ performance
  last_message_text String?
  last_message_time DateTime?

  // ÙˆØ¶Ø¹ÛŒØª Ø®ÙˆØ§Ù†Ø¯Ù†
  user1_last_read_at DateTime?
  user2_last_read_at DateTime?

  buy_ad_id String? @db.ObjectId
  buyAd     BuyAd?  @relation(fields: [buy_ad_id], references: [id])
  Offer     Offer[]

  @@unique([user1_id, user2_id])
  @@index([user1_id, updated_at])
  @@index([user2_id, updated_at])
  @@index([updated_at])
  @@map("conversations")
}

enum MessageType {
  // Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø± Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø±
  USER_TO_USER

  // Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ø³ÛŒØ³ØªÙ…ÛŒ (Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù†â€ŒÙ‡Ø§)
  SYSTEM_ORDER
  SYSTEM_OFFER
  SYSTEM_PAYMENT
  SYSTEM_CREDIT
  SYSTEM_PROMOTION

  // Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ
  SUPPORT_TICKET
  SUPPORT_REPLY

  // Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ø§ØªÙˆÙ…Ø§ØªÛŒÚ©
  AUTO_WELCOME
  AUTO_REMINDER
  AUTO_ALERT
}

model Message {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at DateTime @default(now())

  // âœ… Ù…Ø­ØªÙˆØ§ÛŒ ÛŒÚ©Ù¾Ø§Ø±Ú†Ù‡
  title        String? // Ø¨Ø±Ø§ÛŒ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ø³ÛŒØ³ØªÙ…ÛŒ
  content      String
  message_type MessageType @default(USER_TO_USER)

  // âœ… ÙˆØ¶Ø¹ÛŒØª
  is_read Boolean @default(false)

  // âœ… ÙØ±Ø³ØªÙ†Ø¯Ù‡ Ùˆ Ú¯ÛŒØ±Ù†Ø¯Ù‡ ÙˆØ§Ø¶Ø­ - Ø¨Ø§ Ù†Ø§Ù…â€ŒÙ‡Ø§ÛŒ Ù…Ù†Ø­ØµØ±Ø¨Ù‡â€ŒÙØ±Ø¯
  sender_id String? @db.ObjectId
  sender    User?   @relation("UserSentMessages", fields: [sender_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  receiver_id String @db.ObjectId
  receiver    User   @relation("UserReceivedMessages", fields: [receiver_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  // âœ… Ú¯ÙØªÚ¯ÙˆÛŒ Ù…Ø±ØªØ¨Ø· (Ø¨Ø±Ø§ÛŒ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø± Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø±)
  conversation_id String?       @db.ObjectId
  conversation    Conversation? @relation(fields: [conversation_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  // âœ… Ø³ÛŒØ³ØªÙ… Ù¾Ø§Ø³Ø® - Ø§ØµÙ„Ø§Ø­ self-relation
  reply_to_message_id String?   @db.ObjectId
  reply_to_message    Message?  @relation("MessageReplies", fields: [reply_to_message_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  replies             Message[] @relation("MessageReplies")

  // âœ… Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø§Ø¶Ø§ÙÛŒ
  metadata Json? // Ø¨Ø±Ø§ÛŒ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ø³ÛŒØ³ØªÙ…ÛŒ

  // Ø§ÛŒÙ†Ø¯Ú©Ø³â€ŒÙ‡Ø§ÛŒ Ø¨Ù‡ÛŒÙ†Ù‡
  @@index([receiver_id, is_read, created_at])
  @@index([sender_id, created_at])
  @@index([conversation_id, created_at])
  @@index([message_type, created_at])
  @@map("messages")
}

// ==================== ORDER & TRANSACTION MODELS ====================

model Order {
  id           String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at   DateTime @default(now())
  updated_at   DateTime @updatedAt
  order_number String   @unique

  // Ù†ÙˆØ¹ Ø³ÙØ§Ø±Ø´
  order_type OrderType
  status     OrderStatus @default(PENDING)

  // Ú©Ø§Ø±Ø¨Ø± Ù…Ø±ØªØ¨Ø·
  user_id String @db.ObjectId
  user    User   @relation(fields: [user_id], references: [id], onDelete: Cascade)

  // ÙØ±ÙˆØ´Ù†Ø¯Ù‡ (Ø¨Ø±Ø§ÛŒ Ø³ÙØ§Ø±Ø´Ø§Øª Ø®Ø±ÛŒØ¯ Ø§Ø² Ø¯ÛŒÚ¯Ø±Ø§Ù†)
  seller_id String? @db.ObjectId
  seller    User?   @relation("OrderSeller", fields: [seller_id], references: [id])

  // Ø§Ú©Ø§Ù†Øª Ù…Ø±ØªØ¨Ø·
  account_id String?  @db.ObjectId
  account    Account? @relation(fields: [account_id], references: [id], onDelete: Cascade)

  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù…Ø§Ù„ÛŒ
  total_amount    Int
  tax_amount      Int @default(0)
  discount_amount Int @default(0)
  net_amount      Int

  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø±Ø¯Ø§Ø®Øª
  payment_method PaymentMethod?
  paid_at        DateTime?

  // Ù…Ù‡Ù„Øª Ù¾Ø±Ø¯Ø§Ø®Øª
  expires_at DateTime?

  // Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ Ø³ÙØ§Ø±Ø´
  items OrderItem[]

  // ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§ÛŒ Ù¾Ø±Ø¯Ø§Ø®Øª
  transactions Transaction[]

  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø§Ø¶Ø§ÙÛŒ Ø¨Ø± Ø§Ø³Ø§Ø³ Ù†ÙˆØ¹ Ø³ÙØ§Ø±Ø´
  metadata Json?

  // ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ ØªØ³ÙˆÛŒÙ‡
  settled_at           DateTime?
  settlement_reference String?

  // Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ ÙØ¹Ø§Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø§Ø¹ØªØ¨Ø§Ø±ÛŒ
  credit_activities CreditActivity[]

  // Ø§ÛŒÙ†Ø¯Ú©Ø³â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ú¯Ø²Ø§Ø±Ø´â€ŒÚ¯ÛŒØ±ÛŒ
  @@index([status, paid_at])
  @@index([created_at, total_amount])
  @@index([user_id, created_at])
  @@index([seller_id, created_at])
  @@index([order_type, status])
  @@index([status, created_at])
  @@map("orders")
}

model OrderItem {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at DateTime @default(now())
  order_id   String   @db.ObjectId
  order      Order    @relation(fields: [order_id], references: [id], onDelete: Cascade)

  // Ù†ÙˆØ¹ Ø¢ÛŒØªÙ…
  item_type  String
  item_id    String? @db.ObjectId
  item_title String

  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù‚ÛŒÙ…Øª Ùˆ Ù…Ù‚Ø¯Ø§Ø±
  quantity    Int @default(1)
  unit_price  Int
  total_price Int

  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø§Ø¶Ø§ÙÛŒ
  description String?

  // Ø¨Ø±Ø§ÛŒ Ù…Ø­ØµÙˆÙ„Ø§Øª ÙÛŒØ²ÛŒÚ©ÛŒ
  product_id String?  @db.ObjectId
  product    Product? @relation(fields: [product_id], references: [id])

  @@index([order_id])
  @@index([item_type, item_id])
  @@map("order_items")
}

model Transaction {
  id                 String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at         DateTime @default(now())
  updated_at         DateTime @updatedAt
  transaction_number String   @unique

  // ÙˆØ¶Ø¹ÛŒØª ØªØ±Ø§Ú©Ù†Ø´
  status TransactionStatus @default(PENDING)

  // Ø³ÙØ§Ø±Ø´ Ù…Ø±ØªØ¨Ø·
  order_id String @db.ObjectId
  order    Order  @relation(fields: [order_id], references: [id], onDelete: Cascade)

  // Ú©Ø§Ø±Ø¨Ø± Ù…Ø±ØªØ¨Ø·
  user_id String @db.ObjectId
  user    User   @relation(fields: [user_id], references: [id], onDelete: Cascade)

  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù…Ø§Ù„ÛŒ
  amount     Int
  fee        Int    @default(0)
  net_amount Int
  currency   String @default("IRR")

  // Ù†ÙˆØ¹ ØªØ±Ø§Ú©Ù†Ø´
  transaction_type TransactionType

  // Ø±ÙˆØ´ Ù¾Ø±Ø¯Ø§Ø®Øª
  payment_method PaymentMethod?

  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø±Ø¯Ø§Ø®Øª
  gateway_reference String?
  gateway_response  Json?

  // Ø²Ù…Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ù…Ù‡Ù…
  processed_at DateTime?
  completed_at DateTime?

  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø®Ø·Ø§ Ùˆ Ø¨Ø§Ø²Ù¾Ø±Ø¯Ø§Ø®Øª
  error_code    String?
  error_message String?
  refund_amount Int?
  refund_reason String?
  refunded_at   DateTime?

  // ØªØ£ÛŒÛŒØ¯ Ù…Ø¯ÛŒØ±ÛŒØªÛŒ
  verified_by String?
  verified_at DateTime?
  notes       String?

  description String?
  metadata    Json?

  // Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ ØªØ±Ø§Ú©Ù†Ø´ Ø§Ø¹ØªØ¨Ø§Ø±ÛŒ
  credit_transaction CreditTransaction?
  UserPlan           UserPlan[]

  @@index([order_id])
  @@index([user_id, created_at])
  @@index([created_at])
  @@index([transaction_type])
  @@index([status, created_at])
  @@map("transactions")
}

// ==================== CREDIT & ACTIVITY MODELS ====================

model CreditTransaction {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at DateTime @default(now())

  // Ú©Ø§Ø±Ø¨Ø± Ù…Ø±ØªØ¨Ø·
  user_id String @db.ObjectId
  user    User   @relation(fields: [user_id], references: [id], onDelete: Cascade)

  // Ø§Ú©Ø§Ù†Øª Ù…Ø±ØªØ¨Ø·
  account_id String?  @db.ObjectId
  account    Account? @relation(fields: [account_id], references: [id], onDelete: Cascade)

  // Ù…Ø­ØµÙˆÙ„ Ù…Ø±ØªØ¨Ø·
  product_id String?  @db.ObjectId
  product    Product? @relation(fields: [product_id], references: [id], onDelete: Cascade)

  // ØªØ±Ø§Ú©Ù†Ø´ Ø§ØµÙ„ÛŒ Ù…Ø±ØªØ¨Ø·
  transaction_id String?      @unique @db.ObjectId
  transaction    Transaction? @relation(fields: [transaction_id], references: [id])

  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªØ±Ø§Ú©Ù†Ø´ Ø§Ø¹ØªØ¨Ø§Ø±ÛŒ
  amount        Int
  balance_after Int
  activity_type String
  quantity      Int?
  description   String?

  // Ù†ÙˆØ¹ ØªØ±Ø§Ú©Ù†Ø´ Ø§Ø¹ØªØ¨Ø§Ø±ÛŒ
  credit_transaction_type TransactionType  @default(DEBIT)
  credit_activities       CreditActivity[]

  @@index([user_id, created_at])
  @@index([account_id, created_at])
  @@index([activity_type])
  @@map("credit_transactions")
}

model CreditActivity {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at DateTime @default(now())

  // Ú©Ø§Ø±Ø¨Ø± Ø§Ù†Ø¬Ø§Ù… Ø¯Ù‡Ù†Ø¯Ù‡
  user_id String @db.ObjectId
  user    User   @relation(fields: [user_id], references: [id], onDelete: Cascade)

  // Ø§Ú©Ø§Ù†Øª Ù…Ø±ØªØ¨Ø·
  account_id String?  @db.ObjectId
  account    Account? @relation(fields: [account_id], references: [id], onDelete: Cascade)

  // Ù…Ø­ØµÙˆÙ„ Ù…Ø±ØªØ¨Ø·
  product_id String?  @db.ObjectId
  product    Product? @relation(fields: [product_id], references: [id], onDelete: Cascade)

  // Ø³ÙØ§Ø±Ø´ Ù…Ø±ØªØ¨Ø·
  order_id String? @db.ObjectId
  order    Order?  @relation(fields: [order_id], references: [id], onDelete: Cascade)

  // Ø¢Ú¯Ù‡ÛŒ Ø®Ø±ÛŒØ¯ Ù…Ø±ØªØ¨Ø·
  buy_ad_id String? @db.ObjectId
  buy_ad    BuyAd?  @relation(fields: [buy_ad_id], references: [id], onDelete: Cascade)

  // ØªØ±Ø§Ú©Ù†Ø´ Ø§Ø¹ØªØ¨Ø§Ø±ÛŒ Ù…Ø±ØªØ¨Ø·
  credit_transaction_id String?            @db.ObjectId
  credit_transaction    CreditTransaction? @relation(fields: [credit_transaction_id], references: [id], onDelete: Cascade)

  // Ù†ÙˆØ¹ ÙØ¹Ø§Ù„ÛŒØª
  activity_type CreditActivityType

  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª ÙØ¹Ø§Ù„ÛŒØª
  quantity     Int                  @default(1)
  unit_price   Int
  total_cost   Int
  user_plan_id String?              @db.ObjectId
  user_plan    UserPlan?            @relation(fields: [user_plan_id], references: [id], onDelete: Cascade)
  // ÙˆØ¶Ø¹ÛŒØª
  status       CreditActivityStatus @default(PENDING)

  @@index([user_id, created_at])
  @@index([account_id, created_at])
  @@index([order_id])
  @@index([activity_type])
  @@index([status])
  @@map("credit_activities")
}

model AccountUserActivity {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at DateTime @default(now())

  // ğŸ”¥ Ù…ØªÙ…Ø±Ú©Ø² Ø¨Ø± AccountUser
  account_user_id String      @db.ObjectId
  account_user    AccountUser @relation(fields: [account_user_id], references: [id], onDelete: Cascade)

  // Ù†ÙˆØ¹ ÙØ¹Ø§Ù„ÛŒØª
  activity_type UserActivityType

  // Ù‡Ø¯Ù ÙØ¹Ø§Ù„ÛŒØª
  target_type String?
  target_id   String? @db.ObjectId

  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù…Ø®ØªØµØ± Ùˆ Ù…ÙÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ø´Ø®ØµÛŒâ€ŒØ³Ø§Ø²ÛŒ
  metadata Json?

  // ÙˆØ²Ù† ÙØ¹Ø§Ù„ÛŒØª
  weight Int @default(1)

  // Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ù…Ø­ØµÙˆÙ„
  product_id String?  @db.ObjectId
  product    Product? @relation(fields: [product_id], references: [id], onDelete: Cascade)

  @@index([account_user_id, created_at])
  @@index([activity_type, created_at])
  @@index([target_type, target_id])
  @@map("account_user_activities")
}

model AccountUserBehavior {
  id              String      @id @default(auto()) @map("_id") @db.ObjectId
  account_user_id String      @unique @db.ObjectId
  account_user    AccountUser @relation(fields: [account_user_id], references: [id], onDelete: Cascade)
  updated_at      DateTime    @updatedAt

  // Ø¹Ù„Ø§Ù‚Ù‡â€ŒÙ…Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø§ÛŒÙ† Ú©Ø§Ø±Ø¨Ø± Ø¯Ø± Ø§ÛŒÙ† Ø§Ú©Ø§Ù†Øª
  interests Json?

  // Ø§Ù„Ú¯ÙˆÙ‡Ø§ÛŒ Ø¬Ø³ØªØ¬ÙˆÛŒ Ø§ÛŒÙ† Ú©Ø§Ø±Ø¨Ø± Ø¯Ø± Ø§ÛŒÙ† Ø§Ú©Ø§Ù†Øª
  search_patterns Json?

  // ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ù…Ø®ØªØµØ± Ø§ÛŒÙ† Ú©Ø§Ø±Ø¨Ø± Ø¯Ø± Ø§ÛŒÙ† Ø§Ú©Ø§Ù†Øª
  recent_searches String[]
  recent_views    String[]
  recent_saves    String[]

  // Ø¢Ù…Ø§Ø± Ø³Ø±ÛŒØ¹ Ø§ÛŒÙ† Ú©Ø§Ø±Ø¨Ø± Ø¯Ø± Ø§ÛŒÙ† Ø§Ú©Ø§Ù†Øª
  total_searches Int       @default(0)
  total_views    Int       @default(0)
  total_saves    Int       @default(0)
  last_active    DateTime?

  @@index([updated_at])
  @@map("account_user_behaviors")
}

//*****************************Ø¬Ø¯ÛŒØ¯***************************

enum InventoryStatus {
  ACTIVE
  INACTIVE
  EXPIRED
  DAMAGED
  QUARANTINE
}

enum ShippingSize {
  SMALL_PARCEL // Ø¨Ø³ØªÙ‡ Ú©ÙˆÚ†Ú© (Ù¾Ø³Øª - ØªØ§ Û³Û° Ú©ÛŒÙ„Ùˆ)
  MEDIUM_CARGO // Ø¨Ø§Ø± Ù…ØªÙˆØ³Ø· (Ø¨Ø§Ø±Ø¨Ø±ÛŒ - Û³Û°-Û±Û°Û°Û° Ú©ÛŒÙ„Ùˆ)
  LARGE_SHIPMENT // Ù…Ø­Ù…ÙˆÙ„Ù‡ Ø¨Ø²Ø±Ú¯ (Ú©Ø§Ù…ÛŒÙˆÙ† - Û±-Û±Û° ØªÙ†)
  BULK_CARGO // ÙÙ„Ù‡ (ØªØ±ÛŒÙ„ÛŒ - Û±Û°+ ØªÙ†)
}

enum ShippingPricingType {
  FIXED // Ø«Ø§Ø¨Øª
  WEIGHT_BASED // Ø¨Ø± Ø§Ø³Ø§Ø³ ÙˆØ²Ù†
  DISTANCE_BASED // Ø¨Ø± Ø§Ø³Ø§Ø³ Ù…Ø³Ø§ÙØª
  ROUTE_BASED // Ø¨Ø± Ø§Ø³Ø§Ø³ Ù…Ø³ÛŒØ± Ø«Ø§Ø¨Øª
  NEGOTIABLE // Ù‚Ø§Ø¨Ù„ Ù…Ø°Ø§Ú©Ø±Ù‡
}

enum AnalysisPeriod {
  DAILY
  WEEKLY
  MONTHLY
  QUARTERLY
}

// ğŸ—ï¸ Ù…Ø¯Ù„ Ø§Ù†Ø¨Ø§Ø± Ùˆ Ù…ÙˆØ¬ÙˆØ¯ÛŒ
model Warehouse {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  // ğŸ”— Ù…ØªØ¹Ù„Ù‚ Ø¨Ù‡ Ú©Ø¯Ø§Ù… Ø§Ú©Ø§Ù†Øª
  account_id String  @db.ObjectId
  account    Account @relation(fields: [account_id], references: [id], onDelete: Cascade)

  // ğŸ¢ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø§Ù†Ø¨Ø§Ø±
  name        String // "Ø§Ù†Ø¨Ø§Ø± Ù…Ø±Ú©Ø²ÛŒ ØªÙ‡Ø±Ø§Ù†", "Ø§Ù†Ø¨Ø§Ø± ØºØ±Ø¨ Ú©Ø´ÙˆØ±"
  code        String? // Ú©Ø¯ Ø§Ù†Ø¨Ø§Ø±
  description String?

  // ğŸ“ Ù„ÙˆÚ©ÛŒØ´Ù† - Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø±ÙˆØ§Ø¨Ø·
  location_level_1_id String? @db.ObjectId
  location_level_2_id String? @db.ObjectId
  location_level_3_id String? @db.ObjectId
  location_level_4_id String? @db.ObjectId

  // âœ… Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø±ÙˆØ§Ø¨Ø· Location Ø¨Ø§ Ù†Ø§Ù…â€ŒÙ‡Ø§ÛŒ Ù…Ù†Ø­ØµØ±Ø¨Ù‡â€ŒÙØ±Ø¯
  location_level_1 Location? @relation("WarehouseLocationLevel1", fields: [location_level_1_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  location_level_2 Location? @relation("WarehouseLocationLevel2", fields: [location_level_2_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  location_level_3 Location? @relation("WarehouseLocationLevel3", fields: [location_level_3_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  location_level_4 Location? @relation("WarehouseLocationLevel4", fields: [location_level_4_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  address String?
  phone   String?

  // ğŸ“Š Ù…Ø´Ø®ØµØ§Øª ÙÛŒØ²ÛŒÚ©ÛŒ
  total_capacity         Int? // Ø¸Ø±ÙÛŒØª Ú©Ù„ÛŒ
  used_capacity          Int? // Ø¸Ø±ÙÛŒØª Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´Ø¯Ù‡
  temperature_controlled Boolean @default(false) // ÛŒØ®Ú†Ø§Ù„ Ø¯Ø§Ø±

  // ğŸ”§ ÙˆØ¶Ø¹ÛŒØª
  is_active  Boolean @default(true)
  is_primary Boolean @default(false) // Ø§Ù†Ø¨Ø§Ø± Ø§ØµÙ„ÛŒ

  // ğŸ”— Ø§Ø±ØªØ¨Ø§Ø·Ø§Øª
  inventories      Inventory[]
  Product          Product?           @relation(fields: [productId], references: [id])
  productId        String?            @db.ObjectId
  WarehouseContent WarehouseContent[]

  @@index([account_id])
  @@index([location_level_1_id])
  @@index([location_level_2_id])
  @@index([location_level_3_id])
  @@index([location_level_4_id])
  @@index([is_active, is_primary])
  @@map("warehouses")
}

// ğŸ“Š Ù…Ø¯Ù„ ØªØ­Ù„ÛŒÙ„ Ø¨Ø§Ø²Ø§Ø±
model MarketAnalytics {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  // ğŸ”— Ø­ÙˆØ²Ù‡ ØªØ­Ù„ÛŒÙ„
  industry_id String?   @db.ObjectId
  industry    Industry? @relation(fields: [industry_id], references: [id])

  category_id String?   @db.ObjectId
  category    Category? @relation(fields: [category_id], references: [id])

  product_id String?  @db.ObjectId
  product    Product? @relation(fields: [product_id], references: [id])

  // ğŸ“… Ø¨Ø§Ø²Ù‡ Ø²Ù…Ø§Ù†ÛŒ ØªØ­Ù„ÛŒÙ„
  period_start DateTime
  period_end   DateTime
  period_type  AnalysisPeriod @default(DAILY)

  // ğŸ“ˆ Ø´Ø§Ø®Øµâ€ŒÙ‡Ø§ÛŒ Ú©Ù„ÛŒØ¯ÛŒ Ø¨Ø§Ø²Ø§Ø±
  // Ù‚ÛŒÙ…Øªâ€ŒÙ‡Ø§
  avg_price   Float // Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ù‚ÛŒÙ…Øª
  min_price   Float // Ú©Ù…ØªØ±ÛŒÙ† Ù‚ÛŒÙ…Øª
  max_price   Float // Ø¨ÛŒØ´ØªØ±ÛŒÙ† Ù‚ÛŒÙ…Øª
  price_trend Float // Ø±ÙˆÙ†Ø¯ Ù‚ÛŒÙ…Øª (-Û±Û° ØªØ§ +Û±Û°)

  // Ø­Ø¬Ù… Ø¨Ø§Ø²Ø§Ø±
  total_listings Int // ØªØ¹Ø¯Ø§Ø¯ Ú©Ù„ Ø¢Ú¯Ù‡ÛŒâ€ŒÙ‡Ø§
  new_listings   Int // Ø¢Ú¯Ù‡ÛŒâ€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯
  sold_listings  Int // Ø¢Ú¯Ù‡ÛŒâ€ŒÙ‡Ø§ÛŒ ÙØ±ÙˆØ®ØªÙ‡ Ø´Ø¯Ù‡

  // Ø´Ø§Ø®Øµâ€ŒÙ‡Ø§ÛŒ ØªØ¹Ø§Ù…Ù„
  avg_views_per_listing Float // Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ø¨Ø§Ø²Ø¯ÛŒØ¯ per Ø¢Ú¯Ù‡ÛŒ
  avg_response_rate     Float // Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ù†Ø±Ø® Ù¾Ø§Ø³Ø®Ú¯ÙˆÛŒÛŒ

  // Ø´Ø§Ø®Øµ Ø¹Ø±Ø¶Ù‡ Ùˆ ØªÙ‚Ø§Ø¶Ø§
  demand_supply_ratio Float // Ù†Ø³Ø¨Øª ØªÙ‚Ø§Ø¶Ø§ Ø¨Ù‡ Ø¹Ø±Ø¶Ù‡ (>Û± = ØªÙ‚Ø§Ø¶Ø§ Ø¨ÛŒØ´ØªØ±)

  // ğŸ”¥ ØªØ­Ù„ÛŒÙ„ Ù‚ÛŒÙ…Øª Ø¨Ø± Ø§Ø³Ø§Ø³ Ø´Ø±Ø§ÛŒØ· Ù…Ø®ØªÙ„Ù
  price_analysis_by_conditions Json // ØªØ­Ù„ÛŒÙ„ Ú†Ù†Ø¯Ø¨Ø¹Ø¯ÛŒ Ù‚ÛŒÙ…Øª

  // Ù…Ø«Ø§Ù„ Ù…Ø­ØªÙˆØ§ÛŒ price_analysis_by_conditions:
  // {
  //   "QUANTITY_BASED": {
  //     "1-10": { avg_price: 50000, min_price: 48000, max_price: 52000, acceptance_rate: 0.75 },
  //     "11-50": { avg_price: 45000, min_price: 43000, max_price: 47000, acceptance_rate: 0.82 }
  //   },
  //   "PAYMENT_BASED": {
  //     "CASH_PAYMENT": { avg_price: 45000, discount_rate: 0.10, popularity: 0.65 },
  //     "CREDIT_60D": { avg_price: 50000, premium_rate: 0.11, popularity: 0.25 }
  //   }
  // }

  // ğŸ“Š Ø±ÙˆÙ†Ø¯Ù‡Ø§
  trending_up_products   String[] // Ù…Ø­ØµÙˆÙ„Ø§Øª Ø¯Ø± Ø­Ø§Ù„ Ø±Ø´Ø¯
  trending_down_products String[] // Ù…Ø­ØµÙˆÙ„Ø§Øª Ø¯Ø± Ø­Ø§Ù„ Ø§ÙØª

  // ğŸ’¡ ØªÙˆØµÛŒÙ‡â€ŒÙ‡Ø§ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯
  pricing_recommendations Json // Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯Ø§Øª Ù‚ÛŒÙ…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ

  // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø´Ø¯Ù‡
  market_activity_index Float // Ø´Ø§Ø®Øµ Ú©Ù„ÛŒ ÙØ¹Ø§Ù„ÛŒØª Ø¨Ø§Ø²Ø§Ø± (Û°-Û±Û°Û°)
  Account               Account? @relation(fields: [accountId], references: [id])
  accountId             String?  @db.ObjectId

  @@index([industry_id, period_start])
  @@index([category_id, period_start])
  @@index([product_id, period_start])
  @@index([period_type, period_start])
  @@map("market_analytics")
}

//#######################################################################################################

model WarehouseContent {
  id           String    @id @default(auto()) @map("_id") @db.ObjectId
  warehouse_id String    @db.ObjectId
  warehouse    Warehouse @relation(fields: [warehouse_id], references: [id], onDelete: Cascade)
  language     Language

  name        String // "Ø§Ù†Ø¨Ø§Ø± Ù…Ø±Ú©Ø²ÛŒ ØªÙ‡Ø±Ø§Ù†" â†’ "Tehran Central Warehouse"
  description String?
  address     String? // Ø¢Ø¯Ø±Ø³ Ø¨Ù‡ Ø²Ø¨Ø§Ù† Ù…Ø®ØªÙ„Ù

  auto_translated Boolean @default(true)

  @@unique([warehouse_id, language])
}

model Inventory {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  // ğŸ”— Ø±Ø§Ø¨Ø·Ù‡ Ø¨Ø§ Ù…Ø­ØµÙˆÙ„ Ùˆ Ø§Ù†Ø¨Ø§Ø±
  product_id String  @db.ObjectId
  product    Product @relation(fields: [product_id], references: [id], onDelete: Cascade)

  warehouse_id String?    @db.ObjectId // Ø§Ø®ØªÛŒØ§Ø±ÛŒ - Ø¨Ø±Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ù¾ÛŒØ´Ø±ÙØªÙ‡
  warehouse    Warehouse? @relation(fields: [warehouse_id], references: [id], onDelete: Cascade)

  // ğŸ“Š Ù…ÙˆØ¬ÙˆØ¯ÛŒ
  quantity          Int // Ù…ÙˆØ¬ÙˆØ¯ÛŒ ÙÛŒØ²ÛŒÚ©ÛŒ
  reserved_quantity Int @default(0) // Ø¨Ø±Ø§ÛŒ Ø³ÙØ§Ø±Ø´Ø§Øª Ø±Ø²Ø±Ùˆ Ø´Ø¯Ù‡

  // ğŸ·ï¸ Ø§Ø·Ù„Ø§Ø¹Ø§Øª batch
  batch_number    String? // Ø´Ù…Ø§Ø±Ù‡ Ø¨Ú†
  expiry_date     DateTime? // ØªØ§Ø±ÛŒØ® Ø§Ù†Ù‚Ø¶Ø§
  production_date DateTime? // ØªØ§Ø±ÛŒØ® ØªÙˆÙ„ÛŒØ¯

  // ğŸ’° Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù…Ø§Ù„ÛŒ
  cost_price   Int? // Ù‚ÛŒÙ…Øª ØªÙ…Ø§Ù… Ø´Ø¯Ù‡
  average_cost Int? // Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ù‚ÛŒÙ…Øª ØªÙ…Ø§Ù… Ø´Ø¯Ù‡

  // ğŸ“ location Ø¯Ø± Ø§Ù†Ø¨Ø§Ø±
  location_code   String? // "A-12-3" - Ú©Ø¯ Ù…Ø­Ù„ Ø¯Ø± Ø§Ù†Ø¨Ø§Ø±
  shelf_life_days Int? // Ø¹Ù…Ø± Ù…ÙÛŒØ¯ (Ø±ÙˆØ²)

  // ğŸ”§ ÙˆØ¶Ø¹ÛŒØª
  status          InventoryStatus @default(ACTIVE)
  last_stock_take DateTime? // Ø¢Ø®Ø±ÛŒÙ† Ø²Ù…Ø§Ù† Ø§Ù†Ø¨Ø§Ø±Ú¯Ø±Ø¯Ø§Ù†ÛŒ

  @@unique([product_id, warehouse_id, batch_number]) // Ù‡Ø± Ø¨Ú† Ù…Ù†Ø­ØµØ± Ø¨ÙØ±Ø¯
  @@index([product_id])
  @@index([warehouse_id])
  @@index([expiry_date])
  @@index([status])
  @@map("product_inventories") // âœ… ØªØºÛŒÛŒØ± Ø¨Ù‡ Ù†Ø§Ù… Ù…Ù†Ø­ØµØ±Ø¨Ù‡â€ŒÙØ±Ø¯
}

// ğŸšš Ù…Ø¯Ù„ Ø­Ù…Ù„â€ŒÙˆÙ†Ù‚Ù„ (Ø¨Ø±Ø§ÛŒ Ø¢ÛŒÙ†Ø¯Ù‡)
model ShippingMethod {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  // ğŸ“Š Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø­Ø¬Ù… Ù…Ø­Ù…ÙˆÙ„Ù‡
  shipment_size ShippingSize

  // ğŸ’° Ù…Ø¯Ù„ Ù‚ÛŒÙ…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ
  pricing_type ShippingPricingType
  base_cost    Int? // Ù‡Ø²ÛŒÙ†Ù‡ Ù¾Ø§ÛŒÙ‡
  cost_per_kg  Int? // Ø¨Ù‡ Ø§Ø²Ø§ÛŒ Ù‡Ø± Ú©ÛŒÙ„Ùˆ
  cost_per_km  Int? // Ø¨Ù‡ Ø§Ø²Ø§ÛŒ Ù‡Ø± Ú©ÛŒÙ„ÙˆÙ…ØªØ±
  fixed_routes Json? // Ù…Ø³ÛŒØ±Ù‡Ø§ÛŒ Ø«Ø§Ø¨Øª

  // ğŸ“¦ Ù…Ø­Ø¯ÙˆØ¯ÛŒØªâ€ŒÙ‡Ø§
  min_weight_kg    Float?
  max_weight_kg    Float?
  dimensions_limit String? // "200x200x200cm"

  // ğŸ—ºï¸ Ù¾ÙˆØ´Ø´
  covered_provinces String[]
  covered_cities    String[]
  excluded_areas    String[]

  // â° Ø²Ù…Ø§Ù† ØªØ­ÙˆÛŒÙ„
  min_days Int
  max_days Int

  is_active Boolean @default(true)

  contents ShippingMethodContent[]

  @@index([shipment_size])
  @@index([pricing_type])
  @@index([is_active])
  @@map("shipping_methods")
}

model ShippingMethodContent {
  id                 String         @id @default(auto()) @map("_id") @db.ObjectId
  shipping_method_id String         @db.ObjectId
  shipping_method    ShippingMethod @relation(fields: [shipping_method_id], references: [id], onDelete: Cascade)
  language           Language

  // ğŸ·ï¸ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø§ÛŒÙ‡
  name        String // "Ø¨Ø§Ø±Ø¨Ø±ÛŒ ØªÙ‡Ø±Ø§Ù†", "Ù¾Ø³Øª Ù¾ÛŒØ´ØªØ§Ø²", "Ú©Ø§Ù…ÛŒÙˆÙ† Û±Û° Ú†Ø±Ø®"
  description String?

  auto_translated Boolean @default(true)

  @@unique([shipping_method_id, language])
}
