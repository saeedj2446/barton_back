# Wholesale Marketplace Backend

A professional NestJS backend application for a wholesale marketplace with comprehensive user management, profile creation, ad posting, and commenting system.
Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯Ù‡ Ùˆ Ø¯Ù„Ø§ÛŒÙ„ Ø¶Ø±ÙˆØ±ÛŒ Ø¨ÙˆØ¯Ù† Ø¢Ù†Ù‡Ø§:

ğŸ—„ï¸ Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ù…Ù„Ø§Ù‹ Ø¬Ø¯ÛŒØ¯:
1. Catalog - Ú©Ø§ØªØ§Ù„ÙˆÚ¯ Ù…Ø­ØµÙˆÙ„Ø§Øª
   Ø¯Ù„ÛŒÙ„:

Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø«Ø§Ø¨Øª Ù…Ø­ØµÙˆÙ„Ø§Øª (Ø¨Ø±Ù†Ø¯ØŒ Ù…Ø¯Ù„ØŒ Ù…Ø´Ø®ØµØ§Øª ÙÙ†ÛŒ)

Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² ØªÚ©Ø±Ø§Ø± Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø¨Ø±Ø§ÛŒ Ù…Ø­ØµÙˆÙ„Ø§Øª ÛŒÚ©Ø³Ø§Ù†

Ø§Ù…Ú©Ø§Ù† Ù…Ù‚Ø§ÛŒØ³Ù‡ Ù‚ÛŒÙ…Øª Ú†Ù†Ø¯ ÙØ±ÙˆØ´Ù†Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ ÛŒÚ© Ú©Ø§Ù„Ø§

2. SaleUnit - ÙˆØ§Ø­Ø¯Ù‡Ø§ÛŒ Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯ ÙØ±ÙˆØ´
   Ø¯Ù„ÛŒÙ„:

ØªØ¹Ø±ÛŒÙ ÙˆØ§Ø­Ø¯Ù‡Ø§ÛŒ Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯ Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ù…Ø­ØµÙˆÙ„ (Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…ØŒ ØªÙ†ØŒ Ø¨Ø³ØªÙ‡ØŒ Ù¾Ø§Ù„Øª)

Ø§Ù…Ú©Ø§Ù† Ù…Ù‚Ø§ÛŒØ³Ù‡ Ù‚ÛŒÙ…Øª Ø¯Ø± Ø´Ø±Ø§ÛŒØ· ÛŒÚ©Ø³Ø§Ù†

ØªØ¨Ø¯ÛŒÙ„ Ø®ÙˆØ¯Ú©Ø§Ø± ÙˆØ§Ø­Ø¯Ù‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù

3. CatalogTechSpecs - Ù…Ø´Ø®ØµØ§Øª ÙÙ†ÛŒ
   Ø¯Ù„ÛŒÙ„:

Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ Ù…Ø´Ø®ØµØ§Øª Ø¹Ø¯Ø¯ÛŒ Ø¨Ø±Ø§ÛŒ Ø¬Ø³ØªØ¬ÙˆÛŒ Ø³Ø±ÛŒØ¹ (RAMØŒ Ø­Ø§ÙØ¸Ù‡ØŒ ÙˆØ²Ù†)

Ø§Ù…Ú©Ø§Ù† ÙÛŒÙ„ØªØ± Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø±Ù†Ø¬ Ø¹Ø¯Ø¯ÛŒ

Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ performance Ø¨Ø±Ø§ÛŒ Ø¬Ø³ØªØ¬Ùˆ

4. CatalogAttribute - ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ú¯Ø±ÙˆÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø´Ø¯Ù‡
   Ø¯Ù„ÛŒÙ„:

Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø¯Ø§ÛŒÙ†Ø§Ù…ÛŒÚ© Ù…Ø­ØµÙˆÙ„Ø§Øª

Ø§Ù†Ø¹Ø·Ø§Ùâ€ŒÙ¾Ø°ÛŒØ±ÛŒ Ø¨Ø±Ø§ÛŒ Ù…Ø­ØµÙˆÙ„Ø§Øª Ø¨Ø§ ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù

Ø³Ø§Ø²Ù…Ø§Ù†Ø¯Ù‡ÛŒ Ø¨Ù‡ØªØ± Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§

5. SellingProfile - Ù¾Ø±ÙˆÙØ§ÛŒÙ„ ÙØ±ÙˆØ´
   Ø¯Ù„ÛŒÙ„:

Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ Ø´Ø±Ø§ÛŒØ· Ù¾ÛŒØ´â€ŒÙØ±Ø¶ ÙØ±ÙˆØ´ Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ú©Ø³Ø¨â€ŒÙˆÚ©Ø§Ø±

Ú©Ø§Ù‡Ø´ ÙˆØ±ÙˆØ¯ÛŒ Ø¯Ø§Ø¯Ù‡ ØªÙˆØ³Ø· Ú©Ø§Ø±Ø¨Ø±Ø§Ù†

ÛŒÚ©Ù¾Ø§Ø±Ú†Ú¯ÛŒ Ø¯Ø± Ø´Ø±Ø§ÛŒØ· ÙØ±ÙˆØ´

6. ProductOverride - Ø´Ø±Ø§ÛŒØ· Ø®Ø§Øµ Ù…Ø­ØµÙˆÙ„Ø§Øª
   Ø¯Ù„ÛŒÙ„:

Ø§Ù…Ú©Ø§Ù† Ø§Ø³ØªØ«Ù†Ø§ Ù‚Ø§Ø¦Ù„ Ø´Ø¯Ù† Ø¨Ø±Ø§ÛŒ Ù…Ø­ØµÙˆÙ„Ø§Øª Ø®Ø§Øµ

Ø§Ù†Ø¹Ø·Ø§Ù Ø¯Ø± Ø´Ø±Ø§ÛŒØ· ÙØ±ÙˆØ´ Ø¨Ø¯ÙˆÙ† Ø§Ø² Ø¯Ø³Øª Ø¯Ø§Ø¯Ù† ÛŒÚ©Ù¾Ø§Ø±Ú†Ú¯ÛŒ

Ù…Ø¯ÛŒØ±ÛŒØª Ø´Ø±Ø§ÛŒØ· ÙˆÛŒÚ˜Ù‡ Ø¨Ø±Ø§ÛŒ Ù…Ø­ØµÙˆÙ„Ø§Øª Ø®Ø§Øµ

ğŸ”„ ØªØºÛŒÛŒØ±Ø§Øª Ø¯Ø± Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ¬ÙˆØ¯:
1. Product - Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯Ù† ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯
   ØªØºÛŒÛŒØ±Ø§Øª:

catalog_id - Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ú©Ø§ØªØ§Ù„ÙˆÚ¯

available_units - ÙˆØ§Ø­Ø¯Ù‡Ø§ÛŒ Ù‚Ø§Ø¨Ù„ ÙØ±ÙˆØ´

unit_prices - Ù‚ÛŒÙ…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ Ø¨Ø±Ø§ÛŒ ÙˆØ§Ø­Ø¯Ù‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù

Ø´Ø±Ø§ÛŒØ· ÙØ±ÙˆØ´ (payment_terms, delivery_methods, ...)

Ø¯Ù„ÛŒÙ„: ÛŒÚ©Ù¾Ø§Ø±Ú†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø§ Ø³ÛŒØ³ØªÙ… Ú©Ø§ØªØ§Ù„ÙˆÚ¯ Ùˆ Ø´Ø±Ø§ÛŒØ· ÙØ±ÙˆØ´

2. Category - Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯Ù† Ø±Ø§Ø¨Ø·Ù‡ Ø¨Ø§ Catalog
   ØªØºÛŒÛŒØ±Ø§Øª:

catalogs Catalog[] - Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ú©Ø§ØªØ§Ù„ÙˆÚ¯

Ø¯Ù„ÛŒÙ„: Ø³Ø§Ø²Ù…Ø§Ù†Ø¯Ù‡ÛŒ Ù…Ø­ØµÙˆÙ„Ø§Øª Ø¯Ø± Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§

3. Account - Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯Ù† Ø±Ø§Ø¨Ø·Ù‡ Ø¨Ø§ SellingProfile
   ØªØºÛŒÛŒØ±Ø§Øª:

selling_profile SellingProfile? - Ù¾Ø±ÙˆÙØ§ÛŒÙ„ ÙØ±ÙˆØ´

Ø¯Ù„ÛŒÙ„: Ø§Ø±ØªØ¨Ø§Ø· Ú©Ø³Ø¨â€ŒÙˆÚ©Ø§Ø± Ø¨Ø§ Ø´Ø±Ø§ÛŒØ· ÙØ±ÙˆØ´ Ù¾ÛŒØ´â€ŒÙØ±Ø¶

ğŸ¯ Ø¯Ù„Ø§ÛŒÙ„ Ú©Ù„ÛŒØ¯ÛŒ Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† ØªØºÛŒÛŒØ±Ø§Øª:
Û±. Ø§Ù…Ú©Ø§Ù† Ù…Ù‚Ø§ÛŒØ³Ù‡ Ù‚ÛŒÙ…Øª Ù‡ÙˆØ´Ù…Ù†Ø¯:
typescript
// Ú©Ø§Ø±Ø¨Ø± Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ù…Ù‚Ø§ÛŒØ³Ù‡ Ú©Ù†Ø¯:
"Ø³ÛŒÙ…Ø§Ù† Ù¾Ø±ØªÙ„Ù†Ø¯" Ø¯Ø± "ØªÙ‡Ø±Ø§Ù†" Ø¨Ø§ "Ù¾Ø±Ø¯Ø§Ø®Øª Ù†Ù‚Ø¯ÛŒ" Ùˆ "ØªØ­ÙˆÛŒÙ„ Ø¨Ø§Ø±Ø¨Ø±ÛŒ"
Û². Ú©Ø§Ù‡Ø´ ÙˆØ±ÙˆØ¯ÛŒ Ø¯Ø§Ø¯Ù‡ ØªÙˆØ³Ø· Ú©Ø§Ø±Ø¨Ø±:
ÙØ±ÙˆØ´Ù†Ø¯Ù‡ ÙÙ‚Ø· Ù‚ÛŒÙ…Øª Ùˆ Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ù…ÛŒâ€ŒÚ©Ù†Ø¯

Ø´Ø±Ø§ÛŒØ· Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ø¨Ù‡ ØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± Ø§Ø¹Ù…Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯

Û³. ÛŒÚ©Ù¾Ø§Ø±Ú†Ú¯ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§:
Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² ØªÚ©Ø±Ø§Ø± Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù…Ø­ØµÙˆÙ„Ø§Øª

Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯Ø³Ø§Ø²ÛŒ ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ Ùˆ ÙˆØ§Ø­Ø¯Ù‡Ø§

Û´. ÙÛŒÙ„ØªØ±Ù‡Ø§ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡:
ÙÛŒÙ„ØªØ± Ø¨Ø± Ø§Ø³Ø§Ø³ ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ ÙÙ†ÛŒ

ÙÛŒÙ„ØªØ± Ø¨Ø± Ø§Ø³Ø§Ø³ Ø´Ø±Ø§ÛŒØ· ÙØ±ÙˆØ´

ÙÛŒÙ„ØªØ± Ø¨Ø± Ø§Ø³Ø§Ø³ ÙˆØ§Ø­Ø¯Ù‡Ø§ÛŒ Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯

Ûµ. Ù…Ù‚ÛŒØ§Ø³â€ŒÙ¾Ø°ÛŒØ±ÛŒ:
Ø¢Ù…Ø§Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ features Ø¢ÛŒÙ†Ø¯Ù‡ Ù…Ø§Ù†Ù†Ø¯:

Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù‡ÙˆØ´Ù…Ù†Ø¯

ØªØ­Ù„ÛŒÙ„ Ø¨Ø§Ø²Ø§Ø±

Ù‡Ø´Ø¯Ø§Ø± Ù‚ÛŒÙ…Øª

Ø§ÛŒÙ† ØªØºÛŒÛŒØ±Ø§Øª Ø³ÛŒØ³ØªÙ… Ø´Ù…Ø§ Ø±Ø§ Ø§Ø² ÛŒÚ© Ù¾Ù„ØªÙØ±Ù… Ø³Ø§Ø¯Ù‡ ØªØ¨Ù„ÛŒØºØ§Øª Ø¨Ù‡ ÛŒÚ© Ù¾Ù„ØªÙØ±Ù… B2B Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ ØªØ¨Ø¯ÛŒÙ„ Ù…ÛŒâ€ŒÚ©Ù†Ø¯! ğŸš€
## Features

- **User Management**: Registration, authentication, profile management
- **Profile System**: Multiple profiles per user with business information
- **Ad Management**: Create, update, delete ads with file attachments
- **Comment System**: Nested comments and replies on ads
- **File Management**: Upload, download, and manage files
- **Admin Panel**: Complete admin control over all entities
- **Security**: JWT authentication, role-based access control
- **API Documentation**: Swagger/OpenAPI documentation

## Tech Stack

- **Framework**: NestJS with Fastify
- **Database**: PostgreSQL with Prisma ORM
- **Authentication**: JWT with Passport
- **Documentation**: Swagger/OpenAPI
- **File Upload**: Multer
- **Validation**: class-validator

## Quick Start

### Prerequisites

- Node.js 18+
- PostgreSQL
- npm or yarn

### Installation

1. Clone the repository
2. Install dependencies:
   \`\`\`bash
   npm install
   \`\`\`

3. Set up environment variables:
   \`\`\`bash
   cp .env.example .env
   \`\`\`
   Update the `.env` file with your database credentials and JWT secret.

4. Set up the database:
   \`\`\`bash
   npm run prisma:generate
   npm run prisma:push
   \`\`\`

5. Start the development server:
   \`\`\`bash
   npm run start:dev
   \`\`\`

The API will be available at `http://localhost:3011`
API documentation at `http://localhost:3011/api`

### Docker Setup

\`\`\`bash
docker-compose up -d
\`\`\`

## API Endpoints

### Authentication
- `POST /auth/register` - User registration
- `POST /auth/login` - User login

### Users
- `GET /users` - Get all users (Admin)
- `GET /users/profile` - Get current user profile
- `PATCH /users/:id` - Update user
- `DELETE /users/:id` - Delete user

### Profiles
- `POST /profiles` - Create profile
- `GET /profiles` - Get all profiles
- `GET /profiles/my-profiles` - Get current user profiles
- `GET /profiles/:id` - Get profile by ID
- `PATCH /profiles/:id` - Update profile
- `DELETE /profiles/:id` - Delete profile

### Ads
- `POST /ads/profile/:profileId` - Create ad for profile
- `GET /ads` - Get all ads (with pagination and filters)
- `GET /ads/profile/:profileId` - Get ads by profile
- `GET /ads/:id` - Get ad by ID
- `PATCH /ads/:id` - Update ad
- `DELETE /ads/:id` - Delete ad

### Comments
- `POST /comments/ad/:adId` - Create comment for ad
- `GET /comments/ad/:adId` - Get comments by ad
- `GET /comments/:id` - Get comment by ID
- `PATCH /comments/:id` - Update comment
- `DELETE /comments/:id` - Delete comment

### Files
- `POST /files/upload` - Upload file
- `GET /files` - Get all files (Admin)
- `GET /files/entity/:entityType/:entityId` - Get files by entity
- `GET /files/:id` - Get file by ID
- `GET /files/:id/download` - Download file
- `DELETE /files/:id` - Delete file

## Database Schema

The application uses the following main entities:

- **User**: User accounts with authentication
- **Profile**: Business profiles (multiple per user)
- **Ad**: Product/service advertisements
- **Comment**: Comments and replies on ads
- **File**: File attachments for users, profiles, and ads

## Security Features

- JWT-based authentication
- Role-based access control (USER, ADMIN)
- Input validation and sanitization
- File upload security
- CORS protection
- Rate limiting

## Development

### Scripts

- `npm run start:dev` - Start development server
- `npm run build` - Build for production
- `npm run start:prod` - Start production server
- `npm run test` - Run tests
- `npm run prisma:studio` - Open Prisma Studio
- `npm run prisma:migrate` - Run database migrations

### Project Structure

\`\`\`
src/
â”œâ”€â”€ auth/           # Authentication module
â”œâ”€â”€ user/           # User management
â”œâ”€â”€ profile/        # Profile management
â”œâ”€â”€ ad/             # Advertisement management
â”œâ”€â”€ comment/        # Comment system
â”œâ”€â”€ file/           # File management
â”œâ”€â”€ common/         # Shared utilities
â”‚   â”œâ”€â”€ decorators/ # Custom decorators
â”‚   â”œâ”€â”€ filters/    # Exception filters
â”‚   â”œâ”€â”€ guards/     # Auth guards
â”‚   â””â”€â”€ interceptors/ # Interceptors
â””â”€â”€ prisma/         # Database service
\`\`\`

## License

MIT License
